using System;
using System.Collections.Generic;
using System.Linq;
using UnityEditor;
using UnityEngine;

namespace Unity.VisualScripting
{
    [Editor(typeof(IUnit))]
    public class UnitEditor : GraphElementEditor<FlowGraphContext>
    {
        public UnitEditor(Metadata metadata) : base(metadata) { }

        protected IUnit unit => (IUnit)element;

        protected new UnitDescription description => (UnitDescription)base.description;

        protected new UnitAnalysis analysis => (UnitAnalysis)base.analysis;

        protected override float GetHeight(float width, GUIContent label)
        {
            var height = 0f;

            height += GetHeaderHeight(width);

            height += GetWrappedInspectorHeight(width);

            if (exception != null)
            {
                height += GetExceptionHeight(width);
            }

            height += analysis.warnings.Sum(warning => warning.GetHeight(width));

            if (unit.inputs.Any())
            {
                height += GetPortsHeight(width, new GUIContent("Inputs"), unit.inputs.Cast<IUnitPort>());
            }

            if (unit.outputs.Any())
            {
                height += GetPortsHeight(width, new GUIContent("Outputs"), unit.outputs.Cast<IUnitPort>());
            }

            return height;
        }

        protected override void OnGUI(Rect position, GUIContent label)
        {
            y = 0;

            OnHeaderGUI(position);

            EditorGUI.BeginChangeCheck();

            OnWrappedInspectorGUI(position);

            if (EditorGUI.EndChangeCheck())
            {
                unit.Define();
            }

            if (exception != null)
            {
                y--;
                OnExceptionGUI(position.VerticalSection(ref y, GetExceptionHeight(position.width) + 1));
            }

            foreach (var warning in analysis.warnings)
            {
                y--;
                warning.OnGUI(position.VerticalSection(ref y, warning.GetHeight(position.width) + 1));
            }

            if (unit.inputs.Any())
            {
                y--;
                OnPortsGUI(position, new GUIContent("Inputs"), unit.inputs.Cast<IUnitPort>());
            }

            if (unit.outputs.Any())
            {
                y--;
                OnPortsGUI(position, new GUIContent("Outputs"), unit.outputs.Cast<IUnitPort>());
            }
        }

        private float GetPortsInnerWidth(float totalWidth)
        {
            return totalWidth - Styles.portsBackground.padding.left - Styles.portsBackground.padding.right;
        }

        private float GetPortsHeight(float totalWidth, GUIContent label, IEnumerable<IUnitPort> ports)
        {
            var innerWidth = GetPortsInnerWidth(totalWidth);

            var height = 0f;

            height += Styles.portsBackground.padding.top;
            height += Styles.portsLabel.CalcHeight(label, innerWidth);

            foreach (var port in ports)
            {
                height += Styles.spaceBetweenPorts;
                height += GetPortHeight(innerWidth, port);
            }

            height += Styles.portsBackground.padding.bottom;

            return height;
        }

        private void OnPortsGUI(Rect position, GUIContent label, IEnumerable<IUnitPort> ports)
        {
            var backgroundPosition = new Rect
                (
                position.x,
                y,
                position.width,
                GetPortsHeight(position.width, label, ports)
                );

            if (e.type == EventType.Repaint)
            {
                Styles.portsBackground.Draw(backgroundPosition, false, false, false, false);
            }

            var innerWidth = GetPortsInnerWidth(position.width);

            y += Styles.portsBackground.padding.top;
            position.x += Styles.portsBackground.padding.left;

            var labelPosition = new Rect
                (
                position.x,
                y,
                innerWidth,
                Styles.portsLabel.CalcHeight(label, innerWidth)
                );

            GUI.Label(labelPosition, label, Styles.portsLabel);

            y += labelPosition.height;

            foreach (var port in ports)
            {
                y += Styles.spaceBetweenPorts;

                var portPosition = new Rect
                    (
                    position.x,
                    y,
                    innerWidth,
                    GetPortHeight(innerWidth, port)
                    );

                OnPortGUI(portPosition, port);

                y += portPosition.height;
            }

            y += Styles.portsBackground.padding.bottom;
        }

        private GUIContent GetLabelContent(IUnitPort port)
        {
            string type;

            if (port is IUnitControlPort)
            {
                type = "Flow";
            }
            else if (port is IUnitValuePort)
            {
                type = ((IUnitValuePort)port).type.DisplayName();
            }
            else if (port is IUnitInvalidPort)
            {
                type = "Invalid";
            }
            else
            {
                throw new NotSupportedException();
            }

            return new GUIContent(string.Format($"<b>{port.Description<UnitPortDescription>().label}</b> <color=#{ColorPalette.unityForegroundDim.ToHexString()}>: {LudiqGUIUtility.EscapeRichText(type)}</color>"));
        }

        private float GetPortHeight(float paddedWidth, IUnitPort port)
        {
            var portDescription = port.Description<UnitPortDescription>();

            var labelWidth = paddedWidth - Styles.portIcon.fixedWidth - Styles.portIcon.margin.right;

            var height = 0f;

            height += Styles.portLabel.CalcHeight(GetLabelContent(port), labelWidth);

            var summary = portDescription.summary;

            if (!StringUtility.IsNullOrWhiteSpace(summary))
            {
                height += Styles.portDescription.CalcHeight(new GUIContent(summary), labelWidth);
            }

            return height;
        }

        private void OnPortGUI(Rect portPosition, IUnitPort port)
        {
            var portDescription = port.Description<UnitPortDescription>();

            var labelWidth = portPosition.width - Styles.portIcon.fixedWidth - Styles.portIcon.margin.right;

            var iconPosition = new Rect
                (
                portPosition.x,
                portPosition.y,
                Styles.portIcon.fixedWidth,
                Styles.portIcon.fixedHeight
                );

            var icon = portDescription.icon?[IconSize.Small];

            if (icon != null)
            {
                GUI.DrawTexture(iconPosition, icon);
            }

            var labelContent = GetLabelContent(port);

            var labelPosition = new Rect
                (
                iconPosition.xMax + Styles.portIcon.margin.right,
                portPosition.y,
                labelWidth,
                Styles.portLabel.CalcHeight(labelContent, labelWidth)
                );

            GUI.Label(labelPosition, labelContent, Styles.portLabel);

            var summary = portDescription.summary;

            if (!StringUtility.IsNullOrWhiteSpace(summary))
            {
                var descriptionContent = new GUIContent(summary);

                var descriptionPosition = new Rect
                    (
                    labelPosition.x,
                    labelPosition.yMax,
                    labelWidth,
                    Styles.portDescription.CalcHeight(descriptionContent, labelWidth)
                    );

                GUI.Label(descriptionPosition, descriptionContent, Styles.portDescription);
            }
        }

        public new static class Styles
        {
            static Styles()
            {
                portsBackground = new GUIStyle("IN BigTitle");
                portsBackground.padding = new RectOffset(10, 5, 7, 10);

                portsLabel = new GUIStyle(EditorStyles.label);
                portsLabel.fontSize = 13;
                portsLabel.padding = new RectOffset(0, 0, 0, 3);

                portLabel = new GUIStyle(EditorStyles.label);
                portLabel.imagePosition = ImagePosition.TextOnly;
                portLabel.wordWrap = true;
                portLabel.richText = true;

                portDescription = new GUIStyle(EditorStyles.label);
                portDescription.imagePosition = ImagePosition.TextOnly;
                portDescription.wordWrap = true;
                portDescription.richText = true;
                portDescription.fontSize = 10;
                portDescription.normal.textColor = ColorPalette.unityForegroundDim;

                portIcon = new GUIStyle();
                portIcon.imagePosition = ImagePosition.ImageOnly;
                portIcon.fixedWidth = portIcon.fixedHeight = IconSize.Small;
                portIcon.margin.right = 5;

                inspectorBackground = new GUIStyle();
                inspectorBackground.padding = new RectOffset(10, 10, 10, 10);
            }

            public static readonly GUIStyle portsBackground;

            public static readonly GUIStyle portsLabel;

            public static readonly GUIStyle portLabel;

            public static readonly GUIStyle portDescription;

            public static readonly GUIStyle portIcon;

            public static readonly float spaceBetweenPorts = 5;

            public static readonly GUIStyle inspectorBackground;
        }
    }
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           using System;
using System.Collections.Generic;
using System.Linq;
using UnityEditor;
using UnityEngine;

namespace Unity.VisualScripting
{
    [Widget(typeof(IUnit))]
    public class UnitWidget<TUnit> : NodeWidget<FlowCanvas, TUnit>, IUnitWidget where TUnit : class, IUnit
    {
        public UnitWidget(FlowCanvas canvas, TUnit unit) : base(canvas, unit)
        {
            unit.onPortsChanged += CacheDefinition;
            unit.onPortsChanged += SubWidgetsChanged;
        }

        public override void Dispose()
        {
            base.Dispose();

            unit.onPortsChanged -= CacheDefinition;
            unit.onPortsChanged -= SubWidgetsChanged;
        }

        public override IEnumerable<IWidget> subWidgets => unit.ports.Select(port => canvas.Widget(port));


        #region Model

        protected TUnit unit => element;

        IUnit IUnitWidget.unit => unit;

        protected IUnitDebugData unitDebugData => GetDebugData<IUnitDebugData>();

        private UnitDescription description;

        private UnitAnalysis analysis => unit.Analysis<UnitAnalysis>(context);

        protected readonly List<IUnitPortWidget> ports = new List<IUnitPortWidget>();

        protected readonly List<IUnitPortWidget> inputs = new List<IUnitPortWidget>();

        protected readonly List<IUnitPortWidget> outputs = new List<IUnitPortWidget>();

        private readonly List<string> settingNames = new List<string>();

        protected IEnumerable<Metadata> settings
        {
            get
            {
                foreach (var settingName in settingNames)
                {
                    yield return metadata[settingName];
                }
            }
        }

        protected override void CacheItemFirstTime()
        {
            base.CacheItemFirstTime();
            CacheDefinition();
        }

        protected virtual void CacheDefinition()
        {
            inputs.Clear();
            outputs.Clear();
            ports.Clear();
            inputs.AddRange(unit.inputs.Select(port => canvas.Widget<IUnitPortWidget>(port)));
            outputs.AddRange(unit.outputs.Select(port => canvas.Widget<IUnitPortWidget>(port)));
            ports.AddRange(inputs);
            ports.AddRange(outputs);

            Reposition();
        }

        protected override void CacheDescription()
        {
            description = unit.Description<UnitDescription>();

            titleContent.text = description.shortTitle;
            titleContent.tooltip = description.summary;
            surtitleContent.text = description.surtitle;
            subtitleContent.text = description.subtitle;

            Reposition();
        }

        protected override void CacheMetadata()
        {
            settingNames.Clear();

            settingNames.AddRange(metadata.valueType
                .GetMembers()
                .Where(mi => mi.HasAttribute<UnitHeaderInspectableAttribute>())
                .OrderBy(mi => mi.GetAttributes<Attribute>().OfType<IInspectableAttribute>().FirstOrDefault()?.order ?? int.MaxValue)
                .ThenBy(mi => mi.MetadataToken)
                .Select(mi => mi.Name));

            lock (settingLabelsContents)
            {
                settingLabelsContents.Clear();

                foreach (var setting in settings)
                {
                    var settingLabel = setting.GetAttribute<UnitHeaderInspectableAttribute>().label;

                    GUIContent settingContent;

                    if (string.IsNullOrEmpty(settingLabel))
                    {
                        settingContent = null;
                    }
                    else
                    {
                        settingContent = new GUIContent(settingLabel);
                    }

                    settingLabelsContents.Add(setting, settingContent);
                }
            }

            Reposition();
        }

        public virtual Inspector GetPortInspector(IUnitPort port, Metadata metadata)
        {
            return metadata.Inspector();
        }

        #endregion


        #region Lifecycle

        public override bool foregroundRequiresInput => showSettings || unit.valueInputs.Any(vip => vip.hasDefaultValue);

        public override void HandleInput()
        {
            if (canvas.isCreatingConnection)
            {
                if (e.IsMouseDown(MouseButton.Left))
                {
                    var source = canvas.connectionSource;
                    var destination = source.CompatiblePort(unit);

                    if (destination != null)
                    {
                        UndoUtility.RecordEditedObject("Connect Nodes");
                        source.ValidlyConnectTo(destination);
                        canvas.connectionSource = null;
                        canvas.Widget(source.unit).Reposition();
                        canvas.Widget(destination.unit).Reposition();
                        GUI.changed = true;
                    }

                    e.Use();
                }
                else if (e.IsMouseDown(MouseButton.Right))
                {
                    canvas.CancelConnection();
                    e.Use();
                }
            }

            base.HandleInput();
        }

        #endregion


        #region Contents

        protected readonly GUIContent titleContent = new GUIContent();

        protected readonly GUIContent surtitleContent = new GUIContent();

        protected readonly GUIContent subtitleContent = new GUIContent();

        protected readonly Dictionary<Metadata, GUIContent> settingLabelsContents = new Dictionary<Metadata, GUIContent>();

        #endregion


        #region Positioning

        protected override bool snapToGrid => BoltCore.Configuration.snapToGrid;

        public override IEnumerable<IWidget> positionDependers => ports.Cast<IWidget>();

        protected Rect _position;

        public override Rect position
        {
            get { return _position; }
            set { unit.position = value.position; }
        }

        public Rect titlePosition { get; private set; }

        public Rect surtitlePosition { get; private set; }

        public Rect subtitlePosition { get; private set; }

        public Rect iconPosition { get; private set; }

        public List<Rect> iconsPositions { get; private set; } = new List<Rect>();

        public Dictionary<Metadata, Rect> settingsPositions { get; } = new Dictionary<Metadata, Rect>();

        public Rect headerAddonPosition { get; private set; }

        public Rect portsBackgroundPosition { get; private set; }

        public override void CachePosition()
        {
            // Width

            var inputsWidth = 0f;
            var outputsWidth = 0f;

            foreach (var input in inputs)
            {
                inputsWidth = Mathf.Max(inputsWidth, input.GetInnerWidth());
            }

            foreach (var output in outputs)
            {
                outputsWidth = Mathf.Max(outputsWidth, output.GetInnerWidth());
            }

            var portsWidth = 0f;

            portsWidth += inputsWidth;
            portsWidth += Styles.spaceBetweenInputsAndOutputs;
            portsWidth += outputsWidth;

            settingsPositions.Clear();

            var settingsWidth = 0f;

            if (showSettings)
            {
                foreach (var setting in settings)
                {
                    var settingWidth = 0f;

                    var settingLabelContent = settingLabelsContents[setting];

                    if (settingLabelContent != null)
                    {
                        settingWidth += Styles.settingLabel.CalcSize(settingLabelContent).x;
                    }

                    settingWidth += setting.Inspector().GetAdaptiveWidth();

                    settingWidth = Mathf.Min(settingWidth, Styles.maxSettingsWidth);

                    settingsPositions.Add(setting, new Rect(0, 0, settingWidth, 0));

                    settingsWidth = Mathf.Max(settingsWidth, settingWidth);
                }
            }

            var headerAddonWidth = 0f;

            if (showHeaderAddon)
            {
                headerAddonWidth = GetHeaderAddonWidth();
            }

            var titleWidth = Styles.title.CalcSize(titleContent).x;

            var headerTextWidth = titleWidth;

            var surtitleWidth = 0f;

            if (showSurtitle)
            {
                surtitleWidth = Styles.surtitle.CalcSize(surtitleContent).x;
                headerTextWidth = Mathf.Max(headerTextWidth, surtitleWidth);
            }

            var subtitleWidth = 0f;

            if (showSubtitle)
            {
                subtitleWidth = Styles.subtitle.CalcSize(subtitleContent).x;
                headerTextWidth = Mathf.Max(headerTextWidth, subtitleWidth);
            }

            var iconsWidth = 0f;

            if (showIcons)
            {
                var iconsColumns = Mathf.Ceil((float)description.icons.Length / Styles.iconsPerColumn);
                iconsWidth = iconsColumns * Styles.iconsSize + ((iconsColumns - 1) * Styles.iconsSpacing);
            }

            var headerWidth = Mathf.Max(headerTextWidth + iconsWidth, Mathf.Max(settingsWidth, headerAddonWidth)) + Styles.iconSize + Styles.spaceAfterIcon;

            var innerWidth = Mathf.Max(portsWidth, headerWidth);

            var edgeWidth = InnerToEdgePosition(new Rect(0, 0, innerWidth, 0)).width;

            // Height & Positioning

            var edgeOrigin = unit.position;
            var edgeX = edgeOrigin.x;
            var edgeY = edgeOrigin.y;
            var innerOrigin = EdgeToInnerPosition(new Rect(edgeOrigin, Vector2.zero)).position;
            var innerX = innerOrigin.x;
            var innerY = innerOrigin.y;

            iconPosition = new Rect
                (
                innerX,
                innerY,
                Styles.iconSize,
                Styles.iconSize
                );

            var headerTextX = iconPosition.xMax + Styles.spaceAfterIcon;

            var y = innerY;

            var headerHeight = 0f;

            var surtitleHeight = 0f;

            if (showSurtitle)
            {
                surtitleHeight = Styles.surtitle.CalcHeight(surtitleContent, headerTextWidth);

                surtitlePosition = new Rect
                    (
                    headerTextX,
                    y,
                    headerTextWidth,
                    surtitleHeight
                    );

                headerHeight += surtitleHeight;
                y += surtitleHeight;

                headerHeight += Styles.spaceAfterSurtitle;
                y += Styles.spaceAfterSurtitle;
            }

            var titleHeight = 0f;

            if (showTitle)
            {
                titleHeight = Styles.title.CalcHeight(titleContent, headerTextWidth);

                titlePosition = new Rect
                    (
                    headerTextX,
                    y,
                    headerTextWidth,
                    titleHeight
                    );

                headerHeight += titleHeight;
                y += titleHeight;
            }

            var subtitleHeight = 0f;

            if (showSubtitle)
            {
                headerHeight += Styles.spaceBeforeSubtitle;
                y += Styles.spaceBeforeSubtitle;

                subtitleHeight = Styles.subtitle.CalcHeight(subtitleContent, headerTextWidth);

                subtitlePosition = new Rect
                    (
                    headerTextX,
                    y,
                    headerTextWidth,
                    subtitleHeight
                    );

                headerHeight += subtitleHeight;
                y += subtitleHeight;
            }

            iconsPositions.Clear();

            if (showIcons)
            {
                var iconRow = 0;
                var iconCol = 0;

                for (int i = 0; i < description.icons.Length; i++)
                {
                    var iconPosition = new Rect
                        (
                        innerX + innerWidth - ((iconCol + 1) * Styles.iconsSize) - ((iconCol) * Styles.iconsSpacing),
                        innerY + (iconRow * (Styles.iconsSize + Styles.iconsSpacing)),
                        Styles.iconsSize,
                        Styles.iconsSize
                        );

                    iconsPositions.Add(iconPosition);

                    iconRow++;

                    if (iconRow % Styles.iconsPerColumn == 0)
                    {
                        iconCol++;
                        iconRow = 0;
                    }
                }
            }

            var settingsHeight = 0f;

            if (showSettings)
            {
                headerHeight += Styles.spaceBeforeSettings;

                foreach (var setting in settings)
                {
                    var settingWidth = settingsPositions[setting].width;

                    using (LudiqGUIUtility.currentInspectorWidth.Override(settingWidth))
                    {
                        var settingHeight = LudiqGUI.GetInspectorHeight(null, setting, settingWidth, settingLabelsContents[setting] ?? GUIContent.none);

                        var settingPosition = new Rect
                            (
                            headerTextX,
                            y,
                            settingWidth,
                            settingHeight
                            );

                        settingsPositions[setting] = settingPosition;

                        settingsHeight += settingHeight;
                        y += settingHeight;

                        settingsHeight += Styles.spaceBetweenSettings;
                        y += Styles.spaceBetweenSettings;
                    }
                }

                settingsHeight -= Styles.spaceBetweenSettings;
                y -= Styles.spaceBetweenSettings;

                headerHeight += settingsHeight;

                headerHeight += Styles.spaceAfterSettings;
                y += Styles.spaceAfterSettings;
            }

            if (showHeaderAddon)
            {
                var headerAddonHeight = GetHeaderAddonHeight(headerAddonWidth);

                headerAddonPosition = new Rect
                    (
                    headerTextX,
                    y,
                    headerAddonWidth,
                    headerAddonHeight
                    );

                headerHeight += headerAddonHeight;
                y += headerAddonHeight;
            }

            if (headerHeight < Styles.iconSize)
            {
                var difference = Styles.iconSize - headerHeight;
                var centeringOffset = difference / 2;

                if (showTitle)
                {
                    var _titlePosition = titlePosition;
                    _titlePosition.y += centeringOffset;
                    titlePosition = _titlePosition;
                }

                if (showSubtitle)
                {
                    var _subtitlePosition = subtitlePosition;
                    _subtitlePosition.y += centeringOffset;
                    subtitlePosition = _subtitlePosition;
                }

                if (showSettings)
                {
                    foreach (var setting in settings)
                    {
                        var _settingPosition = settingsPositions[setting];
                        _settingPosition.y += centeringOffset;
                        settingsPositions[setting] = _settingPosition;
                    }
                }

                if (showHeaderAddon)
                {
                    var _headerAddonPosition = headerAddonPosition;
                    _headerAddonPosition.y += centeringOffset;
                    headerAddonPosition = _headerAddonPosition;
                }

                headerHeight = Styles.iconSize;
            }

            y = innerY + headerHeight;

            var innerHeight = 0f;

            innerHeight += headerHeight;

            if (showPorts)
            {
                innerHeight += Styles.spaceBeforePorts;
                y += Styles.spaceBeforePorts;

                var portsBackgroundY = y;
                var portsBackgroundHeight = 0f;

                portsBackgroundHeight += Styles.portsBackground.padding.top;
                innerHeight += Styles.portsBackground.padding.top;
                y += Styles.portsBackground.padding.top;

                var portStartY = y;

                var inputsHeight = 0f;
                var outputsHeight = 0f;

                foreach (var input in inputs)
                {
                    input.y = y;

                    var inputHeight = input.GetHeight();

                    inputsHeight += inputHeight;
                    y += inputHeight;

                    inputsHeight += Styles.spaceBetweenPorts;
                    y += Styles.spaceBetweenPorts;
                }

                if (inputs.Count > 0)
                {
                    inputsHeight -= Styles.spaceBetweenPorts;
                    y -= Styles.spaceBetweenPorts;
                }

                y = portStartY;

                foreach (var output in outputs)
                {
                    output.y = y;

                    var outputHeight = output.GetHeight();

                    outputsHeight += outputHeight;
                    y += outputHeight;

                    outputsHeight += Styles.spaceBetweenPorts;
                    y += Styles.spaceBetweenPorts;
                }

                if (outputs.Count > 0)
                {
                    outputsHeight -= Styles.spaceBetweenPorts;
                    y -= Styles.spaceBetweenPorts;
                }

                var portsHeight = Math.Max(inputsHeight, outputsHeight);

                portsBackgroundHeight += portsHeight;
                innerHeight += portsHeight;
                y = portStartY + portsHeight;

                portsBackgroundHeight += Styles.portsBackground.padding.bottom;
                innerHeight += Styles.portsBackground.padding.bottom;
                y += Styles.portsBackground.padding.bottom;

                portsBackgroundPosition = new Rect
                    (
                    edgeX,
                    portsBackgroundY,
                    edgeWidth,
                    portsBackgroundHeight
                    );
            }

            var edgeHeight = InnerToEdgePosition(new Rect(0, 0, 0, innerHeight)).height;

            _position = new Rect
                (
                edgeX,
                edgeY,
                edgeWidth,
                edgeHeight
                );
        }

        protected virtual float GetHeaderAddonWidth()
        {
            return 0;
        }

        protected virtual float GetHeaderAddonHeight(float width)
        {
            return 0;
        }

        #endregion


        #region Drawing

        protected virtual NodeColorMix baseColor => NodeColor.Gray;

        protected override NodeColorMix color
        {
            get
            {
                if (unitDebugData.runtimeException != null)
                {
                    return NodeColor.Red;
                }

                var color = baseColor;

                if (analysis.warnings.Count > 0)
                {
                    var mostSevereWarning = Warning.MostSevereLevel(analysis.warnings);

                    switch (mostSevereWarning)
                    {
                        case WarningLevel.Error:
                            color = NodeColor.Red;

                            break;

                        case WarningLevel.Severe:
                            color = NodeColor.Orange;

                            break;

                        case WarningLevel.Caution:
                            color = NodeColor.Yellow;

                            break;
                    }
                }

                if (EditorApplication.isPaused)
                {
                    if (EditorTimeBinding.frame == unitDebugData.lastInvokeFrame)
                    {
                        return NodeColor.Blue;
                    }
                }
                else
                {
                    var mix = color;
                    mix.blue = Mathf.Lerp(1, 0, (EditorTimeBinding.time - unitDebugData.lastInvokeTime) / Styles.invokeFadeDuration);

                    return mix;
                }

                return color;
            }
        }

        protected override NodeShape shape => NodeShape.Square;

        protected virtual bool showTitle => !string.IsNullOrEmpty(description.shortTitle);

        protected virtual bool showSurtitle => !string.IsNullOrEmpty(description.surtitle);

        protected virtual bool showSubtitle => !string.IsNullOrEmpty(description.subtitle);

        protected virtual bool showIcons => description.icons.Length > 0;

        protected virtual bool showSettings => settingNames.Count > 0;

        protected virtual bool showHeaderAddon => false;

        protected virtual bool showPorts => ports.Count > 0;

        protected override bool dim
        {
            get
            {
                var dim = BoltCore.Configuration.dimInactiveNodes && !analysis.isEntered;

                if (isMouseOver || isSelected)
                {
                    dim = false;
                }

                if (BoltCore.Configuration.dimIncompatibleNodes && canvas.isCreatingConnection)
                {
                    dim = !unit.ports.Any(p => canvas.connectionSource == p || canvas.connectionSource.CanValidlyConnectTo(p));
                }

                return dim;
            }
        }

        public override void DrawForeground()
        {
            BeginDim();

            base.DrawForeground();

            DrawIcon();

            if (showSurtitle)
            {
                DrawSurtitle();
            }

            if (showTitle)
            {
                DrawTitle();
            }

            if (showSubtitle)
            {
                DrawSubtitle();
            }

            if (showIcons)
            {
                DrawIcons();
            }

            if (showSettings)
            {
                DrawSettings();
            }

            if (showHeaderAddon)
            {
                DrawHeaderAddon();
            }

            if (showPorts)
            {
                DrawPortsBackground();
            }

            EndDim();
        }

        protected void DrawIcon()
        {
            var icon = description.icon ?? BoltFlow.Icons.unit;

            if (icon != null && icon[(int)iconPosition.width])
            {
                GUI.DrawTexture(iconPosition, icon[(int)iconPosition.width]);
            }
        }

        protected void DrawTitle()
        {
            GUI.Label(titlePosition, titleContent, invertForeground ? Styles.titleInverted : Styles.title);
        }

        protected void DrawSurtitle()
        {
            GUI.Label(surtitlePosition, surtitleContent, invertForeground ? Styles.surtitleInverted : Styles.surtitle);
        }

        protected void DrawSubtitle()
        {
            GUI.Label(subtitlePosition, subtitleContent, invertForeground ? Styles.subtitleInverted : Styles.subtitle);
        }

        protected void DrawIcons()
        {
            for (int i = 0; i < description.icons.Length; i++)
            {
                var icon = description.icons[i];
                var position = iconsPositions[i];

                GUI.DrawTexture(position, icon?[(int)position.width]);
            }
        }

        private void DrawSettings()
        {
            if (graph.zoom < FlowCanvas.inspectorZoomThreshold)
            {
                return;
            }

            EditorGUI.BeginDisabledGroup(!e.IsRepaint && isMouseThrough && !isMouseOver);

            EditorGUI.BeginChangeCheck();

            foreach (var setting in settings)
            {
                DrawSetting(setting);
            }

            if (EditorGUI.EndChangeCheck())
            {
                unit.Define();
                Reposition();
            }

            EditorGUI.EndDisabledGroup();
        }

        protected void DrawSetting(Metadata setting)
        {
            var settingPosition = settingsPositions[setting];

            using (LudiqGUIUtility.currentInspectorWidth.Override(settingPosition.width))
            using (Inspector.expandTooltip.Override(false))
            {
                var label = settingLabelsContents[setting];

                if (label == null)
                {
                    LudiqGUI.Inspector(setting, settingPosition, GUIContent.none);
                }
                else
                {
                    using (Inspector.defaultLabelStyle.Override(Styles.settingLabel))
                    using (LudiqGUIUtility.labelWidth.Override(Styles.settingLabel.CalcSize(label).x))
                    {
                        LudiqGUI.Inspector(setting, settingPosition, label);
                    }
                }
            }
        }

        protected virtual void DrawHeaderAddon() { }

        protected void DrawPortsBackground()
        {
            if (canvas.showRelations)
            {
                foreach (var relation in unit.relations)
                {
                    var start = ports.Single(pw => pw.port == relation.source).handlePosition.center;
                    var end = ports.Single(pw => pw.port == relation.destination).handlePosition.center;

                    var startTangent = start;
                    var endTangent = end;

                    if (relation.source is IUnitInputPort &&
                        relation.destination is IUnitInputPort)
                    {
                        //startTangent -= new Vector2(20, 0);
                        endTangent -= new Vector2(32, 0);
                    }
                    else
                    {
                        startTangent += new Vector2(innerPosition.width / 2, 0);
                        endTangent += new Vector2(-innerPosition.width / 2, 0);
                    }

                    Handles.DrawBezier
                        (
                            start,
                            end,
                            startTangent,
                            endTangent,
                            new Color(0.136f, 0.136f, 0.136f, 1.0f),
                            null,
                            3
                        );
                }
            }
            else
            {
                if (e.IsRepaint)
                {
                    Styles.portsBackground.Draw(portsBackgroundPosition, false, false, false, false);
                }
            }
        }

        #endregion


        #region Selecting

        public override bool canSelect => true;

        #endregion


        #region Dragging

        public override bool canDrag => true;

        public override void ExpandDragGroup(HashSet<IGraphElement> dragGroup)
        {
            if (BoltCore.Configuration.carryChildren)
            {
                foreach (var output in unit.outputs)
                {
                    foreach (var connection in output.connections)
                    {
                        if (dragGroup.Contains(connection.destination.unit))
                        {
                            continue;
                        }

                        dragGroup.Add(connection.destination.unit);

                        canvas.Widget(connection.destination.unit).ExpandDragGroup(dragGroup);
                    }
                }
            }
        }

        #endregion


        #region Deleting

        public override bool canDelete => true;

        #endregion


        #region Clipboard

        public override void ExpandCopyGroup(HashSet<IGraphElement> copyGroup)
        {
            copyGroup.UnionWith(unit.connections.Cast<IGraphElement>());
        }

        #endregion


        #region Context

        protected override IEnumerable<DropdownOption> contextOptions
        {
            get
            {
                yield return new DropdownOption((Action)ReplaceUnit, "Replace...");

                foreach (var baseOption in base.contextOptions)
                {
                    yield return baseOption;
                }
            }
        }

        private void ReplaceUnit()
        {
            UnitWidgetHelper.ReplaceUnit(unit, reference, context, selection, e);
        }

        #endregion


        public static class Styles
        {
            static Styles()
            {
                // Disabling word wrap because Unity's CalcSize and CalcHeight
                // are broken w.r.t. pixel-perfection and matrix

                title = new GUIStyle(BoltCore.Styles.nodeLabel);
                title.padding = new RectOffset(0, 5, 0, 2);
                title.margin = new RectOffset(0, 0, 0, 0);
                title.fontSize = 12;
                title.alignment = TextAnchor.MiddleLeft;
                title.wordWrap = false;

                surtitle = new GUIStyle(BoltCore.Styles.nodeLabel);
                surtitle.padding = new RectOffset(0, 5, 0, 0);
                surtitle.margin = new RectOffset(0, 0, 0, 0);
                surtitle.fontSize = 10;
                surtitle.alignment = TextAnchor.MiddleLeft;
                surtitle.wordWrap = false;

                subtitle = new GUIStyle(surtitle);
                subtitle.padding.bottom = 2;

                titleInverted = new GUIStyle(title);
                titleInverted.normal.textColor = ColorPalette.unityBackgroundDark;

                surtitleInverted = new GUIStyle(surtitle);
                surtitleInverted.normal.textColor = ColorPalette.unityBackgroundDark;

                subtitleInverted = new GUIStyle(subtitle);
                subtitleInverted.normal.textColor = ColorPalette.unityBackgroundDark;

                if (EditorGUIUtility.isProSkin)
                {
                    portsBackground = new GUIStyle("In BigTitle")
                    {
                        padding = new RectOffset(0, 0, 6, 5)
                    };
                }
                else
                {
                    TextureResolution[] textureResolution = { 2 };
                    var createTextureOptions = CreateTextureOptions.Scalable;
                    EditorTexture normalTexture = BoltCore.Resources.LoadTexture($"NodePortsBackground.png", textureResolution, createTextureOptions);

                    portsBackground = new GUIStyle
                    {
                        normal = { background = normalTexture.Single() },
                        padding = new RectOffset(0, 0, 6, 5)
                    };
                }

                settingLabel = new GUIStyle(BoltCore.Styles.nodeLabel);
                settingLabel.padding.left = 0;
                settingLabel.padding.right = 5;
                settingLabel.wordWrap = false;
                settingLabel.clipping = TextClipping.Clip;
            }

            public static readonly GUIStyle title;

            public static readonly GUIStyle surtitle;

            public static readonly GUIStyle subtitle;

            public static readonly GUIStyle titleInverted;

            public static readonly GUIStyle surtitleInverted;

            public static readonly GUIStyle subtitleInverted;

            public static readonly GUIStyle settingLabel;

            public static readonly float spaceAroundLineIcon = 5;

            public static readonly float spaceBeforePorts = 5;

            public static readonly float spaceBetweenInputsAndOutputs = 8;

            public static readonly float spaceBeforeSettings = 2;

            public static readonly float spaceBetweenSettings = 3;

            public static readonly float spaceBetweenPorts = 3;

            public static readonly float spaceAfterSettings = 0;

            public static readonly float maxSettingsWidth = 150;

            public static readonly GUIStyle portsBackground;

            public static readonly float iconSize = IconSize.Medium;

            public static readonly float iconsSize = IconSize.Small;

            public static readonly float iconsSpacing = 3;

            public static readonly int iconsPerColumn = 2;

            public static readonly float spaceAfterIcon = 6;

            public static readonly float spaceAfterSurtitle = 2;

            public static readonly float spaceBeforeSubtitle = 0;

            public static readonly float invokeFadeDuration = 0.5f;
        }
    }

    internal class UnitWidgetHelper
    {
        internal static void ReplaceUnit(IUnit unit, GraphReference reference, IGraphContext context, GraphSelection selection, EventWrapper eventWrapper)
        {
            var oldUnit = unit;
            var unitPosition = oldUnit.position;
            var preservation = UnitPreservation.Preserve(oldUnit);

            var options = new UnitOptionTree(new GUIContent("Node"));
            options.filter = UnitOptionFilter.Any;
            options.filter.NoConnection = false;
            options.reference = reference;

            var activatorPosition = new Rect(eventWrapper.mousePosition, new Vector2(200, 1));

            LudiqGUI.FuzzyDropdown
            (
                activatorPosition,
                options,
                null,
                delegate (object _option)
                {
                    var option = (IUnitOption)_option;

                    context.BeginEdit();
                    UndoUtility.RecordEditedObject("Replace Node");
                    var graph = oldUnit.graph;
                    oldUnit.graph.units.Remove(oldUnit);
                    var newUnit = option.InstantiateUnit();
                    newUnit.guid = Guid.NewGuid();
                    newUnit.position = unitPosition;
                    graph.units.Add(newUnit);
                    preservation.RestoreTo(newUnit);
                    option.PreconfigureUnit(newUnit);
                    selection.Select(newUnit);
                    GUI.changed = true;
                    context.EndEdit();
                }
            );
        }
    }
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    using System;
using System.Collections.Generic;
using System.IO;
using UnityEditor;
using UnityEditor.SceneManagement;
using UnityEngine;
using UnityEngine.SceneManagement;
using UnityObject = UnityEngine.Object;

namespace Unity.VisualScripting
{
    internal class DropdownOptions
    {
        internal bool interactable = true;
        internal string label;
        internal string tooltip;
        internal Action callback;
    }

    internal class SplitDropdown
    {
        private bool reset;
        private List<DropdownOptions> listOfOptions;

        internal SplitDropdown(List<DropdownOptions> listOfOptions)
        {
            this.listOfOptions = listOfOptions;
        }

        internal DropdownOptions GetOption(int index)
        {
            return listOfOptions[index];
        }

        internal void Reset()
        {
            reset = true;
        }

        internal bool Draw(Rect area, string label, ref bool toggleState)
        {
            GUI.Box(area, string.Empty, EmptyGraphWindow.buttonStyle);

            if (GUI.Button(new Rect(area.x, area.y, area.width - area.height, area.height), label,
                EmptyGraphWindow.labelStyleButton))
            {
                toggleState = false;

                return true;
            }

            Rect toggleRect = new Rect(area.x + area.width - area.height - 2, area.y - 1, area.height + 3,
                area.height + 3);

            toggleState = GUI.Toggle(toggleRect, toggleState, "", EmptyGraphWindow.labelStyleButton);

            GUI.Label(toggleRect, EmptyGraphWindow.dropdownIcon, EmptyGraphWindow.titleStyle);

            if (toggleState)
            {
                GUI.BeginGroup(new Rect(area.x, area.y + area.height - 1, area.width, area.height * 2),
                    EmptyGraphWindow.buttonStyle);
                Rect areaChild = new Rect(0, 0, EmptyGraphWindow.buttonWidth,
                    EmptyGraphWindow.buttonHeight);

                GUIContent contentOption;

                foreach (DropdownOptions dropdownOption in listOfOptions)
                {
                    EditorGUI.BeginDisabledGroup(!dropdownOption.interactable);

                    if (dropdownOption.interactable)
                    {
                        contentOption = new GUIContent(dropdownOption.label);
                    }
                    else
                    {
                        contentOption = new GUIContent(dropdownOption.label, dropdownOption.tooltip);
                    }

                    if (GUI.Button(areaChild, contentOption, EmptyGraphWindow.labelStyleDropdownOptions))
                    {
                        toggleState = false;

                        dropdownOption.callback();
                    }

                    EditorGUI.EndDisabledGroup();

                    areaChild.y += areaChild.height;
                }

                GUI.EndGroup();
            }

            if (reset)
            {
                toggleState = false;
                reset = false;
            }

            return false;
        }
    }

    internal class EmptyGraphWindow : EditorWindow
    {
        internal static GUIContent dropdownIcon;

        private bool toggleOnScript = false;
        private bool toggleOnState = false;

        internal static GUIStyle buttonStyle;
        internal static GUIStyle labelStyleButton;
        internal static GUIStyle labelStyleDropdownOptions;
        internal static GUIStyle titleStyle;

        internal static int titleHeight = 120;
        internal static int buttonWidth = 200;
        internal static int buttonHeight = 22;

        private bool shouldCloseWindow;
        private Vector2 scrollPosition;
        private Rect scrollArea;

        private SplitDropdown splitDropdownScriptGraph;
        private SplitDropdown splitDropdownStateGraph;

        const string k_OnSelectedGameObject = "...on selected GameObject";
        const string k_OnNewGameObject = "...on new GameObject";
        const string k_SelectedGameObject = "Please, select a GameObject";

        [MenuItem("Window/Visual Scripting/Visual Scripting Graph", false, 3010)]
        private static void ShowWindow()
        {
            EmptyGraphWindow window = GetWindow<EmptyGraphWindow>();

            window.titleContent = new GUIContent("Visual Scripting");
        }

        private void OnEnable()
        {
            string pathRoot = PathUtility.GetPackageRootPath();

            UnityObject icon = EditorGUIUtility.Load(Path.Combine(pathRoot,
                "Editor/VisualScripting.Shared/EditorAssetResources/SplitButtonArrow.png"));

            dropdownIcon = new GUIContent(icon as Texture2D);

            scrollArea = new Rect(0, 0, 630, 300);

            toggleOnScript = false;
            toggleOnState = false;
            shouldCloseWindow = false;

            var listOfOptions = new List<DropdownOptions>
            {
                new DropdownOptions
                {
                    label = k_OnSelectedGameObject,
                    tooltip = k_SelectedGameObject,
                    callback = CreateScriptGraphOnSelectedGameObject
                },
                new DropdownOptions
                {
                    label = k_OnNewGameObject,
                    callback = CreateScriptGraphOnNewGameObject
                }
            };

            splitDropdownScriptGraph = new SplitDropdown(listOfOptions);

            listOfOptions = new List<DropdownOptions>
            {
                new DropdownOptions
                {
                    label = k_OnSelectedGameObject,
                    tooltip = k_SelectedGameObject,
                    callback = CreateStateGraphOnSelectedGameObject
                },
                new DropdownOptions
                {
                    label = k_OnNewGameObject,
                    callback = CreateStateGraphOnNewGameObject
                }
            };

            splitDropdownStateGraph = new SplitDropdown(listOfOptions);
        }

        private void OpenGraphAsset(UnityObject unityObject, bool shouldSetSceneAsDirty)
        {
            shouldCloseWindow = true;

            ScriptGraphAsset scriptGraphAsset = unityObject as ScriptGraphAsset;

            GraphReference graphReference = null;

            if (scriptGraphAsset != null)
            {
                graphReference = GraphReference.New(scriptGraphAsset, true);
            }
            else
            {
                StateGraphAsset stateGraphAsset = unityObject as StateGraphAsset;

                if (stateGraphAsset != null)
                {
                    graphReference = GraphReference.New(stateGraphAsset, true);
                }
            }

            if (shouldSetSceneAsDirty)
            {
                EditorSceneManager.MarkSceneDirty(SceneManager.GetActiveScene());
            }

            GraphWindow.OpenActive(graphReference);
        }

        private void OpenGraphFromPath(string path, bool shouldSetSceneAsDirty)
        {
            path = path.Replace(Application.dataPath, "Assets");

            UnityObject unityObject = AssetDatabase.LoadAssetAtPath(path, typeof(UnityObject));

            OpenGraphAsset(unityObject, shouldSetSceneAsDirty);
        }

        private void OpenGraph()
        {
            EditorGUIUtility.ShowObjectPicker<MacroScriptableObject>(null, false, String.Empty,
                EditorGUIUtility.GetControlID(FocusType.Passive));
        }

        private bool CreateScriptGraphAsset(GameObject gameObject = null, bool updateName = false)
        {
            var path = EditorUtility.SaveFilePanelInProject("Save Graph", "New Script Graph", "asset", null);

            if (string.IsNullOrEmpty(path))
            {
                return false;
            }

            VSUsageUtility.isVisualScriptingUsed = true;

            var macro = (IMacro)CreateInstance(typeof(ScriptGraphAsset));
            var macroObject = (UnityObject)macro;
            macro.graph = FlowGraph.WithStartUpdate();

            if (gameObject != null)
            {
                ScriptMachine flowMachine = gameObject.AddComponent<ScriptMachine>();

                flowMachine.nest.macro = (ScriptGraphAsset)macro;
            }

            string filename = Path.GetFileNameWithoutExtension(path);

            if (updateName)
            {
                gameObject.name = filename;
            }

            macroObject.name = filename;

            AssetDatabase.CreateAsset(macroObject, path);

            bool shouldSetSceneAsDirty = gameObject != null;

            OpenGraphFromPath(path, shouldSetSceneAsDirty);

            return true;
        }

        private void CreateScriptGraph()
        {
            Selection.activeGameObject = null;

            if (CreateScriptGraphAsset())
            {
                shouldCloseWindow = true;
            }
        }

        private void CreateScriptGraphOnNewGameObject()
        {
            Selection.activeGameObject = null;

            GameObject newGameObject = new GameObject();

            if (!CreateScriptGraphAsset(newGameObject, true))
            {
                DestroyImmediate(newGameObject);
            }
        }

        private void CreateScriptGraphOnSelectedGameObject()
        {
            if (Selection.activeGameObject != null)
            {
                if (CreateScriptGraphAsset(Selection.activeGameObject))
                {
                    shouldCloseWindow = true;
                }
            }
        }

        private bool CreateStateGraphAsset(GameObject gameObject = null, bool updateName = false)
        {
            var path = EditorUtility.SaveFilePanelInProject("Save Graph", "New State Graph", "asset", null);

            if (string.IsNullOrEmpty(path))
            {
                return false;
            }

            VSUsageUtility.isVisualScriptingUsed = true;

            var macro = (IMacro)CreateInstance(typeof(StateGraphAsset));
            var macroObject = (UnityObject)macro;
            macro.graph = StateGraph.WithStart();

            if (gameObject != null)
            {
                StateMachine stateMachine = gameObject.AddComponent<StateMachine>();

                stateMachine.nest.macro = (StateGraphAsset)macro;
            }

            string filename = Path.GetFileNameWithoutExtension(path);

            if (updateName)
            {
                gameObject.name = filename;
            }

            macroObject.name = filename;

            AssetDatabase.CreateAsset(macroObject, path);

            bool shouldSetSceneAsDirty = gameObject != null;

            OpenGraphFromPath(path, shouldSetSceneAsDirty);

            return true;
        }

        private void CreateStateGraph()
        {
            Selection.activeGameObject = null;

            if (CreateStateGraphAsset())
            {
                shouldCloseWindow = true;
            }
        }

        private void CreateStateGraphOnNewGameObject()
        {
            Selection.activeGameObject = null;

            GameObject newGameObject = new GameObject();

            if (!CreateStateGraphAsset(newGameObject, true))
            {
                DestroyImmediate(newGameObject);
            }
        }

        private void CreateStateGraphOnSelectedGameObject()
        {
            if (Selection.activeGameObject != null)
            {
                if (CreateStateGraphAsset(Selection.activeGameObject))
                {
                    shouldCloseWindow = true;
                }
            }
        }

        private void CreateStyles()
        {
            if (buttonStyle == null)
            {
                buttonStyle = new GUIStyle("Button");
            }

            if (labelStyleButton == null)
            {
                labelStyleButton = new GUIStyle("Label") { alignment = TextAnchor.MiddleCenter };
            }

            if (labelStyleDropdownOptions == null)
            {
                labelStyleDropdownOptions = new GUIStyle("ToolbarButton")
                {
                    alignment = TextAnchor.MiddleLeft,
                    padding = new RectOffset(20, 0, 0, 0)
                };
            }

            if (titleStyle == null)
            {
                titleStyle = new GUIStyle("Label") { alignment = TextAnchor.MiddleCenter, fontSize = 20 };
            }
        }

        private void ResetToggle()
        {
            if (Event.current.rawType == EventType.MouseUp)
            {
                if (toggleOnScript)
                {
                    splitDropdownScriptGraph.Reset();

                    Repaint();
                }

                if (toggleOnState)
                {
                    splitDropdownStateGraph.Reset();

                    Repaint();
                }
            }
        }

        private void OpenGraphFromPicker()
        {
            if (Event.current.commandName == "ObjectSelectorUpdated")
            {
                UnityObject selectedObject = EditorGUIUtility.GetObjectPickerObject();

                OpenGraphAsset(selectedObject, false);
            }
        }

        private void OnGUI()
        {
            CreateStyles();

            ResetToggle();

            DropAreaGUI();

            OpenGraphFromPicker();

            scrollPosition = GUI.BeginScrollView(new Rect(0, 0, position.width, position.height), scrollPosition,
                scrollArea);
            GUILayout.BeginVertical(GUILayout.ExpandHeight(true));

            Vector2 groupSize = new Vector2(scrollArea.width, 280);

            GUI.BeginGroup(new Rect((position.width / 2) - (groupSize.x / 2), (position.height / 2) - (groupSize.y / 2),
                groupSize.x, groupSize.y));

            GUI.Label(new Rect(0, 0, groupSize.x, titleHeight), "Drag and drop a Visual Scripting Graph asset here\nor",
                titleStyle);

            int buttonX = 10;

            if (GUI.Button(new Rect(buttonX, titleHeight, buttonWidth, buttonHeight), "Browse to open a Graph"))
            {
                OpenGraph();
            }

            buttonX += (buttonWidth + 10);

            Rect area = new Rect(buttonX, titleHeight, buttonWidth, buttonHeight);

            splitDropdownScriptGraph.GetOption(0).interactable = Selection.activeGameObject != null;

            if (splitDropdownScriptGraph.Draw(area, "Create new Script Graph", ref toggleOnScript))
            {
                CreateScriptGraph();
            }

            if (toggleOnScript)
            {
                toggleOnState = false;
            }

            buttonX += (buttonWidth + 10);

            area = new Rect(buttonX, titleHeight, buttonWidth, buttonHeight);

            splitDropdownStateGraph.GetOption(0).interactable = Selection.activeGameObject != null;

            if (splitDropdownStateGraph.Draw(area, "Create new State Graph", ref toggleOnState))
            {
                CreateStateGraph();
            }

            if (toggleOnState)
            {
                toggleOnScript = false;
            }

            GUI.EndGroup();
            GUILayout.EndVertical();
            GUI.EndScrollView();

            if (shouldCloseWindow)
            {
                Close();
            }
        }

        private void DropAreaGUI()
        {
            Event currentEvent = Event.current;

            Rect activeArea = GUILayoutUtility.GetRect(0, 0, GUILayout.ExpandWidth(true), GUILayout.ExpandHeight(true));

            switch (currentEvent.type)
            {
                case EventType.DragUpdated:
                case EventType.DragPerform:
                    if (!activeArea.Contains(currentEvent.mousePosition))
                    {
                        return;
                    }

                    DragAndDrop.visualMode = DragAndDropVisualMode.Copy;

                    if (currentEvent.type == EventType.DragPerform)
                    {
                        DragAndDrop.AcceptDrag();

                        foreach (UnityObject draggedObject in DragAndDrop.objectReferences)
                        {
                            ScriptGraphAsset scriptGraphAsset = draggedObject as ScriptGraphAsset;

                            if (scriptGraphAsset != null)
                            {
                                shouldCloseWindow = true;

                                GraphWindow.OpenActive(GraphReference.New(scriptGraphAsset, true));
                                break;
                            }
                        }
                    }

                    break;
            }
        }
    }
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         fileFormatVersion: 2
guid: 52236e1d9300f4f718999db6c872a5d8
TextureImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 11
  mipmaps:
    mipMapMode: 0
    enableMipMap: 0
    sRGBTexture: 1
    linearTexture: 0
    fadeOut: 0
    borderMipMap: 0
    mipMapsPreserveCoverage: 0
    alphaTestReferenceValue: 0.5
    mipMapFadeDistanceStart: 1
    mipMapFadeDistanceEnd: 3
  bumpmap:
    convertToNormalMap: 0
    externalNormalMap: 0
    heightScale: 0.25
    normalMapFilter: 0
  isReadable: 0
  streamingMipmaps: 0
  streamingMipmapsPriority: 0
  vTOnly: 0
  grayScaleToAlpha: 0
  generateCubemap: 6
  cubemapConvolution: 0
  seamlessCubemap: 0
  textureFormat: 1
  maxTextureSize: 2048
  textureSettings:
    serializedVersion: 2
    filterMode: -1
    aniso: -1
    mipBias: -100
    wrapU: -1
    wrapV: -1
    wrapW: -1
  nPOTScale: 0
  lightmap: 0
  compressionQuality: 50
  spriteMode: 0
  spriteExtrude: 1
  spriteMeshType: 1
  alignment: 0
  spritePivot: {x: 0.5, y: 0.5}
  spritePixelsToUnits: 100
  spriteBorder: {x: 0, y: 0, z: 0, w: 0}
  spriteGenerateFallbackPhysicsShape: 1
  alphaUsage: 1
  alphaIsTransparency: 1
  spriteTessellationDetail: -1
  textureType: 0
  textureShape: 1
  singleChannelComponent: 0
  flipbookRows: 1
  flipbookColumns: 1
  maxTextureSizeSet: 0
  compressionQualitySet: 0
  textureFormatSet: 0
  ignorePngGamma: 1
  applyGammaDecoding: 0
  platformSettings:
  - serializedVersion: 3
    buildTarget: DefaultTexturePlatform
    maxTextureSize: 128
    resizeAlgorithm: 0
    textureFormat: -1
    textureCompression: 0
    compressionQuality: 50
    crunchedCompression: 0
    allowsAlphaSplitting: 0
    overridden: 0
    androidETC2FallbackOverride: 0
    forceMaximumCompressionQuality_BC6H_BC7: 0
  - serializedVersion: 3
    buildTarget: Standalone
    maxTextureSize: 128
    resizeAlgorithm: 0
    textureFormat: -1
    textureCompression: 0
    compressionQuality: 50
    crunchedCompression: 0
    allowsAlphaSplitting: 0
    overridden: 0
    androidETC2FallbackOverride: 0
    forceMaximumCompressionQuality_BC6H_BC7: 0
  spriteSheet:
    serializedVersion: 2
    sprites: []
    outline: []
    physicsShape: []
    bones: []
    spriteID: 
    internalID: 0
    vertices: []
    indices: 
    edges: []
    weights: []
    secondaryTextures: []
  spritePackingTag: 
  pSDRemoveMatte: 0
  pSDShowRemoveMatteOption: 0
  userData: 
  assetBundleName: 
  assetBundleVariant: 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           INDX( 	 9+           (   0
           r a i             `    h T     Q    ^Xvv$                       	 A n a l y t i c s . m R    p ^     Q    e/X P9+.9X                       A n a l y t i c s . m e t a   c    h X     Q    W|X]                        D e s c r i p t i o n S    x b     Q    5X P
$5X                       D e s c r i p t i o n . m e t a       j    ` J     Q    $X9a9a]                        F l o w . m e T    h T     Q     X P X                      	 F l o w . m e t a     u    ` L     Q    }+Xll$                        G r a p h . m U    h V     Q    L'X PQNX                      
 G r a p h . m e t a   z    ` N     Q     Xu]                        P l u g i n . V    h X     Q    <X PX                       P l u g i n . m e t a     h V     Q    R/X9a9a?J$                       
 P r o p e r t i e s . W    p `     Q    X P#ZX                       P r o p e r t i e s . m e t a ~    x h     Q    Y ~ >]$      
               S t a t e G r a p h E d i t o r . c s Y     r     Q    X PiX                       S t a t e G  a p h E d i t o r . c s . m e t a       ~     p     Q    !Z ~ w5$                       S t a t e R e v e a l C o n d i t i o n . c s [     z     Q    lX PX                       S t a t e R e v e a l C o n d i t i o n . c s . m e t a           ` N     Q    F1XVV]                        S t a t e s . \    h X     Q    X PX                       S t a t e s . m e t      h X     Q    ?HAXyy]                        T r a n s i t i o n s ]    x b     Q    z/X Pz/X                       T r a n s i t i o n s . m e t a       ^          Q    XX POX                    ) U n i t y . V i s u a l S c r i p t i n g . S t a t e . E d i t o r . a s m d e f     _          Q    X PQX                      . U n i t y . V i s u a l S c r i p t  n g . S t a t e . E d i t o r . a s m d e f . m e t a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      INDX( 	 n=           (   p                             F     p     c    "Y$                       S t a t e G r a p h D e s c r i p t o r . c s e     z     c    X Pq)1X                       S t a t e G r a p h D e s c r i p t o r . c s . m e t a       J     t     c    "Y5$      
               S t a t e M a c h i n e D e s c r i p t o r . c s . m g     ~     c    X P H'X                       S t a t e M a c h i n e D e s c r i p t o r . c s . m e t a   H     p     c     "$                     S t a t e M a c r o D e s c r i p t o r . c s i     z     c    X P'%X                       S t a t e M a c r o D e s c r i p t o r . c s . m e t a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      // Copyright (c) Rotorz Limited. All rights reserved.
// Licensed under the MIT license. See LICENSE file in the project root.

using UnityEditor;
using UnityEngine;

namespace Unity.VisualScripting.ReorderableList.Element_Adder_Menu
{
    internal sealed class GenericElementAdderMenu : IElementAdderMenu
    {
        private GenericMenu _innerMenu = new GenericMenu();

        public bool IsEmpty => _innerMenu.GetItemCount() == 0;

        public void AddItem(GUIContent content, GenericMenu.MenuFunction handler)
        {
            _innerMenu.AddItem(content, false, handler);
        }

        public void AddDisabledItem(GUIContent content)
        {
            _innerMenu.AddDisabledItem(content);
        }

        public void AddSeparator(string path = "")
        {
            _innerMenu.AddSeparator(path);
        }

        public void DropDown(Rect position)
        {
            _innerMenu.DropDown(position);
        }
    }
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       INDX( 	 =           (                                 G          j     "~$                     ! F l o w G r a p h C o n t e x t S t a t e E x t e n s i o n . c s . m l          j    X PB!X                      & F l o w G r a p h C o n t e x t S t a t e E x t e n s i o n . c s . m e t a   N     n     j     "$                       S t a t e U n i t D e s c r i p t o r . c s . n     x     j    G{X PqGX                       S t a t e U n i t D e s c r i p t o r . c s . m e t a M    x f     j    lPd#5$                       S t a t e U n i t E d i t o r . c s . p     p     j    hX PKZoX                       S t a t e U n i t E d i t o r . c s . m e t a R    x f     j    9aPd#T5$                      S t a t e U n i t W i d g e t . c s . r     p    j    X PX                       S t a t e U n i t W i d g e t . c s . m e t a O     v     j    Pd#T$       Z               U n i t B a s e S t a t e E x t e n s i o n s . c s . t          j    X P-X                       U n i t B a s e S t a t e E x t e n s i o n s . c s . m e t a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 using System.Collections;

namespace Unity.VisualScripting
{
    /// <summary>
    /// Merges two or more dictionaries together.
    /// </summary>
    /// <remarks>
    /// If the same key is found more than once, only the value
    /// of the first dictionary with this key will be used.
    /// </remarks>
    [UnitCategory("Collections/Dictionaries")]
    [UnitOrder(5)]
    public sealed class MergeDictionaries : MultiInputUnit<IDictionary>
    {
        /// <summary>
        /// The merged dictionary.
        /// </summary>
        [DoNotSerialize]
        [PortLabelHidden]
        public ValueOutput dictionary { get; private set; }

        protected override void Definition()
        {
            dictionary = ValueOutput(nameof(dictionary), Merge);

            base.Definition();

            foreach (var input in multiInputs)
            {
                Requirement(input, dictionary);
            }
        }

        public IDictionary Merge(Flow flow)
        {
            var dictionary = new AotDictionary();

            for (var i = 0; i < inputCount; i++)
            {
                var inputDictionary = flow.GetValue<IDictionary>(multiInputs[i]);

                var enumerator = inputDictionary.GetEnumerator();

                while (enumerator.MoveNext())
                {
                    if (!dictionary.Contains(enumerator.Key))
                    {
                        dictionary.Add(enumerator.Key, enumerator.Value);
                    }
                }
            }

            return dictionary;
        }
    }
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        using System.Collections;

namespace Unity.VisualScripting
{
    /// <summary>
    /// Sets the value of a dictionary item with the specified key.
    /// </summary>
    [UnitCategory("Collections/Dictionaries")]
    [UnitSurtitle("Dictionary")]
    [UnitShortTitle("Set Item")]
    [UnitOrder(1)]
    [TypeIcon(typeof(IDictionary))]
    public sealed class SetDictionaryItem : Unit
    {
        /// <summary>
        /// The entry point for the node.
        /// </summary>
        [DoNotSerialize]
        [PortLabelHidden]
        public ControlInput enter { get; private set; }

        /// <summary>
        /// The dictionary.
        /// </summary>
        [DoNotSerialize]
        [PortLabelHidden]
        public ValueInput dictionary { get; private set; }

        /// <summary>
        /// The key of the item to set.
        /// </summary>
        [DoNotSerialize]
        public ValueInput key { get; private set; }

        /// <summary>
        /// The value to assign to the item.
        /// </summary>
        [DoNotSerialize]
        public ValueInput value { get; private set; }

        /// <summary>
        /// The action to execute once the item has been assigned.
        /// </summary>
        [DoNotSerialize]
        [PortLabelHidden]
        public ControlOutput exit { get; private set; }

        protected override void Definition()
        {
            enter = ControlInput(nameof(enter), Set);
            dictionary = ValueInput<IDictionary>(nameof(dictionary));
            key = ValueInput<object>(nameof(key));
            value = ValueInput<object>(nameof(value));
            exit = ControlOutput(nameof(exit));

            Requirement(dictionary, enter);
            Requirement(key, enter);
            Requirement(value, enter);
            Succession(enter, exit);
        }

        public ControlOutput Set(Flow flow)
        {
            var dictionary = flow.GetValue<IDictionary>(this.dictionary);
            var key = flow.GetValue<object>(this.key);
            var value = flow.GetValue<object>(this.value);

            dictionary[key] = value;

            return exit;
        }
    }
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             using System;
using System.Collections.Generic;
using System.Linq;
using UnityEditor;
using UnityEngine;

namespace Unity.VisualScripting
{
    [Canvas(typeof(StateGraph))]
    public sealed class StateCanvas : VisualScriptingCanvas<StateGraph>
    {
        public StateCanvas(StateGraph graph) : base(graph) { }


        #region View

        protected override bool shouldEdgePan => base.shouldEdgePan || isCreatingTransition;

        #endregion


        #region Drawing

        protected override void DrawBackground()
        {
            base.DrawBackground();

            if (isCreatingTransition)
            {
                var startRect = this.Widget(transitionSource).position;
                var end = mousePosition;

                Edge startEdge, endEdge;

                GraphGUI.GetConnectionEdge
                    (
                        startRect.center,
                        end,
                        out startEdge,
                        out endEdge
                    );

                var start = startRect.GetEdgeCenter(startEdge);

                GraphGUI.DrawConnectionArrow(Color.white, start, end, startEdge, endEdge);
            }
        }

        #endregion


        #region Clipboard

        public override void ShrinkCopyGroup(HashSet<IGraphElement> copyGroup)
        {
            copyGroup.RemoveWhere(element =>
            {
                if (element is IStateTransition)
                {
                    var transition = (IStateTransition)element;

                    if (!copyGroup.Contains(transition.source) ||
                        !copyGroup.Contains(transition.destination))
                    {
                        return true;
                    }
                }

                return false;
            });
        }

        #endregion


        #region Window

        public override void OnToolbarGUI()
        {
            if (graph.states.Any(u => u.GetException(reference) != null) || graph.transitions.Any(t => t.GetException(reference) != null))
            {
                if (GUILayout.Button("Clear Errors", LudiqStyles.toolbarButton))
                {
                    foreach (var state in graph.states)
                    {
                        state.SetException(reference, null);
                    }

                    foreach (var transition in graph.transitions)
                    {
                        transition.SetException(reference, null);
                    }
                }
            }

            EditorGUI.BeginChangeCheck();

            BoltCore.Configuration.dimInactiveNodes = GUILayout.Toggle(BoltCore.Configuration.dimInactiveNodes, "Dim", LudiqStyles.toolbarButton);

            if (EditorGUI.EndChangeCheck())
            {
                BoltCore.Configuration.Save();
            }

            base.OnToolbarGUI();
        }

        #endregion


        #region Context

        protected override void OnContext()
        {
            if (isCreatingTransition)
            {
                CancelTransition();
            }
            else
            {
                base.OnContext();
            }
        }

        protected override IEnumerable<DropdownOption> GetContextOptions()
        {
            yield return new DropdownOption((Action<Vector2>)CreateFlowState, "Create Script State");
            yield return new DropdownOption((Action<Vector2>)CreateSuperState, "Create Super State");
            yield return new DropdownOption((Action<Vector2>)CreateAnyState, "Create Any State");
            yield return new DropdownOption((Action<Vector2>)(NewSticky), "Create Sticky Note");
            foreach (var baseOption in base.GetContextOptions())
            {
                yield return baseOption;
            }
        }

        private void CreateFlowState(Vector2 position)
        {
            var flowState = FlowState.WithEnterUpdateExit();

            if (!graph.states.Any())
            {
                flowState.isStart = true;
                flowState.nest.embed.title = "Start";
            }

            AddState(flowState, position);
        }

        private void CreateSuperState(Vector2 position)
        {
            var superState = SuperState.WithStart();

            if (!graph.states.Any())
            {
                superState.isStart = true;
                superState.nest.embed.title = "Start";
            }

            AddState(superState, position);
        }

        private void CreateAnyState(Vector2 position)
        {
            AddState(new AnyState(), position);
        }

        private void NewSticky(Vector2 position)
        {
            var stickyNote = new StickyNote() { position = new Rect(position, new Vector2(100, 100)) };
            graph.elements.Add(stickyNote);
            selection.Select(stickyNote);
            GUI.changed = true;
        }

        public void AddState(IState state, Vector2 position)
        {
            UndoUtility.RecordEditedObject("Create State");
            state.position = position;
            graph.states.Add(state);
            state.position -= this.Widget(state).position.size / 2;
            state.position = state.position.PixelPerfect();
            this.Widget(state).Reposition();
            selection.Select(state);
            GUI.changed = true;
        }

        #endregion


        #region Lifecycle

        public override void Close()
        {
            base.Close();

            CancelTransition();
        }

        protected override void HandleHighPriorityInput()
        {
            if (isCreatingTransition)
            {
                if (e.IsMouseDrag(MouseButton.Left))
                {
                    // Priority over lasso
                    e.Use();
                }
                else if (e.IsKeyDown(KeyCode.Escape))
                {
                    CancelTransition();
                    e.Use();
                }
                if (e.IsMouseDown(MouseButton.Left) || e.IsMouseUp(MouseButton.Left))
                {
                    CompleteTransitionToNewState();
                    e.Use();
                }
            }

            base.HandleHighPriorityInput();
        }

        public void CompleteTransitionToNewState()
        {
            var startRect = this.Widget(transitionSource).position;
            var end = mousePosition;

            GraphGUI.GetConnectionEdge
                (
                    startRect.center,
                    end,
                    out var startEdge,
                    out var endEdge
                );

            var destination = FlowState.WithEnterUpdateExit();
            graph.states.Add(destination);

            Vector2 offset;

            var size = this.Widget(destination).position.size;

            switch (endEdge)
            {
                case Edge.Left:
                    offset = new Vector2(0, -size.y / 2);
                    break;
                case Edge.Right:
                    offset = new Vector2(-size.x, -size.y / 2);
                    break;
                case Edge.Top:
                    offset = new Vector2(-size.x / 2, 0);
                    break;
                case Edge.Bottom:
                    offset = new Vector2(-size.x / 2, -size.y);
                    break;
                default:
                    throw new UnexpectedEnumValueException<Edge>(endEdge);
            }

            destination.position = mousePosition + offset;

            destination.position = destination.position.PixelPerfect();

            EndTransition(destination);
        }

        #endregion


        #region Drag & Drop

        public override bool AcceptsDragAndDrop()
        {
            return DragAndDropUtility.Is<ScriptGraphAsset>() || DragAndDropUtility.Is<StateGraphAsset>();
        }

        public override void PerformDragAndDrop()
        {
            if (DragAndDropUtility.Is<ScriptGraphAsset>())
            {
                var flowMacro = DragAndDropUtility.Get<ScriptGraphAsset>();
                var flowState = new FlowState(flowMacro);
                AddState(flowState, DragAndDropUtility.position);
            }
            else if (DragAndDropUtility.Is<StateGraphAsset>())
            {
                var asset = DragAndDropUtility.Get<StateGraphAsset>();
                var superState = new SuperState(asset);
                AddState(superState, DragAndDropUtility.position);
            }
        }

        public override void DrawDragAndDropPreview()
        {
            if (DragAndDropUtility.Is<ScriptGraphAsset>())
            {
                GraphGUI.DrawDragAndDropPreviewLabel(DragAndDropUtility.offsetedPosition, DragAndDropUtility.Get<ScriptGraphAsset>().name, typeof(ScriptGraphAsset).Icon());
            }
            else if (DragAndDropUtility.Is<StateGraphAsset>())
            {
                GraphGUI.DrawDragAndDropPreviewLabel(DragAndDropUtility.offsetedPosition, DragAndDropUtility.Get<StateGraphAsset>().name, typeof(StateGraphAsset).Icon());
            }
        }

        #endregion


        #region Transition Creation

        public IState transitionSource { get; set; }

        public bool isCreatingTransition => transitionSource != null;

        public void StartTransition(IState source)
        {
            transitionSource = source;
            window.Focus();
        }

        public void EndTransition(IState destination)
        {
            UndoUtility.RecordEditedObject("Create State Transition");

            var transition = FlowStateTransition.WithDefaultTrigger(transitionSource, destination);
            graph.transitions.Add(transition);
            transitionSource = null;
            this.Widget(transition).BringToFront();
            selection.Select(transition);
            GUI.changed = true;
        }

        public void CancelTransition()
        {
            transitionSource = null;
        }

        #endregion
    }
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      using System.Collections;

namespace Unity.VisualScripting
{
    /// <summary>
    /// Checks whether a dictionary contains the specified key.
    /// </summary>
    [UnitCategory("Collections/Dictionaries")]
    [UnitSurtitle("Dictionary")]
    [UnitShortTitle("Contains Key")]
    [TypeIcon(typeof(IDictionary))]
    public sealed class DictionaryContainsKey : Unit
    {
        /// <summary>
        /// The dictionary.
        /// </summary>
        [DoNotSerialize]
        [PortLabelHidden]
        public ValueInput dictionary { get; private set; }

        /// <summary>
        /// The key.
        /// </summary>
        [DoNotSerialize]
        [PortLabelHidden]
        public ValueInput key { get; private set; }

        /// <summary>
        /// Whether the list contains the item.
        /// </summary>
        [DoNotSerialize]
        [PortLabelHidden]
        public ValueOutput contains { get; private set; }

        protected override void Definition()
        {
            dictionary = ValueInput<IDictionary>(nameof(dictionary));
            key = ValueInput<object>(nameof(key));
            contains = ValueOutput(nameof(contains), Contains);

            Requirement(dictionary, contains);
            Requirement(key, contains);
        }

        private bool Contains(Flow flow)
        {
            var dictionary = flow.GetValue<IDictionary>(this.dictionary);
            var key = flow.GetValue<object>(this.key);

            return dictionary.Contains(key);
        }
    }
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      using System.Collections;

namespace Unity.VisualScripting
{
    /// <summary>
    /// Removes a dictionary item with a specified key.
    /// </summary>
    [UnitCategory("Collections/Dictionaries")]
    [UnitSurtitle("Dictionary")]
    [UnitShortTitle("Remove Item")]
    [UnitOrder(3)]
    public sealed class RemoveDictionaryItem : Unit
    {
        /// <summary>
        /// The entry point for the node.
        /// </summary>
        [DoNotSerialize]
        [PortLabelHidden]
        public ControlInput enter { get; private set; }

        /// <summary>
        /// The dictionary.
        /// </summary>
        [DoNotSerialize]
        [PortLabel("Dictionary")]
        [PortLabelHidden]
        public ValueInput dictionaryInput { get; private set; }

        /// <summary>
        /// The dictionary without the removed item.
        /// Note that the input dictionary is modified directly and then returned.
        /// </summary>
        [DoNotSerialize]
        [PortLabel("Dictionary")]
        [PortLabelHidden]
        public ValueOutput dictionaryOutput { get; private set; }

        /// <summary>
        /// The key of the item to remove.
        /// </summary>
        [DoNotSerialize]
        public ValueInput key { get; private set; }

        /// <summary>
        /// The action to execute once the item has been removed.
        /// </summary>
        [DoNotSerialize]
        [PortLabelHidden]
        public ControlOutput exit { get; private set; }

        protected override void Definition()
        {
            enter = ControlInput(nameof(enter), Remove);
            dictionaryInput = ValueInput<IDictionary>(nameof(dictionaryInput));
            dictionaryOutput = ValueOutput<IDictionary>(nameof(dictionaryOutput));
            key = ValueInput<object>(nameof(key));
            exit = ControlOutput(nameof(exit));

            Requirement(dictionaryInput, enter);
            Requirement(key, enter);
            Assignment(enter, dictionaryOutput);
            Succession(enter, exit);
        }

        public ControlOutput Remove(Flow flow)
        {
            var dictionary = flow.GetValue<IDictionary>(dictionaryInput);
            var key = flow.GetValue<object>(this.key);

            flow.SetValue(dictionaryOutput, dictionary);

            dictionary.Remove(key);

            return exit;
        }
    }
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  INDX( 	 =           (              a                 Q    p Z     z    j'$T5$                      B o l t S t a t e . c s . m e |    x d     z     X PH? X                       B o l t S t a t e . c s . m e t a     P     t     z    $T5$                      B o l t S t a t e C o n f i g u r a t i o n . c s . m ~     ~     z    W!X PB!X                      B o l t S t a t e C o n f i g u r a t i o n . c s . m e t a   W     j     z    $T$                     B o l t S t a t e M a n i f e s t . c s . m e      t     z    77"X P	77"X                       B o l t S t a t e M a n i f e s t . c s . m e t a     T     l     z    x$T$                      B o l t S t a t e R e s o u r c e s . c s . m      v     z    "X P"X                        B o l t S t a t e R e s o u r c e s . c s . m e t a       h V     z    $X`]                       
 C h a n g e l o g s .     p `     z    &X#X P&X#X                       C h a n g e l o g s . m e t a     h V     z    TV-X^^9]                       
 M i g r a t i o n s .     p `     z    W#X Pz#XX       X                M i g r a t i o n s . m e t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           // Copyright (c) Rotorz Limited. All rights reserved.
// Licensed under the MIT license. See LICENSE file in the project root.

using System;

namespace Unity.VisualScripting.ReorderableList.Element_Adder_Menu
{
    /// <summary>
    /// Interface for building an <see cref="IElementAdderMenu" />.
    /// </summary>
    /// <typeparam name="TContext">Type of the context object that elements can be added to.</typeparam>
    public interface IElementAdderMenuBuilder<TContext>
    {
        /// <summary>
        /// Sets contract type of the elements that can be included in the <see cref="IElementAdderMenu" />.
        /// Only non-abstract class types that are assignable from the <paramref name="contractType" />
        /// will be included in the built menu.
        /// </summary>
        /// <param name="contractType">Contract type of addable elements.</param>
        void SetContractType(Type contractType);

        /// <summary>
        /// Set the <see cref="IElementAdder{TContext}" /> implementation which is used
        /// when adding new elements to the context object.
        /// </summary>
        /// <remarks>
        ///     <para>
        ///     Specify a value of <c>null</c> for <paramref name="elementAdder" /> to
        ///     prevent the selection of any types.
        ///     </para>
        /// </remarks>
        /// <param name="elementAdder">Element adder.</param>
        void SetElementAdder(IElementAdder<TContext> elementAdder);

        /// <summary>
        /// Set the function that formats the display of type names in the user interface.
        /// </summary>
        /// <remarks>
        ///     <para>
        ///     Specify a value of <c>null</c> for <paramref name="formatter" /> to
        ///     assume the default formatting function.
        ///     </para>
        /// </remarks>
        /// <param name="formatter">Function that formats display name of type; or <c>null</c>.</param>
        void SetTypeDisplayNameFormatter(Func<Type, string> formatter);

        /// <summary>
        /// Adds a filter function which determines whether types can be included or
        /// whether they need to be excluded.
        /// </summary>
        /// <remarks>
        ///     <para>
        ///     If a filter function returns a value of <c>false</c> then that type
        ///     will not be included in the menu interface.
        ///     </para>
        /// </remarks>
        /// <param name="typeFilter">Filter function.</param>
        /// <exception cref="System.ArgumentNullException">
        /// If <paramref name="typeFilter" /> is <c>null</c>.
        /// </exception>
        void AddTypeFilter(Func<Type, bool> typeFilter);

        /// <summary>
        /// Adds a custom command to the menu.
        /// </summary>
        /// <param name="command">The custom command.</param>
        /// <exception cref="System.ArgumentNullException">
        /// If <paramref name="command" /> is <c>null</c>.
        /// </exception>
        void AddCustomCommand(IElementAdderMenuCommand<TContext> command);

        /// <summary>
        /// Builds and returns a new <see cref="IElementAdderMenu" /> instance.
        /// </summary>
        /// <returns>
        /// A new <see cref="IElementAdderMenu" /> instance each time the method is invoked.
        /// </returns>
        IElementAdderMenu GetMenu();
    }
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         INDX( 	 nQ           (              l 3 a               D    x f         `DJ&M
]$                      C h a n g e l o g _ 1 _ 0 _ 0 . c s .      p         [$X P>e$X                       C h a n g e l o g _ 1 _ 0 _ 0 . c s . m e t a L    x f         J&*
5$                      C h a n g e l o g _ 1 _ 0 _ 1 . c s .      p         e%X PMg%X                      C h a n g e l o g _ 1 _ 0 _ 1 . c s . m e t a F    x f         `DJ&M
$P      I               C h a n g e l o g _ 1 _ 0 _ 2 . c s .      p         P%&X Pm[&X                       C h a n g e l o g _ 1 _ 0 _ 2 . c s . m e t a H    x f         `D&M
$                      C h a n g e l o g _ 1 _ 1 _ 1 . c s .      p         &X PUO'X                       C h a n g e  o g _ 1 _ 1 _ 1 . c s . m e t a J    x f         `D&M
]$(      %               C h a n g e l o g _ 1 _ 1 _ 2 . c s .      p         'X PYe'X                       C h a n g e l o g _ 1 _ 1 _ 2 . c s . m e t a N    x f         &*
5$                      C h a n g e l o g _ 1 _ 1 _ 3 . c s .      p         s(X P,7s(X                       C h a n g e l o g _ 1 _ 1 _  . c s . m e t a P    x f         '*
$h      f               C h a n g e l o g _ 1 _ 2 _ 2 . c s .      p         <)X P<)X                       C h a n g e l o g _ 1 _ 2 _ 2 . c s . m e t a R    x f         `m(*
$                     C h a n g e l o g _ 1 _ 2 _ 3 . c s .      p         )X P*X                       C h a n g e l o g _ 1 _ 2 _ 3 . c s . m e t  T    x f         <:`m(*
]$@      =               C h a n g e l o g _ 1 _ 2 _ 4 . c s .      p         b*X Pm*X                       C h a n g e l o g _ 1 _ 2 _ 4 . c s . m e t a V    x f         <:`m(*
5$(      &               C h a n g e l o g _ 1 _ 3 _ 0 . c s .      p         n+X P+X                       C h a n g e l o g _ 1 _ 3 _ 0 . c s . m e t a Z    x f        `m(*
$       M               C h a n g e l o g _ 1 _ 4 _ 0 . c s .      p         1,X PfO,X                       C h a n g e l o g _ 1 _ 4 _ 0 . c s . m e t a X    x f         `m(*
$                      C h a n g e l o g _ 1 _ 4 _ 1 . c s .      p         b,X P7*V-X                       C h a n g e l o g _ 1 _ 4 _ 1 . c s . m e t a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            INDX( 	 Q           (                                \     x         	)*
]$       (               M i g r a t i o n _ 1 _ 5 _ 1 _ t o _ 1 _ 5 _ 2 . c s               -X Pv.X                        M i g r a t i o n _ 1 _ 5 _ 1 _ t o _ 1 _ 5 _ 2 . c s . m e t a       ^     p         		)*
5$       =               M i g r a t i o n _ 1 _ 6 _ t o _ 1 _ 7 . c s      z         .X  P.XX       X                M i g r a t i o n _ 1 _ 6 _ t o _ 1 _ 7 . c s . m e t a       `     |         ^)*
5$       
               M i g r a t i o n _ A s s e t _ t o _ P a c k a g e . c s . m               w/X PS'/XX       X               " M i g r a t i o n _ A s s e t _ t o _ P a c k a g e . c s . m e t a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  // Copyright (c) Rotorz Limited. All rights reserved.
// Licensed under the MIT license. See LICENSE file in the project root.

using UnityEngine;

namespace Unity.VisualScripting.ReorderableList.Element_Adder_Menu
{
    /// <summary>
    /// Interface for a menu command that can be included in an <see cref="IElementAdderMenu" />
    /// either by annotating an implementation of the <see cref="IElementAdderMenuCommand{TContext}" />
    /// interface with <see cref="ElementAdderMenuCommandAttribute" /> or directly by
    /// calling <see cref="IElementAdderMenuBuilder{TContext}.AddCustomCommand" />.
    /// </summary>
    /// <typeparam name="TContext">Type of the context object that elements can be added to.</typeparam>
    public interface IElementAdderMenuCommand<TContext>
    {
        /// <summary>
        /// Gets the content of the menu command.
        /// </summary>
        GUIContent Content { get; }

        /// <summary>
        /// Determines whether the command can be executed.
        /// </summary>
        /// <param name="elementAdder">
        /// The associated element adder provides access to
        /// the <typeparamref name="TContext" /> instance.
        /// </param>
        /// <returns>
        /// A value of <c>true</c> if the command can execute; otherwise, <c>false</c>.
        /// </returns>
        bool CanExecute(IElementAdder<TContext> elementAdder);

        /// <summary>
        /// Executes the command.
        /// </summary>
        /// <param name="elementAdder">
        /// The associated element adder provides access to
        /// the <typeparamref name="TContext" /> instance.
        /// </param>
        void Execute(IElementAdder<TContext> elementAdder);
    }
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           INDX( 	 =           (                t             X     l         @*T5$                       A n y S t a t e D e s c r i p t o r . c s . m      v         1X P1X                       A n y S t a t e D e s c r i p t o r . c s . m e t a   U    x d         x@*T$                     A n y S t a t e W i d g e t . c s . m      n         c2X Pg2X                      A n y S t a t e W i d g e t . c s . m e t a   V     n         S+Tp$                       F l o w S t a t e D e s c r i p t o r . c s .      x         :3X P7f:3X                       F l o w S t a t e D e s c r i p t o r . c s . m e t a Z    x f         S+T5$                       F l o w S t a t e E d i t o r . c s .      p         J3X PMh4X                      F l o w S t a t e E d i t o r . c s . m e t a     x f         7Q4X P.y4X                       F l o w S t a t e W i d g e t . c s        p         4X Pa4X                       F l o w S t a t e W i d g e t . c s . m e t a Y    p `         W,T5$                       I S t a t e W i d g e t . c s      j         m5X P=m5X                       I S  a t e W i d g e t . c s . m e t a       [     n         ,T$       c               N e s t e r S t a t e A n a l y s e r . c s .      x         N#6X PEJ6X                       N e s t e r S t a t e A n a l y s e r . c s . m e t a \     r         ,Tp$H      H               N e s t e r S t a t e D e s c r i p t o r . c s                         	6X P	6X                      N e s t e r S t a t e D e s c r i p t o r . c s . m e t a          j         F7X P,m7X                      N e s t e r S t a t e E d i t o r . c s            t         H7X PH7X                       N e s t e r S t a t e E d i t o r . c s . m e t a          j         28X P,28X                      N e s t e r S t a t e W i d g e t . c s            t         KQ8X PV Qx8X                       N e s t e r S t a t e W i d g e t . c s . m e t a         x b         98X P,98X                      S t a t e A n a l y s e r . c s            l         9X P(9X                       S t a t e A n a l y s e r . c s . m e t a         x b         v9X P,9X                       S t a t e A n a l y s i s . c s            l         :X PP:X                        S t a t e A n a l y s i s . c s . m e t a         x h         v:X P,v:Xx       s                S t a t e D e s c r i p t i o n . c s      r         J;X P r;X                       S t a t e D e s c r i p t i o n . c s . m e t a           x f         u;X P,m;X                      S t a t e D e s c r i p t o r . c s        p         w<X Ps<<X                      S t a t e D e s c r i p t o r . c s . m e t a     p ^         i<X P,i<Xh      d               S t a t e E d i t o r . c s       x h         F<X PF<X                       S t a t e E d i t o r . c s . m e t a      v         q`=X P,v=X                       S t a t e T r a n s i t i o n A n a l y s i s . c s                                                                                using System;
using System.Collections.Generic;
using System.Linq;
using UnityEditor;
using UnityEngine;

namespace Unity.VisualScripting
{
    [Widget(typeof(FlowState))]
    public sealed class FlowStateWidget : NesterStateWidget<FlowState>, IDragAndDropHandler
    {
        public FlowStateWidget(StateCanvas canvas, FlowState state) : base(canvas, state)
        {
            state.nest.beforeGraphChange += BeforeGraphChange;
            state.nest.afterGraphChange += AfterGraphChange;

            if (state.nest.graph != null)
            {
                state.nest.graph.elements.CollectionChanged += CacheEventLinesOnUnityThread;
            }
        }

        public override void Dispose()
        {
            base.Dispose();

            state.nest.beforeGraphChange -= BeforeGraphChange;
            state.nest.afterGraphChange -= AfterGraphChange;
        }

        private void BeforeGraphChange()
        {
            if (state.nest.graph != null)
            {
                state.nest.graph.elements.CollectionChanged -= CacheEventLinesOnUnityThread;
            }
        }

        private void AfterGraphChange()
        {
            CacheEventLinesOnUnityThread();

            if (state.nest.graph != null)
            {
                state.nest.graph.elements.CollectionChanged += CacheEventLinesOnUnityThread;
            }
        }

        #region Model

        private List<EventLine> eventLines { get; } = new List<EventLine>();

        private void CacheEventLinesOnUnityThread()
        {
            UnityAPI.Async(CacheEventLines);
        }

        private void CacheEventLines()
        {
            eventLines.Clear();

            if (state.nest.graph != null)
            {
                eventLines.AddRange(state.nest.graph.units
                    .OfType<IEventUnit>()
                    .Select(e => e.GetType())
                    .Distinct()
                    .Select(eventType => new EventLine(eventType))
                    .OrderBy(eventLine => eventLine.content.text));
            }

            Reposition();
        }

        protected override void CacheItemFirstTime()
        {
            base.CacheItemFirstTime();

            CacheEventLines();
        }

        #endregion


        #region Positioning

        public Dictionary<EventLine, Rect> eventLinesPositions { get; } = new Dictionary<EventLine, Rect>();

        public override void CachePosition()
        {
            base.CachePosition();

            eventLinesPositions.Clear();

            var y = contentInnerPosition.y;

            foreach (var eventLine in eventLines)
            {
                var eventLinePosition = new Rect
                    (
                    contentInnerPosition.x,
                    y,
                    contentInnerPosition.width,
                    eventLine.GetHeight(contentInnerPosition.width)
                    );

                eventLinesPositions.Add(eventLine, eventLinePosition);

                y += eventLinePosition.height;
            }
        }

        protected override float GetContentHeight(float width)
        {
            var eventLinesHeight = 0f;

            foreach (var eventLine in eventLines)
            {
                eventLinesHeight += eventLine.GetHeight(width);
            }

            return eventLinesHeight;
        }

        #endregion


        #region Drawing

        protected override bool showContent => eventLines.Count > 0;

        protected override void DrawContent()
        {
            foreach (var eventLine in eventLines)
            {
                eventLine.Draw(eventLinesPositions[eventLine]);
            }
        }

        #endregion


        #region Drag & Drop

        public DragAndDropVisualMode dragAndDropVisualMode => DragAndDropVisualMode.Generic;

        public bool AcceptsDragAndDrop()
        {
            return DragAndDropUtility.Is<ScriptGraphAsset>();
        }

        public void PerformDragAndDrop()
        {
            UndoUtility.RecordEditedObject("Drag & Drop Macro");
            state.nest.source = GraphSource.Macro;
            state.nest.macro = DragAndDropUtility.Get<ScriptGraphAsset>();
            state.nest.embed = null;
            GUI.changed = true;
        }

        public void UpdateDragAndDrop() { }

        public void DrawDragAndDropPreview()
        {
            GraphGUI.DrawDragAndDropPreviewLabel(new Vector2(edgePosition.x, outerPosition.yMax), "Replace with: " + DragAndDropUtility.Get<ScriptGraphAsset>().name, typeof(ScriptGraphAsset).Icon());
        }

        public void ExitDragAndDrop() { }

        #endregion


        public new static class Styles
        {
            static Styles()
            {
                eventLine = new GUIStyle(EditorStyles.label);
                eventLine.wordWrap = true;
                eventLine.imagePosition = ImagePosition.TextOnly; // The icon is drawn manually
                eventLine.padding = new RectOffset(0, 0, 3, 3);
            }

            public static readonly GUIStyle eventLine;

            public static readonly float spaceAroundLineIcon = 5;
        }

        public class EventLine
        {
            public EventLine(Type eventType)
            {
                content = new GUIContent(BoltFlowNameUtility.UnitTitle(eventType, false, true), eventType.Icon()?[IconSize.Small]);
            }

            public GUIContent content { get; }

            public float GetHeight(float width)
            {
                var labelWidth = width - Styles.spaceAroundLineIcon - IconSize.Small - Styles.spaceAroundLineIcon;

                return Styles.eventLine.CalcHeight(content, labelWidth);
            }

            public void Draw(Rect position)
            {
                var iconPosition = new Rect
                    (
                    position.x + Styles.spaceAroundLineIcon,
                    position.y + Styles.eventLine.padding.top - 1,
                    IconSize.Small,
                    IconSize.Small
                    );

                var labelPosition = new Rect
                    (
                    iconPosition.xMax + Styles.spaceAroundLineIcon,
                    position.y,
                    position.width - Styles.spaceAroundLineIcon - iconPosition.width - Styles.spaceAroundLineIcon,
                    position.height
                    );

                if (content.image != null)
                {
                    GUI.DrawTexture(iconPosition, content.image);
                }

                GUI.Label(labelPosition, content, Styles.eventLine);
            }
        }
    }
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          %YAML 1.1
%TAG !u! tag:unity3d.com,2011:
--- !u!91 &9100000
AnimatorController:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_Name: LifeUI
  serializedVersion: 5
  m_AnimatorParameters:
  - m_Name: Recover
    m_Type: 9
    m_DefaultFloat: 0
    m_DefaultInt: 0
    m_DefaultBool: 0
    m_Controller: {fileID: 0}
  - m_Name: Remove
    m_Type: 9
    m_DefaultFloat: 0
    m_DefaultInt: 0
    m_DefaultBool: 0
    m_Controller: {fileID: 0}
  m_AnimatorLayers:
  - serializedVersion: 5
    m_Name: Base Layer
    m_StateMachine: {fileID: 1107727774132612696}
    m_Mask: {fileID: 0}
    m_Motions: []
    m_Behaviours: []
    m_BlendingMode: 0
    m_SyncedLayerIndex: -1
    m_DefaultWeight: 0
    m_IKPass: 0
    m_SyncedLayerAffectsTiming: 0
    m_Controller: {fileID: 9100000}
--- !u!114 &114920089147166270
MonoBehaviour:
  m_ObjectHideFlags: 1
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 0}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 11500000, guid: f7d5bbcfccd21a24a95cf046c5166dc3, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
--- !u!114 &114980154885568056
MonoBehaviour:
  m_ObjectHideFlags: 1
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 0}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 11500000, guid: f7d5bbcfccd21a24a95cf046c5166dc3, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
--- !u!1101 &1101270998068686586
AnimatorStateTransition:
  m_ObjectHideFlags: 1
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_Name: 
  m_Conditions:
  - m_ConditionMode: 1
    m_ConditionEvent: Remove
    m_EventTreshold: 0
  m_DstStateMachine: {fileID: 0}
  m_DstState: {fileID: 1102653121394499118}
  m_Solo: 0
  m_Mute: 0
  m_IsExit: 0
  serializedVersion: 3
  m_TransitionDuration: 0
  m_TransitionOffset: 0
  m_ExitTime: 0
  m_HasExitTime: 0
  m_HasFixedDuration: 0
  m_InterruptionSource: 0
  m_OrderedInterruption: 1
  m_CanTransitionToSelf: 1
--- !u!1101 &1101387968803871028
AnimatorStateTransition:
  m_ObjectHideFlags: 1
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_Name: 
  m_Conditions:
  - m_ConditionMode: 1
    m_ConditionEvent: Recover
    m_EventTreshold: 0
  m_DstStateMachine: {fileID: 0}
  m_DstState: {fileID: 1102491497117534312}
  m_Solo: 0
  m_Mute: 0
  m_IsExit: 0
  serializedVersion: 3
  m_TransitionDuration: 0
  m_TransitionOffset: 0
  m_ExitTime: 0
  m_HasExitTime: 0
  m_HasFixedDuration: 0
  m_InterruptionSource: 0
  m_OrderedInterruption: 1
  m_CanTransitionToSelf: 1
--- !u!1101 &1101624081044789072
AnimatorStateTransition:
  m_ObjectHideFlags: 1
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_Name: 
  m_Conditions: []
  m_DstStateMachine: {fileID: 0}
  m_DstState: {fileID: 1102224253054077610}
  m_Solo: 0
  m_Mute: 0
  m_IsExit: 0
  serializedVersion: 3
  m_TransitionDuration: 0
  m_TransitionOffset: 0
  m_ExitTime: 1
  m_HasExitTime: 1
  m_HasFixedDuration: 1
  m_InterruptionSource: 0
  m_OrderedInterruption: 1
  m_CanTransitionToSelf: 1
--- !u!1101 &1101678955445188244
AnimatorStateTransition:
  m_ObjectHideFlags: 1
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_Name: 
  m_Conditions: []
  m_DstStateMachine: {fileID: 0}
  m_DstState: {fileID: 1102224253054077610}
  m_Solo: 0
  m_Mute: 0
  m_IsExit: 0
  serializedVersion: 3
  m_TransitionDuration: 0
  m_TransitionOffset: 0
  m_ExitTime: 1
  m_HasExitTime: 1
  m_HasFixedDuration: 0
  m_InterruptionSource: 0
  m_OrderedInterruption: 1
  m_CanTransitionToSelf: 1
--- !u!1102 &1102224253054077610
AnimatorState:
  serializedVersion: 5
  m_ObjectHideFlags: 1
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_Name: BlankState
  m_Speed: 1
  m_CycleOffset: 0
  m_Transitions:
  - {fileID: 1101270998068686586}
  - {fileID: 1101387968803871028}
  m_StateMachineBehaviours: []
  m_Position: {x: 50, y: 50, z: 0}
  m_IKOnFeet: 0
  m_WriteDefaultValues: 1
  m_Mirror: 0
  m_SpeedParameterActive: 0
  m_MirrorParameterActive: 0
  m_CycleOffsetParameterActive: 0
  m_TimeParameterActive: 0
  m_Motion: {fileID: 0}
  m_Tag: 
  m_SpeedParameter: 
  m_MirrorParameter: 
  m_CycleOffsetParameter: 
  m_TimeParameter: 
--- !u!1102 &1102491497117534312
AnimatorState:
  serializedVersion: 5
  m_ObjectHideFlags: 1
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_Name: RecoverLife
  m_Speed: 1
  m_CycleOffset: 0
  m_Transitions:
  - {fileID: 1101678955445188244}
  m_StateMachineBehaviours:
  - {fileID: 114980154885568056}
  m_Position: {x: 50, y: 50, z: 0}
  m_IKOnFeet: 0
  m_WriteDefaultValues: 1
  m_Mirror: 0
  m_SpeedParameterActive: 0
  m_MirrorParameterActive: 0
  m_CycleOffsetParameterActive: 0
  m_TimeParameterActive: 0
  m_Motion: {fileID: 7400000, guid: 49f2ca81c5c51304f86dcb6cb54cb18f, type: 2}
  m_Tag: 
  m_SpeedParameter: 
  m_MirrorParameter: 
  m_CycleOffsetParameter: 
  m_TimeParameter: 
--- !u!1102 &1102653121394499118
AnimatorState:
  serializedVersion: 5
  m_ObjectHideFlags: 1
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_Name: RemoveLife
  m_Speed: 1
  m_CycleOffset: 0
  m_Transitions:
  - {fileID: 1101624081044789072}
  m_StateMachineBehaviours:
  - {fileID: 114920089147166270}
  m_Position: {x: 50, y: 50, z: 0}
  m_IKOnFeet: 0
  m_WriteDefaultValues: 1
  m_Mirror: 0
  m_SpeedParameterActive: 0
  m_MirrorParameterActive: 0
  m_CycleOffsetParameterActive: 0
  m_TimeParameterActive: 0
  m_Motion: {fileID: 7400000, guid: d3499261017bbd4478153f45a9696ecf, type: 2}
  m_Tag: 
  m_SpeedParameter: 
  m_MirrorParameter: 
  m_CycleOffsetParameter: 
  m_TimeParameter: 
--- !u!1107 &1107618804857518794
AnimatorStateMachine:
  serializedVersion: 5
  m_ObjectHideFlags: 1
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_Name: New Layer
  m_ChildStates: []
  m_ChildStateMachines: []
  m_AnyStateTransitions: []
  m_EntryTransitions: []
  m_StateMachineTransitions: {}
  m_StateMachineBehaviours: []
  m_AnyStatePosition: {x: 50, y: 20, z: 0}
  m_EntryPosition: {x: 50, y: 120, z: 0}
  m_ExitPosition: {x: 800, y: 120, z: 0}
  m_ParentStateMachinePosition: {x: 800, y: 20, z: 0}
  m_DefaultState: {fileID: 0}
--- !u!1107 &1107727774132612696
AnimatorStateMachine:
  serializedVersion: 5
  m_ObjectHideFlags: 1
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_Name: Base Layer
  m_ChildStates:
  - serializedVersion: 1
    m_State: {fileID: 1102653121394499118}
    m_Position: {x: 408, y: 12, z: 0}
  - serializedVersion: 1
    m_State: {fileID: 1102491497117534312}
    m_Position: {x: 408, y: 132, z: 0}
  - serializedVersion: 1
    m_State: {fileID: 1102224253054077610}
    m_Position: {x: 204, y: 72, z: 0}
  m_ChildStateMachines: []
  m_AnyStateTransitions: []
  m_EntryTransitions: []
  m_StateMachineTransitions: {}
  m_StateMachineBehaviours: []
  m_AnyStatePosition: {x: 50, y: 20, z: 0}
  m_EntryPosition: {x: 36, y: 72, z: 0}
  m_ExitPosition: {x: 800, y: 120, z: 0}
  m_ParentStateMachinePosition: {x: 800, y: 20, z: 0}
  m_DefaultState: {fileID: 1102224253054077610}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         %YAML 1.1
%TAG !u! tag:unity3d.com,2011:
--- !u!74 &7400000
AnimationClip:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_Name: RemoveLife
  serializedVersion: 6
  m_Legacy: 0
  m_Compressed: 0
  m_UseHighQualityCurve: 1
  m_RotationCurves: []
  m_CompressedRotationCurves: []
  m_EulerCurves: []
  m_PositionCurves: []
  m_ScaleCurves:
  - curve:
      serializedVersion: 2
      m_Curve:
      - serializedVersion: 2
        time: 0
        value: {x: 1, y: 1, z: 1}
        inSlope: {x: 0, y: 0, z: 0}
        outSlope: {x: 0, y: 0, z: 0}
        tangentMode: 0
      - serializedVersion: 2
        time: 0.06666667
        value: {x: 0.5, y: 0.5, z: 0.5}
        inSlope: {x: 0, y: 0, z: 0}
        outSlope: {x: 0, y: 0, z: 0}
        tangentMode: 0
      - serializedVersion: 2
        time: 0.13333334
        value: {x: 1.1, y: 1.1, z: 1.1}
        inSlope: {x: 0, y: 0, z: 0}
        outSlope: {x: 0, y: 0, z: 0}
        tangentMode: 0
      m_PreInfinity: 2
      m_PostInfinity: 2
      m_RotationOrder: 4
    path: 
  m_FloatCurves:
  - curve:
      serializedVersion: 2
      m_Curve:
      - serializedVersion: 2
        time: 0
        value: 1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      - serializedVersion: 2
        time: 0.13333334
        value: 1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      m_PreInfinity: 2
      m_PostInfinity: 2
      m_RotationOrder: 4
    attribute: m_Color.r
    path: 
    classID: 114
    script: {fileID: -765806418, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
  - curve:
      serializedVersion: 2
      m_Curve:
      - serializedVersion: 2
        time: 0
        value: 1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      - serializedVersion: 2
        time: 0.13333334
        value: 1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      m_PreInfinity: 2
      m_PostInfinity: 2
      m_RotationOrder: 4
    attribute: m_Color.g
    path: 
    classID: 114
    script: {fileID: -765806418, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
  - curve:
      serializedVersion: 2
      m_Curve:
      - serializedVersion: 2
        time: 0
        value: 1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      - serializedVersion: 2
        time: 0.13333334
        value: 1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      m_PreInfinity: 2
      m_PostInfinity: 2
      m_RotationOrder: 4
    attribute: m_Color.b
    path: 
    classID: 114
    script: {fileID: -765806418, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
  - curve:
      serializedVersion: 2
      m_Curve:
      - serializedVersion: 2
        time: 0
        value: 1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      - serializedVersion: 2
        time: 0.06666667
        value: 0
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      - serializedVersion: 2
        time: 0.13333334
        value: 1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      - serializedVersion: 2
        time: 0.31666666
        value: 0.703
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      m_PreInfinity: 2
      m_PostInfinity: 2
      m_RotationOrder: 4
    attribute: m_Color.a
    path: 
    classID: 114
    script: {fileID: -765806418, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
  m_PPtrCurves:
  - curve:
    - time: 0
      value: {fileID: 21300000, guid: cca8ac75dcb982b45b2fb6fa7eeb6a20, type: 3}
    - time: 0.06666667
      value: {fileID: 21300000, guid: e86e8fa234e263d4cbe7493eef3e4419, type: 3}
    attribute: m_Sprite
    path: 
    classID: 114
    script: {fileID: -765806418, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
  m_SampleRate: 60
  m_WrapMode: 0
  m_Bounds:
    m_Center: {x: 0, y: 0, z: 0}
    m_Extent: {x: 0, y: 0, z: 0}
  m_ClipBindingConstant:
    genericBindings:
    - serializedVersion: 2
      path: 0
      attribute: 3
      script: {fileID: 0}
      typeID: 4
      customType: 0
      isPPtrCurve: 0
    - serializedVersion: 2
      path: 0
      attribute: 304273561
      script: {fileID: -765806418, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
      typeID: 114
      customType: 0
      isPPtrCurve: 0
    - serializedVersion: 2
      path: 0
      attribute: 2015549526
      script: {fileID: -765806418, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
      typeID: 114
      customType: 0
      isPPtrCurve: 1
    - serializedVersion: 2
      path: 0
      attribute: 2526845255
      script: {fileID: -765806418, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
      typeID: 114
      customType: 0
      isPPtrCurve: 0
    - serializedVersion: 2
      path: 0
      attribute: 4215373228
      script: {fileID: -765806418, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
      typeID: 114
      customType: 0
      isPPtrCurve: 0
    - serializedVersion: 2
      path: 0
      attribute: 2334886179
      script: {fileID: -765806418, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
      typeID: 114
      customType: 0
      isPPtrCurve: 0
    pptrCurveMapping:
    - {fileID: 21300000, guid: cca8ac75dcb982b45b2fb6fa7eeb6a20, type: 3}
    - {fileID: 21300000, guid: e86e8fa234e263d4cbe7493eef3e4419, type: 3}
  m_AnimationClipSettings:
    serializedVersion: 2
    m_AdditiveReferencePoseClip: {fileID: 0}
    m_AdditiveReferencePoseTime: 0
    m_StartTime: 0
    m_StopTime: 0.31666666
    m_OrientationOffsetY: 0
    m_Level: 0
    m_CycleOffset: 0
    m_HasAdditiveReferencePose: 0
    m_LoopTime: 1
    m_LoopBlend: 0
    m_LoopBlendOrientation: 0
    m_LoopBlendPositionY: 0
    m_LoopBlendPositionXZ: 0
    m_KeepOriginalOrientation: 0
    m_KeepOriginalPositionY: 1
    m_KeepOriginalPositionXZ: 0
    m_HeightFromFeet: 0
    m_Mirror: 0
  m_EditorCurves:
  - curve:
      serializedVersion: 2
      m_Curve:
      - serializedVersion: 2
        time: 0
        value: 1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      - serializedVersion: 2
        time: 0.13333334
        value: 1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      m_PreInfinity: 2
      m_PostInfinity: 2
      m_RotationOrder: 4
    attribute: m_Color.r
    path: 
    classID: 114
    script: {fileID: -765806418, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
  - curve:
      serializedVersion: 2
      m_Curve:
      - serializedVersion: 2
        time: 0
        value: 1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      - serializedVersion: 2
        time: 0.13333334
        value: 1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      m_PreInfinity: 2
      m_PostInfinity: 2
      m_RotationOrder: 4
    attribute: m_Color.g
    path: 
    classID: 114
    script: {fileID: -765806418, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
  - curve:
      serializedVersion: 2
      m_Curve:
      - serializedVersion: 2
        time: 0
        value: 1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      - serializedVersion: 2
        time: 0.13333334
        value: 1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      m_PreInfinity: 2
      m_PostInfinity: 2
      m_RotationOrder: 4
    attribute: m_Color.b
    path: 
    classID: 114
    script: {fileID: -765806418, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
  - curve:
      serializedVersion: 2
      m_Curve:
      - serializedVersion: 2
        time: 0
        value: 1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      - serializedVersion: 2
        time: 0.06666667
        value: 0
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      - serializedVersion: 2
        time: 0.13333334
        value: 1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      - serializedVersion: 2
        time: 0.31666666
        value: 0.703
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      m_PreInfinity: 2
      m_PostInfinity: 2
      m_RotationOrder: 4
    attribute: m_Color.a
    path: 
    classID: 114
    script: {fileID: -765806418, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
  - curve:
      serializedVersion: 2
      m_Curve:
      - serializedVersion: 2
        time: 0
        value: 1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      - serializedVersion: 2
        time: 0.06666667
        value: 0.5
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      - serializedVersion: 2
        time: 0.13333334
        value: 1.1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      m_PreInfinity: 2
      m_PostInfinity: 2
      m_RotationOrder: 4
    attribute: m_LocalScale.x
    path: 
    classID: 224
    script: {fileID: 0}
  - curve:
      serializedVersion: 2
      m_Curve:
      - serializedVersion: 2
        time: 0
        value: 1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      - serializedVersion: 2
        time: 0.06666667
        value: 0.5
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      - serializedVersion: 2
        time: 0.13333334
        value: 1.1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      m_PreInfinity: 2
      m_PostInfinity: 2
      m_RotationOrder: 4
    attribute: m_LocalScale.y
    path: 
    classID: 224
    script: {fileID: 0}
  - curve:
      serializedVersion: 2
      m_Curve:
      - serializedVersion: 2
        time: 0
        value: 1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      - serializedVersion: 2
        time: 0.06666667
        value: 0.5
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      - serializedVersion: 2
        time: 0.13333334
        value: 1.1
        inSlope: 0
        outSlope: 0
        tangentMode: 136
      m_PreInfinity: 2
      m_PostInfinity: 2
      m_RotationOrder: 4
    attribute: m_LocalScale.z
    path: 
    classID: 224
    script: {fileID: 0}
  m_EulerEditorCurves: []
  m_HasGenericRootTransform: 0
  m_HasMotionFloatCurves: 0
  m_GenerateMotionCurves: 0
  m_Events: []
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     INDX( 	 =          (   (             a t p           ^     j         1> ,T5$                      N e s t e r S t a t e E d i t o r . c s . m e      t         H7X PH7X                       N e s t e r S t a t e E d i t o r . c s . m e t a     ]     j         1> ,T5$                      N e s t e r S t a t e W i d g e t . c s . m e      t         KQ8X PVQx8X                        N e s t e r S t a t e W i d g e t . c s . m e t a     a    x b         xe ,T$                      S t a t e A n a l y s e r . c s . m e      l         9X P(9X                       S t a t e A n a l y s e r . c s . m e t a     `    x b         xe9.Tp$                       S t a t e A n a l y s i s . c s . m e      l         :X PP:X                      S t a t e A n a l y s i s . c s . m e t a     c    x h         9.T5$x       s                S t a t e D e s c r i p t i o n . c s      r         J;X P r;X                       S t a t e D e s c r i p t i o n . c s . m e t a       b    x f         9.05$                      S t a t e D e s c r i p t o r . c s .      p         w<X Ps<<X                      S t a t e D e s c r i p t o r . c s . m e t a e    p ^         ( .0$h      d               S t a t e E d i t o r . c s .     x h         F<X PF<X                       S t a t e E d i t o r . c s . m e t a _     v         1> $/Tp$                       S t a t e T r a n s i t i o n A n a l y s i s . c s .               =X P"=X                       S t  t e T r a n s i t i o n A n a l y s i s . c s . m e t a     p ^         5>X P\>X P      QF               S t a t e W i d g e t . c s       x h         >>X P>X                       S t a t e W i d g e t . c s . m e t a d     p          $/T]$                       S u p e r S t a t e D e s c r i p t o r . c s      z         s?X PRs?X                       S u p e r S  a t e D e s c r i p t o r . c s . m e t a       g    x h         VP/05$                       S u p e r S t a t e E d i t o r . c s      r         h.@X PnU@X                       S u p e r S t a t e E d i t o r . c s . m e t a       h    x h         V`/0$                      S u p e r S t a t e W i d g e t . c s      r         C@X P0C@X                       S u  e r S t a t e W i d g e t . c s . m e t a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   using System;
using System.Collections.Generic;
using System.Linq;
using UnityEditor;
using UnityEngine;

namespace Unity.VisualScripting
{
    public abstract class StateWidget<TState> : NodeWidget<StateCanvas, TState>, IStateWidget
        where TState : class, IState
    {
        protected StateWidget(StateCanvas canvas, TState state) : base(canvas, state)
        {
            minResizeSize = new Vector2(State.DefaultWidth, 0);
        }

        public virtual bool canForceEnter => true;

        public virtual bool canForceExit => true;

        public virtual bool canToggleStart => true;


        #region Model

        protected TState state => element;

        protected IStateDebugData stateDebugData => GetDebugData<IStateDebugData>();

        protected State.Data stateData => reference.hasData ? reference.GetElementData<State.Data>(state) : null;

        IState IStateWidget.state => state;

        protected StateDescription description { get; private set; }

        protected StateAnalysis analysis => state.Analysis<StateAnalysis>(context);

        protected override void CacheDescription()
        {
            description = state.Description<StateDescription>();

            title = description.title;
            summary = description.summary;

            titleContent.text = " " + title;
            titleContent.image = description.icon?[IconSize.Small];
            summaryContent.text = summary;

            Reposition();
        }

        #endregion


        #region Lifecycle

        public override void BeforeFrame()
        {
            base.BeforeFrame();

            if (currentContentOuterHeight != targetContentOuterHeight)
            {
                Reposition();
            }
        }

        public override void HandleInput()
        {
            if (e.IsMouseDrag(MouseButton.Left) &&
                e.ctrlOrCmd &&
                !canvas.isCreatingTransition)
            {
                if (state.canBeSource)
                {
                    canvas.StartTransition(state);
                }
                else
                {
                    Debug.LogWarning("Cannot create a transition from this state.\n");
                }

                e.Use();
            }
            else if (e.IsMouseDrag(MouseButton.Left) && canvas.isCreatingTransition)
            {
                e.Use();
            }
            else if (e.IsMouseUp(MouseButton.Left) && canvas.isCreatingTransition)
            {
                var source = canvas.transitionSource;
                var destination = (canvas.hoveredWidget as IStateWidget)?.state;

                if (destination == null)
                {
                    canvas.CompleteTransitionToNewState();
                }
                else if (destination == source)
                {
                    canvas.CancelTransition();
                }
                else if (destination.canBeDestination)
                {
                    canvas.EndTransition(destination);
                }
                else
                {
                    Debug.LogWarning("Cannot create a transition to this state.\n");
                    canvas.CancelTransition();
                }

                e.Use();
            }

            base.HandleInput();
        }

        #endregion


        #region Contents

        protected virtual string title { get; set; }

        protected virtual string summary { get; set; }

        private GUIContent titleContent { get; } = new GUIContent();

        private GUIContent summaryContent { get; } = new GUIContent();

        #endregion


        #region Positioning

        public override IEnumerable<IWidget> positionDependers => state.transitions.Select(transition => (IWidget)canvas.Widget(transition));

        public Rect titlePosition { get; private set; }

        public Rect summaryPosition { get; private set; }

        public Rect contentOuterPosition { get; private set; }

        public Rect contentBackgroundPosition { get; private set; }

        public Rect contentInnerPosition { get; private set; }

        private float targetContentOuterHeight;

        private float currentContentOuterHeight;

        private bool revealInitialized;

        private Rect _position;

        public override Rect position
        {
            get { return _position; }
            set
            {
                state.position = value.position;
                state.width = value.width;
            }
        }

        public override void CachePosition()
        {
            var edgeOrigin = state.position;
            var edgeX = edgeOrigin.x;
            var edgeY = edgeOrigin.y;
            var edgeWidth = state.width;
            var innerOrigin = EdgeToInnerPosition(new Rect(edgeOrigin, Vector2.zero)).position;
            var innerX = innerOrigin.x;
            var innerY = innerOrigin.y;
            var innerWidth = EdgeToInnerPosition(new Rect(0, 0, edgeWidth, 0)).width;
            var innerHeight = 0f;

            var y = innerY;

            if (showTitle)
            {
                using (LudiqGUIUtility.iconSize.Override(IconSize.Small))
                {
                    titlePosition = new Rect
                        (
                        innerX,
                        y,
                        innerWidth,
                        Styles.title.CalcHeight(titleContent, innerWidth)
                        );

                    y += titlePosition.height;
                    innerHeight += titlePosition.height;
                }
            }

            if (showTitle && showSummary)
            {
                y += Styles.spaceBetweenTitleAndSummary;
                innerHeight += Styles.spaceBetweenTitleAndSummary;
            }

            if (showSummary)
            {
                summaryPosition = new Rect
                    (
                    innerX,
                    y,
                    innerWidth,
                    Styles.summary.CalcHeight(summaryContent, innerWidth)
                    );

                y += summaryPosition.height;
                innerHeight += summaryPosition.height;
            }

            if (showContent)
            {
                var contentInnerWidth = edgeWidth - Styles.contentBackground.padding.left - Styles.contentBackground.padding.right;

                targetContentOuterHeight = revealContent ? (Styles.spaceBeforeContent + Styles.contentBackground.padding.top + GetContentHeight(contentInnerWidth) + Styles.contentBackground.padding.bottom) : 0;

                if (!revealInitialized)
                {
                    currentContentOuterHeight = targetContentOuterHeight;
                    revealInitialized = true;
                }

                currentContentOuterHeight = Mathf.Lerp(currentContentOuterHeight, targetContentOuterHeight, canvas.repaintDeltaTime * Styles.contentRevealSpeed);

                if (Mathf.Abs(targetContentOuterHeight - currentContentOuterHeight) < 1)
                {
                    currentContentOuterHeight = targetContentOuterHeight;
                }

                contentOuterPosition = new Rect
                    (
                    edgeX,
                    y,
                    edgeWidth,
                    currentContentOuterHeight
                    );

                contentBackgroundPosition = new Rect
                    (
                    0,
                    Styles.spaceBeforeContent,
                    edgeWidth,
                    currentContentOuterHeight - Styles.spaceBeforeContent
                    );

                contentInnerPosition = new Rect
                    (
                    Styles.contentBackground.padding.left,
                    Styles.spaceBeforeContent + Styles.contentBackground.padding.top,
                    contentInnerWidth,
                    contentBackgroundPosition.height - Styles.contentBackground.padding.top
                    );

                y += contentOuterPosition.height;
                innerHeight += contentOuterPosition.height;
            }

            var edgeHeight = InnerToEdgePosition(new Rect(0, 0, 0, innerHeight)).height;

            _position = new Rect
                (
                edgeX,
                edgeY,
                edgeWidth,
                edgeHeight
                );
        }

        protected virtual float GetContentHeight(float width) => 0;

        #endregion


        #region Drawing

        protected virtual bool showTitle => true;

        protected virtual bool showSummary => !StringUtility.IsNullOrWhiteSpace(summary);

        protected virtual bool showContent => false;

        protected virtual NodeColorMix baseColor => NodeColor.Gray;

        protected override NodeColorMix color
        {
            get
            {
                if (stateDebugData.runtimeException != null)
                {
                    return NodeColor.Red;
                }

                var color = baseColor;

                if (state.isStart)
                {
                    color = NodeColor.Green;
                }

                if (stateData?.isActive ?? false)
                {
                    color = NodeColor.Blue;
                }
                else if (EditorApplication.isPaused)
                {
                    if (EditorTimeBinding.frame == stateDebugData.lastEnterFrame)
                    {
                        color = NodeColor.Blue;
                    }
                }
                else
                {
                    color.blue = Mathf.Lerp(1, 0, (EditorTimeBinding.time - stateDebugData.lastExitTime) / Styles.enterFadeDuration);
                }

                return color;
            }
        }

        protected override NodeShape shape => NodeShape.Square;

        private bool revealContent
        {
            get
            {
                switch (BoltState.Configuration.statesReveal)
                {
                    case StateRevealCondition.Always:

                        return true;
                    case StateRevealCondition.Never:

                        return false;
                    case StateRevealCondition.OnHover:

                        return isMouseOver;
                    case StateRevealCondition.OnHoverWithAlt:

                        return isMouseOver && e.alt;
                    case StateRevealCondition.WhenSelected:

                        return selection.Contains(state);
                    case StateRevealCondition.OnHoverOrSelected:

                        return isMouseOver || selection.Contains(state);
                    case StateRevealCondition.OnHoverWithAltOrSelected:

                        return isMouseOver && e.alt || selection.Contains(state);
                    default:

                        throw new UnexpectedEnumValueException<StateRevealCondition>(BoltState.Configuration.statesReveal);
                }
            }
        }

        private bool revealedContent;

        private void CheckReveal()
        {
            var revealContent = this.revealContent;

            if (revealContent != revealedContent)
            {
                Reposition();
            }

            revealedContent = revealContent;
        }

        protected override bool dim
        {
            get
            {
                var dim = BoltCore.Configuration.dimInactiveNodes && !analysis.isEntered;

                if (isMouseOver || isSelected)
                {
                    dim = false;
                }

                return dim;
            }
        }

        public override void DrawForeground()
        {
            BeginDim();

            base.DrawForeground();

            if (showTitle)
            {
                DrawTitle();
            }

            if (showSummary)
            {
                DrawSummary();
            }

            if (showContent)
            {
                DrawContentWrapped();
            }

            EndDim();

            CheckReveal();
        }

        private void DrawTitle()
        {
            using (LudiqGUIUtility.iconSize.Override(IconSize.Small))
            {
                GUI.Label(titlePosition, titleContent, invertForeground ? Styles.titleInverted : Styles.title);
            }
        }

        private void DrawSummary()
        {
            GUI.Label(summaryPosition, summaryContent, invertForeground ? Styles.summaryInverted : Styles.summary);
        }

        private void DrawContentWrapped()
        {
            GUI.BeginClip(contentOuterPosition);

            DrawContentBackground();

            DrawContent();

            GUI.EndClip();
        }

        protected virtual void DrawContentBackground()
        {
            if (e.IsRepaint)
            {
                Styles.contentBackground.Draw(contentBackgroundPosition, false, false, false, false);
            }
        }

        protected virtual void DrawContent() { }

        #endregion


        #region Selecting

        public override bool canSelect => true;

        #endregion


        #region Dragging

        protected override bool snapToGrid => BoltCore.Configuration.snapToGrid;

        public override bool canDrag => true;

        public override void ExpandDragGroup(HashSet<IGraphElement> dragGroup)
        {
            if (BoltCore.Configuration.carryChildren)
            {
                foreach (var transition in state.outgoingTransitions)
                {
                    if (dragGroup.Contains(transition.destination))
                    {
                        continue;
                    }

                    dragGroup.Add(transition.destination);

                    canvas.Widget(transition.destination).ExpandDragGroup(dragGroup);
                }
            }
        }

        #endregion


        #region Deleting

        public override bool canDelete => true;

        #endregion


        #region Resizing

        public override bool canResizeHorizontal => true;

        #endregion


        #region Clipboard

        public override void ExpandCopyGroup(HashSet<IGraphElement> copyGroup)
        {
            copyGroup.UnionWith(state.transitions.Cast<IGraphElement>());
        }

        #endregion


        #region Actions

        protected override IEnumerable<DropdownOption> contextOptions
        {
            get
            {
                if (Application.isPlaying && reference.hasData)
                {
                    if (canForceEnter)
                    {
                        yield return new DropdownOption((Action)ForceEnter, "Force Enter");
                    }

                    if (canForceExit)
                    {
                        yield return new DropdownOption((Action)ForceExit, "Force Exit");
                    }
                }

                if (canToggleStart)
                {
                    yield return new DropdownOption((Action)ToggleStart, "Toggle Start");
                }

                if (state.canBeSource)
                {
                    yield return new DropdownOption((Action)MakeTransition, "Make Transition");
                }

                if (state.canBeSource && state.canBeDestination)
                {
                    yield return new DropdownOption((Action)MakeSelfTransition, "Make Self Transition");
                }

                foreach (var baseOption in base.contextOptions)
                {
                    yield return baseOption;
                }
            }
        }

        private void ForceEnter()
        {
            using (var flow = Flow.New(reference))
            {
                state.OnEnter(flow, StateEnterReason.Forced);
            }
        }

        private void ForceExit()
        {
            using (var flow = Flow.New(reference))
            {
                state.OnExit(flow, StateExitReason.Forced);
            }
        }

        protected void MakeTransition()
        {
            canvas.StartTransition(state);
        }

        protected void MakeSelfTransition()
        {
            canvas.StartTransition(state);
            canvas.EndTransition(state);
        }

        protected void ToggleStart()
        {
            UndoUtility.RecordEditedObject("Toggle State Start");

            state.isStart = !state.isStart;
        }

        #endregion


        public static class Styles
        {
            static Styles()
            {
                title = new GUIStyle(BoltCore.Styles.nodeLabel);
                title.fontSize = 12;
                title.alignment = TextAnchor.MiddleCenter;
                title.wordWrap = true;

                summary = new GUIStyle(BoltCore.Styles.nodeLabel);
                summary.fontSize = 10;
                summary.alignment = TextAnchor.MiddleCenter;
                summary.wordWrap = true;

                titleInverted = new GUIStyle(title);
                titleInverted.normal.textColor = ColorPalette.unityBackgroundDark;

                summaryInverted = new GUIStyle(summary);
                summaryInverted.normal.textColor = ColorPalette.unityBackgroundDark;

                contentBackground = new GUIStyle("In BigTitle");
                contentBackground.padding = new RectOffset(0, 0, 4, 4);
            }

            public static readonly GUIStyle title;

            public static readonly GUIStyle summary;

            public static readonly GUIStyle titleInverted;

            public static readonly GUIStyle summaryInverted;

            public static readonly GUIStyle contentBackground;

            public static readonly float spaceBeforeContent = 5;

            public static readonly float spaceBetweenTitleAndSummary = 0;

            public static readonly float enterFadeDuration = 0.5f;

            public static readonly float contentRevealSpeed = 15;
        }
    }
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               using UnityEngine;

namespace Unity.VisualScripting
{
    /// <summary>
    /// Checks if an object variable is defined.
    /// </summary>
    [UnitSurtitle("Object")]
    public sealed class IsObjectVariableDefined : IsVariableDefinedUnit, IObjectVariableUnit
    {
        public IsObjectVariableDefined() : base() { }

        public IsObjectVariableDefined(string name) : base(name) { }

        /// <summary>
        /// The source of the variable.
        /// </summary>
        [DoNotSerialize]
        [PortLabelHidden]
        [NullMeansSelf]
        public ValueInput source { get; private set; }

        protected override void Definition()
        {
            source = ValueInput<GameObject>(nameof(source), null).NullMeansSelf();

            base.Definition();

            Requirement(source, isDefined);
        }

        protected override VariableDeclarations GetDeclarations(Flow flow)
        {
            return Variables.Object(flow.GetValue<GameObject>(source));
        }
    }
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              #pragma warning disable 618

namespace Unity.VisualScripting
{
    [UnitShortTitle("Is Variable Defined")]
    public abstract class IsVariableDefinedUnit : VariableUnit
    {
        protected IsVariableDefinedUnit() : base() { }

        protected IsVariableDefinedUnit(string defaultName) : base(defaultName) { }

        /// <summary>
        /// Whether the variable is defined.
        /// </summary>
        [DoNotSerialize]
        [PortLabel("Defined")]
        [PortLabelHidden]
        public new ValueOutput isDefined { get; private set; }

        protected override void Definition()
        {
            base.Definition();

            isDefined = ValueOutput(nameof(isDefined), IsDefined);

            Requirement(name, isDefined);
        }

        protected virtual bool IsDefined(Flow flow)
        {
            var name = flow.GetValue<string>(this.name);

            return GetDeclarations(flow).IsDefined(name);
        }
    }
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   using UnityEngine;

namespace Unity.VisualScripting
{
    /// <summary>
    /// Sets the value of an object variable.
    /// </summary>
    [UnitSurtitle("Object")]
    public sealed class SetObjectVariable : SetVariableUnit, IObjectVariableUnit
    {
        public SetObjectVariable() : base() { }

        public SetObjectVariable(string name) : base(name) { }

        /// <summary>
        /// The source of the variable.
        /// </summary>
        [DoNotSerialize]
        [PortLabelHidden]
        [NullMeansSelf]
        public ValueInput source { get; private set; }

        protected override void Definition()
        {
            source = ValueInput<GameObject>(nameof(source), null).NullMeansSelf();

            base.Definition();

            Requirement(source, assign);
        }

        protected override VariableDeclarations GetDeclarations(Flow flow)
        {
            return Variables.Object(flow.GetValue<GameObject>(source));
        }
    }
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            INDX( 	 =           (            e m S i         i     ~         }00p$                      F l o w S t a t e T r a n s i t i o n A n a l y s e r . c s .               AX Pa=dBX                      # F l o w S t a t e T r a n s i t i o n A n a l y s e r . c s . m e t a j              00]$                       F l o w S t a t e T r a n s i t i o n D e s c r i p t o r . c s . m                NBX PcZBX                      % F l o w S t a t e T r a n s i t i o n D e s c r i p t o r . c s . m e t a     l     z          105$                       F l o w S t a t e T r a n s i t i o n E d i t o r . c s . m e               mCX PmCX                      ! F l o w S t a t e T r a n s i t i o n E d i t o r . c s . m e t a     k     z          10$        U               F l o w S t a t e T r a n s i t i o n W i d g e t . c s . m e               } DX P:GDX                      ! F l o w S t a t e T r a n s i t i o n W i d g e t . c s . m e t a     n     t          P
20p$                       I S t a t e T r a n s i t i o n W i d g e t . c s . m      ~         DX P?GEX                       I S t a t e T r a n s i t i o n W i d g e t . c s .  e t a   p              t10]$                       N e s t e r S t a t e T r a n s i t i o n A n a l y s e r . c s . m e               cEX PcEX                      % N e s t e r S t a t e T r a n s i t i o n A n a l y s e r . c s . m e t a     o              9015$                     " N e s t e r S t a t e T r a n s i t i o n D e s c r i p t o r . c s r                   <FX P DlFX                      ' N e s t e r S t a t e T r a n s i t i o n D e s c r i p t o r . c s . m e t a      ~         FX P,FX       (               N e s t e r S t a t e T r a n s i t i o n E d i t o r . c s                 GX PGX                      # N e s t e r S t a t e T r a n s i t i o n E d i t o r . c s . m e t a      ~         cGX P,cGX                      N e s t e r  t a t e T r a n s i t i o n W i d g e t . c s                 FGX PVGX                      # N e s t e r S t a t e T r a n s i t i o n W i d g e t . c s . m e t a      v         &HX P,0HX                      S t a t e T r a n s i t i o n A n a l y s e r . c s                 FwHX PFwHX                       S t a t e T r a n s i t i o n A n a l y s e r . c s . m e t a      |         0HX  P,0HX                       S t a t e T r a n s i t i o n D e s c r i p t i o n . c s                   IX P>FIX                      " S t a t e T r a n s i t i o n D e s c r i p t i o n . c s . m e t a        z         IX P,,IX                      S t a t e T r a n s i t i o n D e s c r i p t o r . c s                     IX PJX                      ! S t a t e T r a n s  t i o n D e s c r i p t o r . c s . m e t a          r         TJX P,TJX                     S t a t e T r a n s i t i o n E d i t o r . c s            |         5JX PsJX                       S t a t e T r a n s i t i o n E d i t o r . c s . m e t a          r         'KX P'KX `      R               S t a t e T r a n s i t i o n W i d g e t . c s                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    using System.Collections.Generic;
using UnityEditor;
using UnityEngine;

namespace Unity.VisualScripting
{
    public abstract class StateTransitionWidget<TStateTransition> : NodeWidget<StateCanvas, TStateTransition>, IStateTransitionWidget
        where TStateTransition : class, IStateTransition
    {
        protected StateTransitionWidget(StateCanvas canvas, TStateTransition transition) : base(canvas, transition) { }


        #region Model

        protected TStateTransition transition => element;

        protected IStateTransitionDebugData transitionDebugData => GetDebugData<IStateTransitionDebugData>();

        private StateTransitionDescription description;

        private StateTransitionAnalysis analysis => transition.Analysis<StateTransitionAnalysis>(context);

        protected override void CacheDescription()
        {
            description = transition.Description<StateTransitionDescription>();

            label.text = description.label;
            label.image = description.icon?[IconSize.Small];
            label.tooltip = description.tooltip;

            if (!revealLabel)
            {
                label.tooltip = label.text + ": " + label.tooltip;
            }

            Reposition();
        }

        #endregion

        #region Lifecycle

        public override void BeforeFrame()
        {
            base.BeforeFrame();

            if (showDroplets)
            {
                GraphGUI.UpdateDroplets(canvas, droplets, transitionDebugData.lastBranchFrame, ref lastBranchTime, ref dropTime);
            }

            if (currentInnerWidth != targetInnerWidth)
            {
                Reposition();
            }
        }

        #endregion


        #region Contents

        private GUIContent label { get; } = new GUIContent();

        #endregion


        #region Positioning

        private readonly List<IStateTransition> siblingStateTransitions = new List<IStateTransition>();

        private Rect sourcePosition;

        private Rect destinationPosition;

        private Edge sourceEdge;

        private Edge entryEdge;

        private Edge exitEdge;

        private Edge destinationEdge;

        private Vector2 sourceEdgeCenter;

        private Vector2 entryEdgeCenter;

        private Vector2 exitEdgeCenter;

        private Vector2 destinationEdgeCenter;

        private Vector2 middle;

        private Rect _position;

        private Rect _clippingPosition;

        private float targetInnerWidth;

        private float currentInnerWidth;

        private bool revealInitialized;

        private float minBend
        {
            get
            {
                if (transition.source != transition.destination)
                {
                    return 15;
                }
                else
                {
                    return (middle.y - canvas.Widget(transition.source).position.center.y) / 2;
                }
            }
        }

        private float relativeBend => 1 / 4f;

        Edge IStateTransitionWidget.sourceEdge => sourceEdge;

        public override IEnumerable<IWidget> positionDependencies
        {
            get
            {
                yield return canvas.Widget(transition.source);
                yield return canvas.Widget(transition.destination);
            }
        }

        public override IEnumerable<IWidget> positionDependers
        {
            get
            {
                // Return all sibling transitions. This is an asymetrical dependency / depender
                // relation (because the siblings are not included in the dependers) to force
                // repositioning of siblings while avoiding stack overflow.

                foreach (var graphTransition in canvas.graph.transitions)
                {
                    var current = transition == graphTransition;

                    var analog =
                        transition.source == graphTransition.source &&
                        transition.destination == graphTransition.destination;

                    var inverted =
                        transition.source == graphTransition.destination &&
                        transition.destination == graphTransition.source;

                    if (!current && (analog || inverted))
                    {
                        var widget = canvas.Widget(graphTransition);

                        if (widget.isPositionValid) // Avoid stack overflow
                        {
                            yield return widget;
                        }
                    }
                }
            }
        }

        public Rect iconPosition { get; private set; }

        public Rect clipPosition { get; private set; }

        public Rect labelInnerPosition { get; private set; }

        public override Rect position
        {
            get { return _position; }
            set { }
        }

        public override Rect clippingPosition => _clippingPosition;

        public override void CachePositionFirstPass()
        {
            // Calculate the size immediately, because other transitions will rely on it for positioning

            targetInnerWidth = Styles.eventIcon.fixedWidth;

            var labelWidth = Styles.label.CalcSize(label).x;
            var labelHeight = EditorGUIUtility.singleLineHeight;

            if (revealLabel)
            {
                targetInnerWidth += Styles.spaceAroundIcon;
                targetInnerWidth += labelWidth;
            }

            if (!revealInitialized)
            {
                currentInnerWidth = targetInnerWidth;
                revealInitialized = true;
            }

            currentInnerWidth = Mathf.Lerp(currentInnerWidth, targetInnerWidth, canvas.repaintDeltaTime * Styles.revealSpeed);

            if (Mathf.Abs(targetInnerWidth - currentInnerWidth) < 1)
            {
                currentInnerWidth = targetInnerWidth;
            }

            var innerWidth = currentInnerWidth;
            var innerHeight = labelHeight;

            var edgeSize = InnerToEdgePosition(new Rect(0, 0, innerWidth, innerHeight)).size;
            var edgeWidth = edgeSize.x;
            var edgeHeight = edgeSize.y;

            _position.width = edgeWidth;
            _position.height = edgeHeight;
        }

        public override void CachePosition()
        {
            var innerWidth = innerPosition.width;
            var innerHeight = innerPosition.height;
            var edgeWidth = edgePosition.width;
            var edgeHeight = edgePosition.height;
            var labelWidth = Styles.label.CalcSize(label).x;
            var labelHeight = EditorGUIUtility.singleLineHeight;

            sourcePosition = canvas.Widget(transition.source).position;
            destinationPosition = canvas.Widget(transition.destination).position;

            Vector2 sourceClosestPoint;
            Vector2 destinationClosestPoint;
            LudiqGUIUtility.ClosestPoints(sourcePosition, destinationPosition, out sourceClosestPoint, out destinationClosestPoint);

            if (transition.destination != transition.source)
            {
                GraphGUI.GetConnectionEdge
                    (
                        sourceClosestPoint,
                        destinationClosestPoint,
                        out sourceEdge,
                        out destinationEdge
                    );
            }
            else
            {
                sourceEdge = Edge.Right;
                destinationEdge = Edge.Left;
            }

            sourceEdgeCenter = sourcePosition.GetEdgeCenter(sourceEdge);
            destinationEdgeCenter = destinationPosition.GetEdgeCenter(destinationEdge);

            siblingStateTransitions.Clear();

            var siblingIndex = 0;

            // Assign one common axis for transition for all siblings,
            // regardless of their inversion. The axis is arbitrarily
            // chosen as the axis for the first transition.
            var assignedTransitionAxis = false;
            var transitionAxis = Vector2.zero;

            foreach (var graphTransition in canvas.graph.transitions)
            {
                var current = transition == graphTransition;

                var analog =
                    transition.source == graphTransition.source &&
                    transition.destination == graphTransition.destination;

                var inverted =
                    transition.source == graphTransition.destination &&
                    transition.destination == graphTransition.source;

                if (current)
                {
                    siblingIndex = siblingStateTransitions.Count;
                }

                if (current || analog || inverted)
                {
                    if (!assignedTransitionAxis)
                    {
                        var siblingStateTransitionDrawer = canvas.Widget<IStateTransitionWidget>(graphTransition);

                        transitionAxis = siblingStateTransitionDrawer.sourceEdge.Normal();

                        assignedTransitionAxis = true;
                    }

                    siblingStateTransitions.Add(graphTransition);
                }
            }

            // Fix the edge case where the source and destination perfectly overlap

            if (transitionAxis == Vector2.zero)
            {
                transitionAxis = Vector2.right;
            }

            // Calculate the spread axis and origin for the set of siblings

            var spreadAxis = transitionAxis.Perpendicular1().Abs();
            var spreadOrigin = (sourceEdgeCenter + destinationEdgeCenter) / 2;

            if (transition.source == transition.destination)
            {
                spreadAxis = Vector2.up;
                spreadOrigin = sourcePosition.GetEdgeCenter(Edge.Bottom) - Vector2.down * 10;
            }

            if (BoltCore.Configuration.developerMode && BoltCore.Configuration.debug)
            {
                Handles.BeginGUI();
                Handles.color = Color.yellow;
                Handles.DrawLine(spreadOrigin + spreadAxis * -1000, spreadOrigin + spreadAxis * 1000);
                Handles.EndGUI();
            }

            // Calculate the offset of the current sibling by iterating over its predecessors

            var spreadOffset = 0f;
            var previousSpreadSize = 0f;

            for (var i = 0; i <= siblingIndex; i++)
            {
                var siblingSize = canvas.Widget<IStateTransitionWidget>(siblingStateTransitions[i]).outerPosition.size;
                var siblingSizeProjection = GraphGUI.SizeProjection(siblingSize, spreadOrigin, spreadAxis);
                spreadOffset += previousSpreadSize / 2 + siblingSizeProjection / 2;
                previousSpreadSize = siblingSizeProjection;
            }

            if (transition.source != transition.destination)
            {
                // Calculate the total spread size to center the sibling set

                var totalSpreadSize = 0f;

                for (var i = 0; i < siblingStateTransitions.Count; i++)
                {
                    var siblingSize = canvas.Widget<IStateTransitionWidget>(siblingStateTransitions[i]).outerPosition.size;
                    var siblingSizeProjection = GraphGUI.SizeProjection(siblingSize, spreadOrigin, spreadAxis);
                    totalSpreadSize += siblingSizeProjection;
                }

                spreadOffset -= totalSpreadSize / 2;
            }

            // Finally, calculate the positions

            middle = spreadOrigin + spreadOffset * spreadAxis;

            var edgeX = middle.x - edgeWidth / 2;
            var edgeY = middle.y - edgeHeight / 2;

            _position = new Rect
                (
                edgeX,
                edgeY,
                edgeWidth,
                edgeHeight
                ).PixelPerfect();

            var innerX = innerPosition.x;
            var innerY = innerPosition.y;

            _clippingPosition = _position.Encompass(sourceEdgeCenter).Encompass(destinationEdgeCenter);

            if (transition.source != transition.destination)
            {
                entryEdge = destinationEdge;
                exitEdge = sourceEdge;
            }
            else
            {
                entryEdge = sourceEdge;
                exitEdge = destinationEdge;
            }

            entryEdgeCenter = edgePosition.GetEdgeCenter(entryEdge);
            exitEdgeCenter = edgePosition.GetEdgeCenter(exitEdge);

            var x = innerX;

            iconPosition = new Rect
                (
                x,
                innerY,
                Styles.eventIcon.fixedWidth,
                Styles.eventIcon.fixedHeight
                ).PixelPerfect();

            x += iconPosition.width;

            var clipWidth = innerWidth - (x - innerX);

            clipPosition = new Rect
                (
                x,
                edgeY,
                clipWidth,
                edgeHeight
                ).PixelPerfect();

            labelInnerPosition = new Rect
                (
                Styles.spaceAroundIcon,
                innerY - edgeY,
                labelWidth,
                labelHeight
                ).PixelPerfect();
        }

        #endregion


        #region Drawing

        protected virtual NodeColorMix baseColor => NodeColor.Gray;

        protected override NodeColorMix color
        {
            get
            {
                if (transitionDebugData.runtimeException != null)
                {
                    return NodeColor.Red;
                }

                var color = baseColor;

                if (analysis.warnings.Count > 0)
                {
                    var mostSevereWarning = Warning.MostSevereLevel(analysis.warnings);

                    switch (mostSevereWarning)
                    {
                        case WarningLevel.Error:
                            color = NodeColor.Red;

                            break;

                        case WarningLevel.Severe:
                            color = NodeColor.Orange;

                            break;

                        case WarningLevel.Caution:
                            color = NodeColor.Yellow;

                            break;
                    }
                }

                if (EditorApplication.isPlaying)
                {
                    if (EditorApplication.isPaused)
                    {
                        if (EditorTimeBinding.frame == transitionDebugData.lastBranchFrame)
                        {
                            color = NodeColor.Blue;
                        }
                    }
                    else
                    {
                        color.blue = Mathf.Lerp(1, 0, (EditorTimeBinding.time - transitionDebugData.lastBranchTime) / StateWidget<IState>.Styles.enterFadeDuration);
                    }
                }

                return color;
            }
        }

        protected override NodeShape shape => NodeShape.Hex;

        private bool revealLabel
        {
            get
            {
                switch (BoltState.Configuration.transitionsReveal)
                {
                    case StateRevealCondition.Always:

                        return true;
                    case StateRevealCondition.Never:

                        return false;
                    case StateRevealCondition.OnHover:

                        return isMouseOver;
                    case StateRevealCondition.OnHoverWithAlt:

                        return isMouseOver && e.alt;
                    case StateRevealCondition.WhenSelected:

                        return selection.Contains(transition);
                    case StateRevealCondition.OnHoverOrSelected:

                        return isMouseOver || selection.Contains(transition);
                    case StateRevealCondition.OnHoverWithAltOrSelected:

                        return isMouseOver && e.alt || selection.Contains(transition);
                    default:

                        throw new UnexpectedEnumValueException<StateRevealCondition>(BoltState.Configuration.transitionsReveal);
                }
            }
        }

        private bool revealedLabel;

        private void CheckReveal()
        {
            var revealLabel = this.revealLabel;

            if (revealLabel != revealedLabel)
            {
                Reposition();
            }

            revealedLabel = revealLabel;
        }

        protected override bool dim
        {
            get
            {
                var dim = BoltCore.Configuration.dimInactiveNodes && !(transition.source.Analysis<StateAnalysis>(context).isEntered && analysis.isTraversed);

                if (isMouseOver || isSelected)
                {
                    dim = false;
                }

                return dim;
            }
        }

        public override void DrawForeground()
        {
            BeginDim();

            base.DrawForeground();

            GUI.Label(iconPosition, label, Styles.eventIcon);

            GUI.BeginClip(clipPosition);

            GUI.Label(labelInnerPosition, label, invertForeground ? Styles.labelInverted : Styles.label);

            GUI.EndClip();

            EndDim();

            CheckReveal();
        }

        public override void DrawBackground()
        {
            BeginDim();

            base.DrawBackground();

            DrawConnection();

            if (showDroplets)
            {
                DrawDroplets();
            }

            EndDim();
        }

        private void DrawConnection()
        {
            GraphGUI.DrawConnectionArrow(Color.white, sourceEdgeCenter, entryEdgeCenter, sourceEdge, entryEdge, relativeBend, minBend);

            if (BoltState.Configuration.transitionsEndArrow)
            {
                GraphGUI.DrawConnectionArrow(Color.white, exitEdgeCenter, destinationEdgeCenter, exitEdge, destinationEdge, relativeBend, minBend);
            }
            else
            {
                GraphGUI.DrawConnection(Color.white, exitEdgeCenter, destinationEdgeCenter, exitEdge, destinationEdge, null, Vector2.zero, relativeBend, minBend);
            }
        }

        #endregion


        #region Selecting

        public override bool canSelect => true;

        #endregion


        #region Dragging

        public override bool canDrag => false;

        protected override bool snapToGrid => false;

        #endregion


        #region Deleting

        public override bool canDelete => true;

        #endregion


        #region Droplets

        private readonly List<float> droplets = new List<float>();

        private float dropTime;

        private float lastBranchTime;

        protected virtual bool showDroplets => BoltState.Configuration.animateTransitions;

        protected virtual Vector2 GetDropletSize()
        {
            return BoltFlow.Icons.valuePortConnected?[12].Size() ?? 12 * Vector2.one;
        }

        protected virtual void DrawDroplet(Rect position)
        {
            GUI.DrawTexture(position, BoltFlow.Icons.valuePortConnected?[12]);
        }

        private void DrawDroplets()
        {
            foreach (var droplet in droplets)
            {
                Vector2 position;

                if (droplet < 0.5f)
                {
                    var t = droplet / 0.5f;
                    position = GraphGUI.GetPointOnConnection(t, sourceEdgeCenter, entryEdgeCenter, sourceEdge, entryEdge, relativeBend, minBend);
                }
                else
                {
                    var t = (droplet - 0.5f) / 0.5f;
                    position = GraphGUI.GetPointOnConnection(t, exitEdgeCenter, destinationEdgeCenter, exitEdge, destinationEdge, relativeBend, minBend);
                }

                var size = GetDropletSize();

                using (LudiqGUI.color.Override(Color.white))
                {
                    DrawDroplet(new Rect(position.x - size.x / 2, position.y - size.y / 2, size.x, size.y));
                }
            }
        }

        #endregion


        public static class Styles
        {
            static Styles()
            {
                label = new GUIStyle(BoltCore.Styles.nodeLabel);
                label.alignment = TextAnchor.MiddleCenter;
                label.imagePosition = ImagePosition.TextOnly;

                labelInverted = new GUIStyle(label);
                labelInverted.normal.textColor = ColorPalette.unityBackgroundDark;

                eventIcon = new GUIStyle();
                eventIcon.imagePosition = ImagePosition.ImageOnly;
                eventIcon.fixedHeight = 16;
                eventIcon.fixedWidth = 16;
            }

            public static readonly GUIStyle label;

            public static readonly GUIStyle labelInverted;

            public static readonly GUIStyle eventIcon;

            public static readonly float spaceAroundIcon = 5;

            public static readonly float revealSpeed = 15;
        }
    }
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             INDX( 	 j=          (   P	          a  i               r     ~         P
2[a$       (               N e s t e r S t a t e T r a n s i t i o n E d i t o r . c s .               GX PGX                      # N e s t e r S t a t e T r a n s i t i o n E d i t o r . c s . m e t a q     ~         2p$                      N e s t e r S t a t e T r a n s i t i o n W i d g e t . c s .               FGX PVGX                      # N e s t e r S t a t e T r a n s i t i o n W i d g e t . c s . m e t a s     v         2	]$                      S t a t e T r a n s i t i o n A n a l y s e r . c s .               FwHX PFwHX                       S t a t e T r a n s i t i o n A n a l y s e r . c s . m e t a v     |         %i3	5$                       S t  t e T r a n s i t i o n D e s c r i p t i o n . c s . m               IX P>FIX                      " S t a t e T r a n s i t i o n D e s c r i p t i o n . c s . m e t a   t     z          4	$                      S t a t e T r a n s i t i o n D e s c r i p t o r . c s . m e               IX PJX                      ! S t a t e T r a n s i t i o n D e s c r i p t o r . c s . m e t a     x     r         y`47p$                     S t a t e T r a n s i t i o n E d i t o r . c s . m e      |         5JX PsJX                       S t a t e T r a n s i t i o n E d i t o r . c s . m e t a          r         'KX P'KX `      R               S t a t e T r a n s i t i o n W i d g e t . c s            |         {KX PEKX                       S t a t e T r a n s  t i o n W i d g e t . c s . m e t a     w              y`47]$      }               T r i g g e r S t a t e T r a n s i t i o n W i d g e t . c s               j^LX P9LX                      $ T r i g g e r S t a t e T r a n s i t i o n W i d g e t . c s . m e t a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          KA
   nsrP#Inf[V     7m     L     0!      T|X          Prot   #Filx\}l#GB)Q$5wwu+6qo^!U|[!@BJH> B !BBBC*Tov85i@2y;f7o^!k81&- Po mZ(%`ybUqAt|B)xDci(ktXl2XX=.PEZ^O{W S7& 4fT`5{Y\89y%ZQ<NNt]NqU#RNR"bXX{0LXcA0>sN7@ssu^1OnP|n*kP)RkrhTeh: vCKNAh Z+Pq]
U2B(XL@:U0nGU/n]M{tL7A{{t_J7J79}2/}=aQN$F`.=EMgI}=	T$]vwf!JoK-H|)J-QdH3`g#u_E":T)X:zsAx$(2rx.C`"=m2TrU<UZJqC=fzu^u$fy%,NP7f~|.GvNTC> m<;o-T?gV~|..ZrnkxoL/98@9b)o:mx;-C/1%!%b.K0C]	n*\17%a,JX\nmA,+f~s1l~`kaV6?`+aFMyp?Jss7N``q]{#|oHE	U(z|Q}F3EOGoQp"Aa3bD)+'gsk:B\YH-t)+^DH^ROPc'31i`^
mRGonwE2z%
AC6Xl'j=f\H!\_R/% Bu;^STYb@9Y%TK"XThRHo"j	;Z.aI]b.X"w&b.WjA5}D"Rg`=1SPr3SB9]/\|qs
y%4ndE1yU2*I[K8:\*F1KkvPW$z!J(s;UL8*YK`,BW%tl[E v444%ZYiJ wtB'lt2rPb`p(C]0O$h_u-8-!oEFhFBw&Fmuq)1p+tUIwhjo6N_Kws_b,a5M`	tvpOi<p"(14P6#P3@y@gpf ;#Q#r}GmS%L1h$ASHm1XYQ?BRcT#(\1Os>*jOQz/u591Wb	|7uls@~Sf	k/"+3:vSv^	a7-4ry;[x>C(pp	~C@/<w3~xA7~3K"9#=D{oCNSXDEe&"f>?re_?lSO2>7TeA~=(7Xs>f^tmwM;[MA!v\i&j(al)g2WyF4/rP".b ]vIfZ>S]fqu+THYiV
7v":_IEaKn PM1%%[*1J~ydMhAXLt(e>Q|%@,0$l~d?]Mi\rS$[)",\[\ii8?qOOO7Z
i@37]!)KI  096R@5ip_Wa$*Sc^E_w<KK^"9d-yNFMJ8.VkMS"=/Pmz6\k,c%.^-<GUG$#~*;,
|)GPL=BCxX7,b&)hE"D LZ JSpeU 2:aG9ChM3]C~ZYH9_)M;,8%FJAEZZ?;<0ab@dfuWN0	iM}>h%>tR+ZAx.smajAJ!g_4:r%Kc\*UKb> I1*;HD>YJh@C+3w45xSWUSU9.]sHgn%c5wvJynLkMyr 	l]zwWOgVD@l&[t#61H@)I^U~l8.
-55?1=GOMQG%>J:_v_ui@6\9RH/W;`DU]aQQq\zG4.P]U}XM>us%B?H8/^/NL;M#mYCn}x5=&\ gN+28~a'mHZ%H0VkP]58(=Qlj5(cZ*	T8Jj~teyEp{?6jNmZnL~R]\=SL]mgFW9zn,srcItAqJ^d+W-9K%S1Ys<suNmFZ~56jr:V3/Iyt,VoSU\MB[3SS&F
,4jk^Z$-6#(<xRgP&;P_lp+b'v"~CqEP\;R?	p(HflC2fDoJ(pIj	=^(5X#FilxoUyv]a[-EKQ&H
BBx@*P1tn/;!.|'>ssfD^]?v|#T~-~Dy9WkV(wu7L.5`xkmkk] o#Q6:^JRIO"gUk myV'\G"1K w=ZR&Z(Zh	+ UJ)S2/1?ewKr_TEXW#4h}M|3so}k&cn$j/LzxJ5?9 C[r^\9n74;=e~l;#?UT~x5WIo>0G48drOEbQ_# 50
Igd>v7@)sK6 W-g>|Yz|5%B7owV_~arWO2=_;?hi$d-Z_}jt%~-Eu53<G\-V-/2](NNzX5}{|Q3/6&i=ygi%c6?})*v?nf@ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ 7"&#Filx[OTW>0	L9Uc&$55\S;x~W(H,65DL
SmEtp=W{'3=sw-k`pjvO2*;?2{oDo8"0dkCrsbVF<ww})&{lW-<5ISbXRU.4<7AGb t,Kb! gOZR
Sc[ j/GlK_	a%% F;^_H42^_RS}r# ;TJ2Pr8]j~=RS(+lE? bWz737m='=y8b!X]@:$n9% Ro;.zVrT) `_r%~ sRC_\*7g9_|*
oL8kBy+2rhg1YUswm_t$}O\]o7Sq\T#mq=@1NkbZU*?) z
{^zA"2W>H~Z9                                                                                                              |9I#FilxMOTW9a0>D1&nn{h[EFc06mAf`fx{/b;{g"~]+,~bbi_rQs+3>284l@~E*l{.|{eu1PnXjZtO^wmiV[='Tp% VJR%\S+ wtMt[y7I ZJN]qS"C/,_L[+v:q'om_N_\
/~}s'7SWQdBssM CA~?\fZ=TN_M/GgCz|qw&OTL~D_X%#~t167oWKy+SUvWbWwW&_1']sd5oN[+/lkoK63u0hVwO/re sf_= ss;5-_tJre{L}_[S17osJS#/Q}H                                                                                                              |w,#Filx+Eas$2d3X,d:MJ(dA\=\x,</'mWoO/=Ef}(}9(=R'?4UnW8NY(%#[ ?E +{t;g@.y(NR,2}_@f8W$Wx!`S~>x3uh[{_a5z}=~ t6.C8/ @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @&
UJ#Filx?/Q{oFR$R,/"i7Dc6ga@57,jM^>1`.`O;\Z=0]4jRw&G)=lrZOWh wy7xQNmyk8T0%@  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ &*#FilxJCAR(">D|"XSKFts;0)u??5{K)]?Iwoq`x,e:hC<E)yrKh wy6hr[xUs:ZG_5x6U;U./ @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ C&U*#FilxNQ3']B
	$h};i	RATA@H[S5fRjgqNoga:~.0>~w/wO6g9O;>x0:U'8)`p\/#Y9v=MoGsY_Kmo @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ U&*#FilxA
AQ;WJ)ckPV(Y2 e`23)I=3<_]Yvoi0_#\o( 0:%8f?qs*\AN#k @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ R#FilxoSesznu10t%+&r7^y_"J$FD%Y6'162899Hi>yTnc.nk<*DW:|>^mV;wBLg@r`j#Y+_c76~*s'N]t2C=c.Bn+e:*:g./XJ,WvDr>}w+NYRZ;w- gy+LQseDkvs1 jm?73QKX!?=e[&RseY?~nVtbt=%oJ1w$kVOAM7X_f;tj*tG%O<y[~;mGMl-;2s&ZWJA 5>^S'n/vlEx~nTaKa_a3G[-%(3uo^$Zi5on_%[WBwm[o7W~"UE?7x g
#7VP?~z1|`htVnNAoC^]ox}f'bg%Q'<{5f6:iu;n7;grg'[c@ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @SK#Filxk[e9$i,idkltZW'((2)dVM)e%md.?{~=>I,Koy$w<D'"J*XuGrG;7W;_CPeFh[,Mm]m*c:IVBpedmKi|=oIM2WjCp00KEL<bH JrG}4;h) sOM=nt/,S0'ka Xgv/oJ! )_MCY(T04ggn_{K0?:6r/#]8=8_O#y_jA?{`20|;fz?r#5O(;3:^04l~|{~|Z5zgr7}M_ \_Ol{WBzM OU^`}m\]	zz!BnorsS `lsgW_#Gw7_.[-q. 3(<}YZEB?t8^n VZg_W;+sZ1kaa0+}9Qw<7)$FU1[=}3n8N'>EWa                                                                                                               WtO#FilxO\Uw^
0 F$JlV]q56icsR 01!B!($@I76K~'sf|s~sE^?z{O>Zu0c1/j{>:wvm>[>Y =o Vt/D%5qQf|P`w# ,6&hkGO|T,D)Dvc_ :sZ4Mlq.\=Y}rDfD@D%;[>~onGN+lLtcg 65|jI>chU7x)o^0o4@:e]RWv+9p1R|_oo.%N^51+0sZ^rN>x~5=67O_k;E_Yejt ofL26jEWvKn5m_\YY) Ru=ao<o]uEl~ HNl@8nc"3fUL~+</V]y95AUh|sc&d\_OH{juLZg\h#@ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ tK#Filx?Ha;TNC` N-N9	&b 
rn
5UTSMnq."\lM~$!@  @ bx7N;X-KoHC`!ra"r^~b1#\&$I;&f-dDvJuZ>yuNMT.<N'wyF5myimi7ml~,_>X?;>G&,  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ O7:#Filx.DQ#	!Y7YB#j(m4lgWPof&%C &?ksUa d="bu|SXz9mKSX~JgiD~yezY\V]}YZt_^Hz`2Tn @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  o?qH<#Filx.aW"VXO+5b.VHD	L.~ysNJ &9-%]KY~	{>g XzosT`2X~J'iZW&/?0K{7\~JGF!?/gVw<^w6Rn @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  o?q<#FilxO+DQcR4,(gGf?/Q
{K>sR @ gMDL?Uhz.OL?o3{4h"WWG>brU}[\~JKx)0M.V/Sy_ @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ zm>#Filxqa	5$AJf[0J~:pct)Wy{So.!@ 	$uIL20f%G1]d?FVy_32T@YjnS-=VZ @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  u#Fil KS kclB    eziS      -ataD  PNG

   IHDR           szz   tEXtSoftware Adobe ImageReadyqe<  IDATxW]LU>3.)?ei) 	iZ 6"DQj>FlKL,[A6FJOaBY?;93dIsseDQh0j_]z|U&IF Df*~>je(;8}tWTTr;+*9qC\.X]]7ga/\(,,P%FJH$x80,z|!3307?`qUj=RSfXZAx)S>3k+o}Eyd2yPjS^sr+Rr{ ?Y23cGvi+!gkjjh0]
4@RH#)'BA"P >g
[N/<p?HI2jHX\\.wO5,\'sq]yC"38%hooR	LSUUR2#(Zz<^pe~!)}mmmHx~H).)tv>NgV)|1
Gzld4(-.7#(kZ;AL&F'8 9T4P7M
e3h39^.E@i,@#N2)
eH&$l+N] p"
IA!d}5'Gxn9[tX#J	Xr'ETjU+!z4^-9b+@"G7uB1'D`Rz1}2NgT)*)npjB9BI|;z].7afH;s#{i6WlpV%B~355y0@-/naAMfq?38cVDFGETZFuRv>~ c)?O?OCh9Y\	=?;;^0dO,FF!F]wPZm
 nG>YQsKv,/<(<H$;PlUJ(4|psbCIXQBJ 2aP(z,
uavyh2R)h[Z?6t`!"H=BBuh4v/?)[>,b"H+;w/4d	>Hy~	}yl?{CwQ9!\r!isQn	Ki>0 Yy^    IENDB` #Filx0AhL*f*=W9@>oU}Ag}_P/Y_}W>o%@  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ^ #Filx10A,_p=*= Y_}W>oU}Ag}_P/Y_{{+ @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ & #Filx1 AUHyOUM:5AG3t9@G3t9@G3t9@G3t9@G3t9@G3t9@G3t9@G3t9@G3t9@G3t9@G3t9@G3t9@G3t9@G3t9@G3t9@G	 @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ >B #Filx!@AAiTN\q>=?@[c=z'o_dm~G  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ #Filx@AZ"h	QaE$s|d<=az6lXO_ @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  #Filx1 AUHdy+3s3s3s3s3s3s3s3s3s3s3s3s3s3s  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ x	#FT2        Q|X    VO      I                     /       H       C            -    doc.dat    E             "           d/1    o                   u{*    d/2                       j[    d/3                 /      2%p    d/4                           d/5                       '    d/6    !                   e~LA    d/7	    Z#                   cGw/    d/8
    %             T      /K-}    d/9    d)             T      5$    d/a    -             N      s2v8    d/b    2             B      N5    d/c    `4                    -    d/d    26                   [    d/e    8                   %    d/f    9                   w>k    d/01    ;      ?      ?      (     c/1    A             u      7    d/71    UC             x      r     d/81    D                   [>    d/91    F             Y      {    d/a1    H             \      x
    d/b1    jI             z      S>    d/c1          c/          d/#Filx]{p};IfE;&q&6A"	A!D(v#8 "4IQ]IM6-4NS4z:>:|QEnwov^z{^ZM-+
{AszR bGYR(]i~bfS<2&lD[ZVe^_Ts_lXP
,)1XRVebc%fXAn`E
Y9RvD\H+[Xj,Cx$11QR`2JCcpBi$+inK'PQ^k'v_$\A%kkR+=+8MG_k4.Z}$r.7=PO[cr$D>Xiz7j[(g"*iT28=KzzZJ#G~j`7E-2siVI&oet)w#dw#j}x+prLtQPN)\4<1J$GFa:*9p~+9J"G8,Y8F)\X1J!t\8lS199 n#ccTL!_8Da_8L,8~C0c^8cpQp3awF;EXgQtc0B8();xq,LGN"X!G]	8@DB='[WBF	CeS>a}>[K1d.ob?;7tRWn7T PBD~P=/FiK'fsEaSM!=JNuf
Wn-0@a+.5QJRx-[1RQE0};G3TaR-PNna90"57p	1:cs3ccs}OQu^K|Ko`]fpR+!vT8@n"58"Rs7(8\ju >8`Rxxsoqp	PwhKMSmUf~BO8@	n$$pYN^1BOC_	W)b?^r-\g+Jawp~N Q	(H	@MKn\ucBWU#xEo"IWsUpGfh*4p(o#^Cxd8\@,>Wq"`% ?8:oQpNt C!t\vrCN1<90wNV"\0<(gy#d^	"8W\{K?>{o!-v{ 6x[[[;P]l{x	sE	Ee;c^8{Suc~\IDG<
901z  @1W8!61xs`~c~78\<	90{WP WAcpMs3swo8\pq8	8\o"|"s@NW?sZFT;N&%X//y|,)B~xA d{Eypc]S
-^>"4eR V9D0#~NRnjQSK	iIE*xq`[MIM C+ .N P)t<	80CU"l!	TiZ12_	iNs-S\E2p"D1h+wzo%PiJ;IMIP6{0@+!)xkB]#+
wR(KbV9@%+>xdi(oy0l;<]td:_AI6st+ )Fi09R]/! !rCp{=/"|
GN|# \{K*Fl,MUa"2|,Fkx&3lq8dC(uZm-nA ,^N`nc@I51dMjL`@`!@XP1BGmsCN*(kh,cUz|]9{pl1@o`dZNp
s/5O?']>R/DwU_/=V_K`_s{=ZzI
&&~ 6Li2\pMc>xh187I<A$R0%Zu$/TLI:K*(>1x-^UplCu_1&n#%pl_dvoF-&[_xlb-XiXs e4>EdF#GIEr3(CJtmPdA5!v1(8qolD4(jdP.5o &N)5Moan::k)u--7^['|sSo1Mo8\<*EL`p`>p*|2h&1|o`s`.n>xs`n>-0qW_gtdm[;RojU3W%gHWkbf"i%;rX2,FB?,QKa"~5/SEAC@krz%9(i!MpF~eP3BA%RYB5t:_
T=&[jM*\DiPQ]`fDSQBNROGzzuNsl+Zgf9!>h<1ohIj@LmJ5B[A<2R^ZB2{j^eFK8\n=_bA+MI8]rU+#_(t&YVJoOP)cV1[jN$JvBh6Ma):2GXc; D?F[69r%nY&C}2tbmj5E =JF'>vQ6b[0OVnqJU'zZG;`dRD4&?DV$yVgfY[OQX.IJ3A[K$g`1O,=*r~6b"vdN`On j&r0f$Jm__TH=S$yWSZG^_#3<"dC#UJF]!:Yi:,vW.VzaGB:!nWah+M69Yf^hb[(b@|\-	#<gRPFX(OV9w3=~$z7?8U^o_Y~nz|o'} 7K~o"sBNr^~Sgb?}!|oXj3g_m>uyyZ7'qcmq.`Nq^i7TmVf4*m0.	ln@"<E@	ed%U1h{q
=a4rBKL0] cL/QK/c)]8F?EVZazJkJJrZW?l~`I7pd.&)syMP*M,$ss_D
RB|:)92#>MJkzypvq|5r[Gw%bI{>Vgd9P80y>L	+\?d77vG1^742BNjkV=CZjj
e?GUU	=qlu5+f-ft5{%.rF+XTA^S?
c]k:3/o0~n5^ X`=&%EGnZi4%=MuYA+[#9=@MzL=K}}Lz+DH>>0d7l|--"FeciiL,Wq$t){ SNUphrFN1:iM1'mOmvI8atluYyi Ur)d+={|=5cfEt"e=M6~P?
siy+"M#*1)7%%@'	A,}\28>_K)TsPI5:lvkJ6!1A.5iP]|ez^6R<PToTlk]{28<b*!C }8sL+%+w)G,\?A[
K!LMD`*#cHd0+cay*_|x}}[v{Fw.ie'	IGp!>zm>'e7c*|3mr8;7qwi+rF5k	.?g}TVu<<VRWTcDX>9OH|i$G#k>-AtfX7$l'r3b%)#"s$Ct:]m?hF`Q+W}'LC+3ZBd/zZj`V[Wv"}'2Roj#fi`.Spa4:ujTx,#PhJtC][o1Al*6+RU+>8'5zXc<42V0+V;;Zf5l,	1L*7Tjzz$l9M-\|heK'0?m~ics;Tx\KU8^"W/s.NU\^Gj:S$RqLP$HeUHY:h[>5gzu i:{?#FilxJAa$IXk/"$J4)BeFLw9L}eBX3xz/WI
Nq0=^U2,Rz7??w3X1<wGK)n.OQ]M'jkT
[~ @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  $*#FilxJQs)8[]](]HnAS:DC?"BV~wB7j|^~-h_>Hy{YM2vW)E9<;L).a<]I'/b WgjXVvWj4Bc/`'@  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  %*#FilxJQL(xIe`e{$]BIXRR[f6Hb8)%xz	x]<Mr7GO}\=^g<is)bvpX}G2RlO>/_cvVFM= @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @O%j*#FilxA
AQ;2e%+3P`,(0$v?s!Aq{MX<iBxgWYY+!,z<7OYG>?QLsmy0k]L  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ 
x#Filx0PKYt429XJF*2)%~_w/+}IrMp~,uoMo)]8 @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ #Filx!@M6P}*7#p7!8M?>7^~zs?wMU	 @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ v#Filx1
@%vv6V^#xS^ m
@Hl~?Bk>')v{jGsl_['@  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  #Filx@PCH
ct$!C(C6yg3"RW$n<S~.kOo*7a[Uo'@  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  
#Filx  @3c0E;@co-+noK?t  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ _|#Filx  :f@a@;@ccOJ'z[:G  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ / #Filx!  1PA3One|9 @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ <#Filx!  #Rh
@/ nf?"O|ujC @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  .#Filx1  	z;M= @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ X*#Filx1  	p;M= @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ X.#Filx1  i ;= @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ XM#Filx1  Ez9Iv]w  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ^
#Filx1  En9Iv]w  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ^
#Filx1  yD'9Ivw  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ^
b#Filx.QPhPIVTlQvB!*F69?w;;#@ }GT4)b"o~j4Mt'VA(3Xy[P;9#:HK,;a*XLgyt?.i+eQmmC~[ @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ~ o<#Filx?/A UZ`CkZl$XD	LRNzBp @ yG?)bJv8yV/?`^@3JUaEy'7>cqvv|v3_E>GA  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ o<#FilxO+DQK$KJ,$cnb6R`o3
7[U @ @R7?)Y07<jH&Rq_V1|uf;oX=l1(w/{y~R @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ~x>#Filx1jA P7bM )b!
<^D`aAvN im`
  ZGpbg]
fni#7	J8 z2UswMD^_\)*'6[K  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ o%ptg#Filx1DP EQ?X(B$i,D'hdZw$ @ N`gaoW]+#]?<0tn~@  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ nEr#Filx1DP EQDOe: L3 +QE{LM$1	,#M\~|dk'<Y { @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @-pE#Filx@P Q?1  hPZKs'I qs-Gl>$RkMG. @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ WE#Filx@@ +iP@2h{_/#@@~0WRjOIrpvk\AUTq  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ #Filx!  DAfIRB)g>uNe[ @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ xA#Filx QAn	wn=)@_F  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ 'pD#Filx!  DA.
@Sj'%#y(s/$@  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  .J#Filx!  DCzPThC o~arUc<_8}A @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ O #Filx1  yAnP{{5 @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ,)#Filx1  ir0{{5 @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ,*#Filx1  E{{5 @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ,#Filx1  )D,
9Ivw  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ^
]#FilxJAa$IXk/"$J4)BeFLw9L}eBX3xz/WI
Nq0=^U2,Rz7??w3X1<wGK)n.OQ]M'jkT
[~ @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  $*#FilxJQs)8[]](]HnAS:DC?"BV~wB7j|^~-h_>Hy{YM2vW)E9<;L).a<]I'/b WgjXVvWj4Bc/`'@  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  %*#FilxJQL(xIe`e{$]BIXRR[f6Hb8)%xz	x]<Mr7GO}\=^g<is)bvpX}G2RlO>/_cvVFM= @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @O%j*#FilxA
AQ;2e%+3P`,(0$v?s!Aq{MX<iBxgWYY+!,z<7OYG>?QLsmy0k]L  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ 
x#Filx0PKYt429XJF*2)%~_w/+}IrMp~,uoMo)]8 @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ #Filx!@M6P}*7#p7!8M?>7^~zs?wMU	 @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ v#Filx1
@%vv6V^#xS^ m
@Hl~?Bk>')v{jGsl_['@  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  #Filx@PCH
ct$!C(C6yg3"RW$n<S~.kOo*7a[Uo'@  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  
#Filx  @3c0E;@co-+noK?t  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ _|#Filx  :f@a@;@ccOJ'z[:G  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ / #Filx!  1PA3One|9 @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ <#Filx!  #Rh
@/ nf?"O|ujC @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  .#Filx1  	z;M= @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ X*#Filx1  	p;M= @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ X.#Filx1  	p;M= @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ X.#Filx1  i ;= @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ XM#Filx1  Ez9Iv]w  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ^
#Filx1  En9Iv]w  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ^
#Filx1  En9Iv]w  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ^
#Filx1  yD'9Ivw  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ^
b#Filx.QPhPIVTlQvB!*F69?w;;#@ }GT4)b"o~j4Mt'VA(3Xy[P;9#:HK,;a*XLgyt?.i+eQmmC~[ @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ~ o<#Filx?/A UZ`CkZl$XD	LRNzBp @ yG?)bJv8yV/?`^@3JUaEy'7>cqvv|v3_E>GA  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ o<#FilxO+DQK$KJ,$cnb6R`o3
7[U @ @R7?)Y07<jH&Rq_V1|uf;oX=l1(w/{y~R @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ~x>#Filx1jA P7bM )b!
<^D`aAvN im`
  ZGpbg]
fni#7	J8 z2UswMD^_\)*'6[K  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ o%ptg#Filx1DP EQ?X(B$i,D'hdZw$ @ N`gaoW]+#]?<0tn~@  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ nEr#Filx1DP EQDOe: L3 +QE{LM$1	,#M\~|dk'<Y { @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @-pE#Filx@P Q?1  hPZKs'I qs-Gl>$RkMG. @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ WE#Filx@@ +iP@2h{_/#@@~0WRjOIrpvk\AUTq  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ #Filx!  DAfIRB)g>uNe[ @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ xA#Filx QAn	wn=)@_F  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ 'pD#Filx!  DA.
@Sj'%#y(s/$@  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  .J#Filx!  DCzPThC o~arUc<_8}A @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ O #Filx1  yAnP{{5 @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ,)#Filx1  ir0{{5 @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ,*#Filx1  ir0{{5 @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ,*#Filx1  E{{5 @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ,#Filx1  En9Iv]w  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ^
#Filx1  En9Iv]w  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ^
#Filx1  En9Iv]w  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ^
#Filx1  )D,
9Ivw  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ^
]#Filx !Axi t2G^Gacz6l='o_C"@  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ /#Filx !AZ@!sn}|yzt='o_cz6l=$ @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  #Filx1 B1TZE<^}gf`gf`gf`gf`gf`gf`gf`gf`gf`gf`gf`gf`gf`gf`gf`% @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ #Filx  @hQ|eMpp+`5&@  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ v#Filx  @Vr!\H*;Wv
G?Z#a @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  J j#Filx A%O(2l<7]p+>Mmzyjs{Smgv @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @/>M#Filx @@/nF$ssnY/6 @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @@x#Filx @@--fJOb1W8~n @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ 4#Filx1 @A*<w`64Ue_N>]e_N>](  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @x#Filx 00hlfnQ\ @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ >#Filx1 @@*?~}3pnq&6s @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  	<-#Filx1 @@?Q~}3pnq&&{ @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  	<q#Filx1  _4$;B  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ /#Filx1  Y,q @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ #Filx1  I*p @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ /#Filx !@hhO
+zb8|6
N fb';M533_ra_'?X	2H  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ O\#Filx	  Ah])(RzY(g8T_IlG?^ @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ |&pt##Filx 0d
4)89 S+GS  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @;!#Filx1  0/dge*Qo}  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ #Filx  0h97( @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ <#Fil KS kclB    eziS      -ataD  PNG

   IHDR           szz   tEXtSoftware Adobe ImageReadyqe<  yIDATxW[UUZ{s\tt&0/#ZPYt!3J"4!!PJcE	Az@b*Z^gsmk}<?ukJHZGlk(XoPH3I 8q,8~AwkfLo:skxW=>gG`oIxR et
h)AhT	o$zXj(k|Y7<[h,#l9+[)?#8b/@\?#KT(Ct&vsAvl{w%5%5(1[  "QG97l < JI3\bFa$Z\EvCV fbvAcHbxVXTljt"0"z+x  &fhN+4vuah_q0v#Ch|tcQ:&"LPu b~-4 hX"YJMXet60	{ra2n!, e!c# p ^Drd S*MBD.kB8"08
  j@RT"92wN	D@ $vP$}:Y>[e.
 9J";84Ic"M>*ia+5LbW($s  q_I&lE$S:%9UpHtk{^(!T7N_!_L&-3%u%(Gh?n	0CIp`dTl)uM,w'o~Ys6Q=
BTv0cSLic&8x@>E~ID'""Fl76o-u,^9`c%PqLAaEamCUkaLdR1P\G16#Q	T TaCTHpm2*) W5$1UvvI.UD
cbd+#E>N ta&y\<	9OCnB})t)Ei9Tuv(XvWBm9>3IYO@T&HEzT/[97;P-O}|GM[K(I6k=	{Ln:~9|?|~fhVfjUm"ryL:hyu&o4 @;j7TpZhRdLg}A1y=]4~w^+Kit|*`	gvA@'6" <>5u[}-w.`N>O_Y?k}>Gm;wts\;k|g/r
@	2^yY3uO-|
 U45{0 X!j    IENDB` #FilxMhW #IRcb-"H!<jEM&&/jihMKAEGX"Q[V"i7 qn=v{3b7mzF;(QmK8dpG|)e\
R;-J(_	iVN(i	K;8cK['ep~KGe^POyJkmku<wz73	%m+3q#^P	g3ac?o#`V&6~_Wr]9zG/-K~\79;O~?]Y9-Ko~2J7f_9	%2y8TV'eUvn8&lw)]&
5;8EY71.I[@/IMzG.zBNLtBI[QQWC"e'_^3!^k:.D7x^H14_w!>u'mbfj%0sW=,(9WUx+^N08^oO'?bJ>sXfG^RvSGc	gWv`9m6i?weGzK'w|?zk
GWA+                                                                                                               %/4-#Filx_U3s."W `BIRFiiiVEBDaH$1B{w7s{{~3#r:ci`0M`tOM#k^.n!	`0q.&/QvJ#HmQFQT_CmwY{N`{*T^.2] L>|6#}bgKX?u0FjV|Hg"4kZ9jk|O}~\74N	#=+C\X_l4oj{TIo^6{z?#e{S_+@?wd#!6.6/Q77YkJ$;^<wz.t43zuXNes1e*hL~3]<\.MoL-2:/+/tn>&75Y4}.9'+uZ1Kt+te]J`Xbl31iCl]/}z7&	?@	4?aP@U>JpSgx2bx=r#p0kczQ}'>E)MO7gUt/[<Wt[d@ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @vr#FilxoTEgKbW^(5!1DcdJU^-K("x!& XX!h%P/LFI6mm8FMZlrNv&f9s>RoO`ju)Yga'@yT 2l e291isfij/H+d~kwmmq#d=6JK3%;Rl^nC`3|OGv6Teirn}o\-X}BjNj+FYE!8]Kb_Jm%y^j5]_J7:cK]m(zLjOS7FZVygw@_\!-FJ6lEugUPJ756ihijHj/z'OF)_	EM$3oHFG'rg0s':~Zt.;=tU/FZ>]x.?wK^|%l_S+vkx&TwEsm@ enPK,{vqs5'f'	nKmvwkjuF<(lf:^&3wC[':ygg?_hcc_'0%_O6?b{x"+i|M;#Pt,O'|)?,G'r['33wM %}3=\gAOA?"JD@ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @j#Filx;Jqo5,K!H<,+o0h|&SjvofvoX+/AL=d9lgY
3vva)	?~3!O?yghC78u- 8T}< i4?N<wRt:IVu4sd .Q.F+y?Nz+eIp{{._TJIxOxS" @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @> 6\#FilxOagpAq>)$?-6-[(m.lmC6pwPPvLS{s~^}OHbM]J)6nIT`86!*^4\OIZ8o/^Du<SoW+/NSkljjmruITS{/FedN<%FO<?+Og&Q#Of*zx^<%F9w;nYDu93;B!Sl+&ugku*5[|zt}G/	VJ  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ?jPj#FilxAKQ33667DCZEE[!?!	CD$i0"hsqQ mmE-
Lw3z^~K{gm'_-$Q#GY^U<WIL7Wd3Du\0r8WIL3w`nDu\9gm91v~5o_!deum]K:F>w|8.+?Uln~zYIbZ[M58l~o'Q#g&ft{o*3tCtt @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ #R#Filx=Hqm5XPEa7G`pEXad".FHbDAB`*5?}~~mIwLxDej7j*RRp.``iGW}3/SK.g(Ct/Coz)ue?LUEujO~3?5\o{Jt@;osdg!N+ccfwSTu\]*mEQ"('Iy$\xhx7[Kj2f'
O	VJ  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ?sj#Filx=NQ!Bkc eX ,YXZ"!q^{tkSbc:~B?fl#`?0Q<uyE?\E7s*NW4.;P~+/hO^iuGjm/v @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @"0,#Fil KS kclB    eziS      -ataD  PNG

   IHDR           szz   tEXtSoftware Adobe ImageReadyqe<  "iTXtXML:com.adobe.xmp     <?xpacket begin="" id="W5M0MpCehiHzreSzNTczkc9d"?> <x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.0-c061 64.140949, 2010/12/07-10:57:01        "> <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"> <rdf:Description rdf:about="" xmlns:xmp="http://ns.adobe.com/xap/1.0/" xmlns:xmpMM="http://ns.adobe.com/xap/1.0/mm/" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmp:CreatorTool="Adobe Photoshop CS5.1 Windows" xmpMM:InstanceID="xmp.iid:37CAA244A74411E1BE7ED4B9A5CC074F" xmpMM:DocumentID="xmp.did:37CAA245A74411E1BE7ED4B9A5CC074F"> <xmpMM:DerivedFrom stRef:instanceID="xmp.iid:37CAA242A74411E1BE7ED4B9A5CC074F" stRef:documentID="xmp.did:37CAA243A74411E1BE7ED4B9A5CC074F"/> </rdf:Description> </rdf:RDF> </x:xmpmeta> <?xpacket end="r"?>|  vIDATxW[hU5&i*%)Ti|PRA*jB_XZKHBZI&1mff';WljH6m*!g=3g0uae^``l8Q,sUhWu|tF vlszuq9l<X:",2aF(g=jw#i~zoys)	N/D0\7aNYXJ2Y0
^"my/-K^]'G#s:K&1`lLluAzD'NvS5>!@TDn,_fA"XCRK?LX+g*QE~r3$-hy'W93Tcj&\#rC_V#;LBCN5w	3g}~??Ytp:(rBe`D@n%AI<"H,	/0-~_H7dVP9N{+s,%mm_<Dj4Y"lN5,G9OMOU3!)hJ:TM`7RL2%E
4Ef
Fn|wsow r|-60BQ01y6}{w]%bU*gi>PKqB1`rs9\<AMW~b/	NMZVl;PPZNm??|/UaZl6LJ.b]~!V"
q	|~U~-4Bj)G(}Oy-	Q@	-"ApcR MAHBB |9	BfqfR
BO.`
>?f97p67qBv%pNB '$=Uzvz(2^L+bKm8e.{=s:j9s3;ViimyJT^qfZ [~    IENDB` #Filxoqk%[aC$CLABPHE 6A8fL 0X,	/fFWQk/{j<ZU1,vv.bej\<[<	<?~4At'l:_.FZe6a|N o&~uF\ ,,lNzQS;;u'Q}Rwr7w:_>H[MG>Nm3#X)aJ\R|z+e Ip0yr'k=Nu1$)4-={zmo,	jZ{0K[e>{xJONa:ZcQ4| ^vOD+ @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ q?;u#Filx?kaK,lA$8$8*nNEbAPtZMK!5iZ_s<|?	D@78.wfcmq$C{x,-5ImX)Z?hsd ]=UM70*,o4n|Nw'JIoe^>;gFS)I]aX_mw;_a{gWr8{c3G9tJeg@T'[|\dA:06i.s{?[,+|z\:<Z-np22e?Wqaco>L=k4IZyb48;]8P6?u @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  _?z#FilxOA-6@-$`"gxghP>b	P
eR_};;3lbx)V{P?4z[/	,KXkCrZ}g'k,^HtoxG Kk7rF>z"~K`g|y'~(>>ZFc=;xsZN{N@Z=XoGWOw:mNW.@7sfgS U\zo ,7V_ZoVWA2bn63|01].[Ii|E;bGR {o  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ {#FilxOKTQsNI!EDZ.
l"!:IRbbM"ZFR2m<}W @ e[ ?E'|>hF9Gu^^4n7$_*Hw@pe*@vn4?cc	:P]/wmv;<c/(6e!V._/5joLM!?~hlfwW >]|U7N)09~q5>;Yu_=G/-6v	u}{_TkgVfp@  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ 	fV#FilxJQ&ADUv	o1aLvX}q>'~OJ"dweHb>	n-?^ .zu~~:;ir#;W*ZyGQkmn<D^=_9~uY* @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ |&#Filx1JCA]5hDRhxoaWXH!X`-V
\Q|Ik?63;-0-/Tfg1}UNRi4n[rtA,?rl_)fn;=J5_#m{mh @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ !-#Filx1KBQk! th!I%Yf]Q!A9gz+
@h9${{,O5Tw)r5Ct~_s{:p;`\5Bb%Didy}{~w~Nnn>$@  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  O-N0#FilxJBQ@ZhI\ ljsppMGjq"h5~-px8H:$Cj9q'u;<"Z=V;%lo+xS*,Fq,}M?~y;	 @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ,"#Fil KS kclB    eziS      -ataD  PNG

   IHDR           szz   tEXtSoftware Adobe ImageReadyqe<  eIDATxW{lS}^_$qB ERueQT	OZMju[I4MT (ShKA@*N#1Z&qcw;w>30p-: U@>lK7
~4/ tl768p9`-i
JUAXFA.+A.U_u z,KZ|M@3qh<E|]1G^t!"/g_	 =OnlG&Q)}!Rdx?SJUmQyv?wd ")^>H6`Y8@r+6fwq$:^=Q
F|2!,G nt)u29jYjs"x.Wm4w$*.vt7s-F-?%*>w8JU7n;'|ZtI'*2LJaEN^6O[m
}'P.Ve|01wlAih]|z0o~c]j)\WTJWaiCWg;aAK3*$TV&	xH$d*
24*0Hv.Pi=:4M=mVGDIB_KpXaPE:u{#!OgqDJ[1p"*r{x?i( zoqrS3teF[-P[U<d24I/r%76i`dX7jAV81L{iVzlZSFg@JYkb lG#xIDVr"=AjE"s5M6<P~{>zo?cV)=-kJ><-&H#Pm=097c`BgX"`p	XzCbNLHT#[x7C?x;q{lMOz9T?S-,YEW`= &X[1|	FMGYXQ%*8T<:x%v'FP<H\87D<Z.9$mo^zF<!&^d_H`03@>&8tY~rgl 57,za}Q]T+Z9us$5ObA62#=<LKg.5o'aQPpQyg0tJPKihd`"CpBeV2&	u|$'48s_>}$[4%L$l8 kGqfNBq\wttKm$:?6<!y$JJ26*u9<h$qSwVqn`Vqw4B%9T{a]pK Koy    IENDB` #FilxKq c:nmVj`t:DA)RQ"%
/A@]2H`ARMf={~|#C PZ`&$ ToZ;S(GUxlb)pXOTF`+Xs-`bt<!E flDcXOO8kl .f"Ov$VC[-m r5tNXUFK5-_2m9'`*d=0t+{gsBh\|.=yexw9~izm6u=l};gZdDw"Z{9^+U/a.mvrbel+k
qTDP]j%9k2_&CYbE[w237b?	0]?OY_kBz@%R(+uUd|Vv:=w[z@ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ #FilxKKTa3ipFCPBAUj%$E"AQ)i!hT)8hN8s{Z<<@ u;pS8KmqQXZ-kBxBV90pWI-H0tYfV" \]fz9N-% 8qruud#a]|>'bP
#VW1nkP93rz/?v=Q"{3V\/p!k{~ofjr?=[7bj~[_u/Kv2.f$PJKr38]_IB\ax,*'2="~g/mi	B_zfA)m$/m1W(-Y:fU^{v[Q]V3                                                                                                                  E+#Filx1Oz^)Wi-P@V#16'L~ Y&L8MAPk{/{o+! Z +1hg1-djY	@H{Lw*triu=Eugk)  -A]k#Zcu0jr}0. ]y;w7tja(rg&^S_WtUddNCU9>9'kkYGkWsT7lj</*l{j)mh"5h(<-h#WWj^\JovB">tq?OM/8nM:,*cR E:=k7uF<~.
DH1R25[X1/O'"~CT/r,L&b{8	P~XV;hn=[VFWO1                                                                                                                  #u#FilxM+p f5vp\rRnE8HJQJ8;e
;~.@Gt*n6%u]=KtH[( &xe)S=Ep{e'nold#n;_l\.FB4WS+ 6UO"%xpgj @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ 
?#Filx*` o5JuEWrGpspSJjeA.2mxOo Q2~(d3zO`~zY?;t|rE42P^io573GZ5>P/]EH516Wy(G|']Ys5 @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ~U=#Filx+qsP'bJn1MIn31XHe3}+<A8 Dv4I@lCk ;\vo{'S+iz%,NnWbtUkF+7]l3xxz|l__K	 @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ +?9#FilxJBQ@ZhI\ ljsppMGjq"h5~-px8H:$Cj9q'u;<"Z=V;%lo+xS*,Fq,}M?~y;	 @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ ,"#Fil KS kclB    eziS      -ataD  PNG

   IHDR           szz   tEXtSoftware Adobe ImageReadyqe<  "iTXtXML:com.adobe.xmp     <?xpacket begin="" id="W5M0MpCehiHzreSzNTczkc9d"?> <x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.0-c061 64.140949, 2010/12/07-10:57:01        "> <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"> <rdf:Description rdf:about="" xmlns:xmp="http://ns.adobe.com/xap/1.0/" xmlns:xmpMM="http://ns.adobe.com/xap/1.0/mm/" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmp:CreatorTool="Adobe Photoshop CS5.1 Windows" xmpMM:InstanceID="xmp.iid:7CA86D1F54CD11E192DBEE26B37A65A6" xmpMM:DocumentID="xmp.did:7CA86D2054CD11E192DBEE26B37A65A6"> <xmpMM:DerivedFrom stRef:instanceID="xmp.iid:7CA86D1D54CD11E192DBEE26B37A65A6" stRef:documentID="xmp.did:7CA86D1E54CD11E192DBEE26B37A65A6"/> </rdf:Description> </rdf:RDF> </x:xmpmeta> <?xpacket end="r"?>  rIDATxV[HQ&PD-A/1zz(! 	iDU\QW[uggB/{8ofYF01c:H`y^2SbA;Ie	wQ.#\]IAraZn4iZN@q:jV+%ms (zeH]YSaDk?r.m7@]C|	s^)pzB`'fEOE5k"S$v\%3V0edG	bv]|sH33XP "E_6nW/#"r(no dgUWw]""gR]Hvds=UED@q;Y:^LA1nBr[+ !6:2r!:BJS(
,$2	#BG8KdBO+	"cc0jaPT"6W#%r}~aN#!1Py.>S9] AVch)}G
?/^.H"num^1V_9z4'(~]p- %xsAXF#yqk"N/-D?ka.0UC2C8r~G^g&eHBc;."	g.vswwEMT9OW@Y<$=Ol6?#dzfWek'b_E|Oc2]]6"=0 hL/    IENDB` #Filx;kA3M6&ZZ[b:	(QI![% Zf7&y}DX @ 2|K2:6w7o?[?wnf)7/FwR}n||M2?9r(e~zjRJ4e&L'G_gQkRv^hutqPt?,~p~oy3?>\V$|+wI1t-mgK+ics4/r @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ #T#Filxq{n$n)2`!MRM:
uWs3	Eup]~W}zGx @ 2VRZXFW3_\,yp.c~L-uy eSoJi_Lv%w&>t`R6tS)}tJ4JZx:Flj@Y:rg]/v.-zV}.aYX+GV>~643oL~MHfWw_^/	 @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ Z#Filx;kov ).""8tqwng'W/"evicSHhW9 @ dcTQGQ3:h]w32|1?ZOzhCZ;KR>\?9s`V7:)"6(|"|l{XI7`1_v;\.isu1}?m,Gi<\/%N  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ _?[#FilxKUaj
S	B(.-S(&;8ED6[r)"r{cy)Y @ m&_M]fg~+NiV|/g=qvp6q3v]4].r3au 8D[K5bJg}Aq_mSsF_J_6?3fYoo{r4mlf}enZ?:Uj{gsU:R#pC  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ n*p?W#Filx!Ba@_Ej{`+[g6}X,&`0002hx:`6{Rk)U
VYM_/7[eezw,q]|I} @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @?[s#FilxiBa@"q{p2hVv!XY8 bpII.0+S?av{=QneGA*0nm/4~O7~6 @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ W #Filx1a?-Jln4iTB(
ws#@@p'KY0k]~x&l~grnaSoP7>Y}_%zwAvseR]]RzDN  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ S!#Filxi@p`DY+lZZFKt!+RI%n "b . @ ?WVO;_;T#Kom7N*z,IvI#W1,y+)~s} @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @H#FT2J      T|X    7m     L     0!                    VO      Nu      I      r:                              d      a    d/d1                 ~      re    d/4a                 <      g8mh    d/0a&    V            u      @:De    d/32'    
                      d/42                      E`     c/2t                 o      5su    d/17"                 e      X{A    d/f1       W             Y      &    d/2a       g             j      2    d/1by                 >      T    d/67!                 :      aYL    d/e1                 H          d/9a~                       D@    d/b7                 \      SiZ}    d/3a                 <      g8mh    d/f9                 E      CPv    d/8a    S             j      &-e     d/7a                 O      Z    d/5am                       8|M-    d/a6z                 >      .K    d/77    "             =      O    d/0b                 <      8    d/1a                 >      .K    d/c9    W             o      5su    d/59                      7{`    d/6b                 A      Y;p    d/ba}                       A    d/a7                 ;      9    d/ea    q                   -    d/c7                 C      
w    d/ca|    m             <      8    d/97    b             Q          d/aa    G             <      g8mh    d/e9o                       Bl5    d/c6    ~             P      D^L    d/89u    :             P      Q}    d/27p                       O{    d/d6    O             C      r    d/dar                 s      +    d/f6n                       d,    d/b6    2             I      UB    d/3b         )      )      ')     c/3s    J             q      UtH    d/07                 =      ;    d/fa                 Q      |U|    d/2b                 >          d/d9    /             >      T    d/a9    &             P          d/79w                 P      D^L    d/47x    B             Q      .t    d/57q    S             t      5    d/e6                 P      Q}    d/69{    '             >          d/87                 Q      .t    d/99                 R      Y    d/6a    u             >      .K    d/b9    J4            +      dzsv    d/0c^    Bl                   7-    d/b5a    p             |      cF    d/e5    }7                  !~    d/1cv                 P          d/37      	      %                \      +l    d/22$    {            o          d/12   ]    gj                   -    d/a5`    |o             {          d/d5   #    /            D      U    d/02    S                  X    d/bc    J            @      +k     d/7cc    s             N          d/06    ^=                   J    d/4c\    h                   D@    d/95    h;                  Q    d/3c[    f                   A    d/85    T                  &    d/cc                 |      0w    d/e7b    r             p          d/f5l                 <      1:    d/96f    w             P          d/36    s9                  nb    d/2c    O                   B    d/9c_    m             |      0w    d/c5d    Qu             N      N    d/16    jF            9      4    d/5ci    {             >      Hq    d/66g    Uy             >      "    d/46    -            :      P]    d/ebe    v             N      "    d/26k    k~             <      g8mh    d/86    H            J          d/6c    UQ                  %Y    d/acj    '}             <      p    d/76    EM            \      !    d/8ch    z             >      .E    d/56                 q      UtH    d/49    =?     %      %           c/5    $                   J    d/db    -#                  7    d/cb                      A    d/ab    c             s      +    d/39    L                   7-    d/d7    U!                  Z):r    d/bb                 {          d/f7                 t      5    d/29    	             |      cF    d/08                 p          d/18                 N          d/28    [             N      N    d/38                 N      "    d/48                 P          d/58    +                   O{    d/19    _             >      "    d/68                 >      .E    d/78                 >      .E    d/88    1             >      Hq    d/98    w             <      p    d/a8                 <      g8mh    d/b8                 <      g8mh    d/c8    C             <      1:    d/d8                       8|M-    d/e8    h                   d,    d/f8    J                   Bl5    d/09                      G    d/9b                      9P    d/7b    1            ;      >    d/fb    &                 1     c/4                 A      ;S    d/4b    E                  0W    d/8b                 :      	    d/5b          c/          d/Thmb   0         0  PNG

   IHDR         x   	pHYs    +    IDATx{e}g9uNgxlebF/1q $!KBL$@A
 "E
K! Q QP!MH0	ql2{<3kusNVMGez^?	                          3^ *r5_;9o'sXw:g}agnJY1%iQ`r0
?Uk^/a_;52`C9tN}~^ r2lI4c3OCe|$     P 
      P 
      P 
      P 
      P 
      P 
      PS|/V?bU]]M]W*=_UU+{QV2tbL]2?
!<o?'yIQ|	^U{Xs~(i+	.Hwr~tJM}}Z)zwpi+Hx/%   
D  @   
D  @   
D  @   
D  @   
D  @   
D  @   
D  @y)'dZ]fon{8%sNxOH),(8Y=d#|]+uOl9l{Muh5?>{OOH29Igd>vORs)RC)f{) x\%L)HK{s>pk|*xY  P 
      P 
      P 
      P 
      P 
      P 
      P 
   M-2^cWWX1NR4`v65N219s|g7.muo|'_|PRF~I12&RAuH?>:7}P]7]7}AM>x`yIA0U|2:z /2:Nk)I_Emh${@jQ 8+QQ)8S0i
sDuj2^J[JR1J!_Aur|UJAy.Wc7&cXK     @(     @(     @(     @(     @(     @(     @r;}~kn_*k`OE}u}A9{|x6ot[zSkf\+t=8Gv=p9\C,=~UUs~kSS_98)u^imW]Gmox,<::6bCCg1^r#S b`4^(.8.~	2{4/k'zkSJ?ZI1`F.5os*3u  @(     @(     @(     @(     @(     @(     @(   (c8}^70/r_<2uq.Dyovo6_4l5*o=g'}NK}X}o_cetj|@-pOT?1:65NI9m_&=t<\mb8dN)c'\iuw6[mmZCO?nK
R2)t8uc~ O)J9 )e#ORaI3t!i1%|fSu9RTSCP3^j*/eBtn?~Z. P9{rOI
!R#e6$q/.  P 
      P 
      P 
      P 
      P 
      P 
      P 
   :xJ}Z;WWfRGD/i9_5o88p>77.k7_owvLRY9w2?/W9.V}vz}gx6n5~$c4xP9?|wy>m=oQ?Uk^fir;5SlR(?(6qJ@y'^1I]y+O]hA)W<Rw u
JO1f!$9w ^|or^|oCo/@r>bs
s.9i9e%   
D  @   
D  @   
D  @   
D  @   
D  @   
D  @   
D  @N0'uk_}z5W>Q o{4|oy.wN}>r_.4Z9k[*_wN.c;_~bvY\Szkjj9_^m?oH)k|Hy7Q/k/Ug>{^kN?/IsH(g";%}*b1yU*\U*c9];%9qI)fxOCMJ1 bzb;
HJ)@RGr?s.)$W
Ng%9i{'a   (  Q   (  Q   (  Q   (  Q   (  Q   (  Q   (  V~VWJ0*sJkF4=xYV.f.)E8kwF(y>o|^Fpr@|(gIz1/]``.o7_RF;=&S^[P3;wsRD1[og
sfW~Zk~aHZ'8"9[?@sfZzPw_^3}Ug]J,w+5CPc	0k{H)oI^ ]eJ:~{O>Kp	  Q   (  Q   (  Q   (  Q   (  Q   (  Q   (  Q   (P-wkTUe(r>i:h.(uj}sfKRJL2WWZ'Z&MN]g6m(o3wr	uf4^mn_k{r9cw6a|[;_=)8* S@sO&7t3a]|^ H#h3XUTU2
@]jj^eIsRs{(uJ1'_+dBS
s KKQJ9{cZ7zI-p	  Q   (  Q   (  Q   (  Q   (  Q   (  Q   (  Q   (P/|{_uc]X@q;f;sR]S,boW];kv'dGy	5k6kyIYT7To=tms~'n`n?oto9$/13Jonf>wk0/5YIy}>IC);3A\]:qgJ rUS'>sY_jzRo?{j{'W_
Y_u#{>G5G?}gdB\  @   
D  @   
D  @   
D  @   
D  @e eP-YVP},pMMKRZf;oy*K-~
+*Ki{^=z!>NJ/[b^)KQyv1
JwqO
 cxk'6%t.~p>&\JO8^)l	xJ
;o/n/XX{8sn2\  @   
D  @NR^o;5moSJg]7;{:vri{?a??Zezi8f5QPuisu=_oZv	y2rxbiY8:ycq8 9a{JOU-ggc{3My(iAb|c-_./Lco/gr>.q.'/f/wM]eDw+e19sT^k5=95Q:{F b<rKw/`lo?tBK     @(     @(     @(     @(   q NV[,Z2Ws3T^'{^"xjVSd.srB%#]-WysR  &%).Y7V4F]`5?fVz|R1syZ-6js2y&/90}-zl69_lLO9ARz'%   
D  @   
Tdq?|s[+C[7ZkU6qmYsGSX{9(e]3nqozT+7Ylqwz}8.gq(ZpZ[,YXVh{|C~}0#@w;.yxG	K:q'	0:M?n')e/b!-98.c}yaw`$AxbBF>B>,[i?%wlIKEptc}Z-]?9%\  @   
D  @   
D  @   
D  @   
D  @pj]?\TtW8	j_y)u#s>uJ=/bctbu/k^|}]nto{,1QpoiG~0c-*U %
 b\|O)o=rJkwu_%w>aUo|?\/<nEjj|{5.Msi2Xq>n1X}e\  @   
D  @'U<X1l~VX{ak{Y_7.\VZ${=nsmQm_#n]F{CnGia19wPn4/d^ZmowWypsco4Gm.8~Iw zT_g&K[e*	8.\ka6nX*v]!Oy7x-j%8n"WM3J{pKgZOM^w'U
^@B>B@R:fSrKJcR-dS]*3_?]wN\  @   
D  @   
D  @   
D  @   
D  @pRZa5zb>TKW	ru}\uJa48\U.3/-{0Sl+v8?+ywJ-ir_6gV]I  8EIir)cnD&NnvRFuOq,q%:\9 $)c^]Ts{[MwF7|?A/O[v<<	(e?+ p	  Q   (  3M%~#kG;MWXzzk~cKCs	 3=N1)?=RzG{'2]HO_w+1u|W`1 fua^[7H?FeM"}z;=Gf4OSk>t)F8z)<A&3pVUG]7ewe~zq1KcmabI?
q	  Q   (  Q   (  Q   (  Q   (  1ZPsVlvNr{s}Rr^K_Ial%uYwqVK,,\:4?n)<L|U>gf` cdI-&'_j.&skql_;6Ga'h*zw	|o~_SXLgX %   
D  @   
t/Z(okR/>|Zk[=d[\]QXXW]?2`K_}|A4Fq+luQSxvZeu$hbnkIZ6}yg~v`7wjw-X1*%7XV)->8srJJ)-|u eSxl;)- ^t/&g
   (  Q   (  Q   (  Q   (  Q   (Y[	+\X%ya9$CraN#vJ})N[4;u=Ri%-]|
(gjB
 /R1)yU{=Us>vwOr=xyjj|
so9?=};s-z;:wR!%R :I.  P 
      Pv@FGw5Oj?/sC}rq}8txV(*;+wgaUxkt_8ecsG&F\qco6_}I[OC\R)%w3N.-x.b  PIDATS R/^5~;  @(     @(     @(     @(     @J[	1rV{\8\*~XrIqJ+HVw./f&iUVa'p
xmpQR  |Q3UusljyZq||rbeypun?y???1]i;<'s.i[&W.  P 
      P3Q>Jpk_AHUzs9_T~vrnPd(Ku5=\J+ !sw$e>u<~9rhh<0>*N.3!kWVG^  (     @(     @(     @(     @X	2VsU=2L1s5Bw
y{:n23\~z\wY~>{\4[IrWyj?O %b, zoo$nOq.Wg8dv43F;\|;_Wr.[NQr3C~  8(     @drT3J$VZNk	o/3>)?B9!-~x:c N-IUIG2d ;wd.Y<bL'vJQ +      P 
      P 
      P 
      P 
   b%@ /Zao*kU]p.I)g7sUf}.ONNy?\Huc{>&|ibO RN%o}KUa^X\)N3I&NAR1Js'vqt9qcr?U  Q   (  qrOJ+&&3S^i3;,%7]nU[<xw9 ,E NAy?Sg*UNnp:  @(     @(     @(     @(     @X	3vsjNUbIr1o(obF>*82S'u/vQqk|n;6:  x)'|
y}|[@StZ;%))EJR*>mKm Y2D?==cfak[&:\|%\  @   
D  @HBj,3/17G#in_>weDJJWD*x}3K     @(     @(     @(     @(    |9r1,C|d}21L)I\nel?H!g eY;vdYhh ;%;  x)>:yYtJR9gtxST:s~xAn_)s^U
sNgr?=?p53j?yV'%   
D  @   
D  @   
D  @   
D  @   
D  @   
D  @   
D  @Xfh2}S4Y);q7>kJk\3){^Q^39vAdil4Of9?gyk~2nH[:26H|/e}WC}?e/K=W>1rUc~^xIs`=1k~gwL|+ #tXV%   
D  @   
D  @   
D  @   
D  @   
D  @   
D  @   
D  @ (''@P<sMt9o{U`298"f{#s~6pIF~6K{u:  /%M2s@K^RpoFk~7F7G5{F3s~|sGh57~_C8I|n?.  P 
      P 
      P 
      P 
      P 
      P 
      P 
   b0JG7ed%_;tn7})Ro_wd>mk~:7&h;=I/Z}~?9  x$g#R_7`0mKi]1cz3Gp#qk~]5gVF>Hfs]%   
D  @   
D  @   
D  @   
D  @   
D  @   
D  @   
D  @JGqWt{9WW\%16%t<,<7<)ou'e
 W|Ru~'\ofThdno|{>hOq?yH3I!)HfK     @(     @(     @(     @(     @(     @(     @Y!~S[U]o5)uqa6twOYfJ5n*H K[k6k~5k\Uv|9;<<ai.i'#%2.  P 
      P 
      P 
      P 
      P 
      P 
      P 
   b0Wo{;[[;]ih6x][mpUN'D p'}]}y^95VFZ3d~;%%GIJyK     @(     @(     @(     @(     @(     @(     @49e>7zMS]kYCHtjI?Gi5?+.DRg(3 49eW[5_{w|vu}o@SI72sI;(K3K     @(     @(     @(     @(     @(     @(     @T]:WymZaJ.Z],<efGZ%uNyx[
 S[7+IqSRbXk?yII/d[Ip	  Q   (  Q   (  Q   (  Q   (  Q   (  Q   (  Q   (yh	k>Cs=q9x;e/V xU%g$]{b3t+#?O+  @(     @(     @(     @(     @(     @(     @(   (gl& ,32s:kN E%Jb$M3Iyk  @(     @(     @(     @(     @(   j{    IENDB`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  INDX( 	 2            (            e x                     p `         ?MX Pf~0^NX      u              C o n s t a n t _ 1 6 x . a i      j         NX P|NX                       C o n s t a n t _ 1 6 x . a i . m e t a           p `         !OX PQ{:LPX p     a              E n u m I t e m _ 1 6 x . a i      j         PX P|zPX                       E n u m I t  m _ 1 6 x . a i . m e t a           p ^         cQX PyQX                    E v e n t s . a f p h o t o       x h         QX P7xQX                       E v e n t s . a f p h o t o . m e t a      n         fKRX PhwySX                    E x t e n s i o n M e t h o d _ 1 6 x . a i        x         SX P&vSX                       E x t e n s i o n M e t h o d _ 1 6  . a i . m e t a     p Z         =TX P=uiTX                     F i e l d _ 1 6 x . a i           x d         rCUX PsyjUX                       F i e l d _ 1 6 x . a i . m e t a          l         ^UX Pr^UX @      1               F l o w P o r t s _ 1 2 x . a f p h o t o          v         VX PQq-VX                       F l o w P o r t s _ 1 2 x . a f p h o t o . m e t a      x d         {VX Pp{VX       N{               F l o w P o r t s _ 1 2 x . p s d          n         VX PuoVX                      F l o w P o r t s _ 1 2 x . p s d . m e t a        l         >WX P:nteWX @      3               F l o w P o r t s _ 2 4 x . a f p h o t o           v         XX PPmXX                       F l o w P o r t s _ 2 4 x . a f p h o t o . m e t a                    aYX P@laYX                      F l o w P o r t s _ 2 4 x . p s d          n         gYX PJjgYX                      F l o w P o r t s _ 2 4 x . p s d . m e t a       p ^         %ZX P`iOZX       *               G r a p h G r o u p . p s d       x h         ZX PshZX                      G r a p h G r o u p . p s d . m e t a      p         [X  P+Gg\X      y              I c o n s _ 1 6 x _ 7 2 d p i . a f p h o t o      z         -]X P%fiA]X                       I c o n s _ 1 6 x _ 7 2 d p i . a f p h o t o . m e t a           x h         ]X P<e`X @	     ;	              I c o n s _ 1 6 x _ 7 2 d p i . p s d      r         ``X Pc``X                      I c o n s _ 1 6 x _ 7 2 d p i . p s d . m e t a       	     p        `X PdbcX p     i              I c o n s _ 3 2 x _ 7 2 d p i . a f p h o t o 
     z         dX PadX                       I c o n s _ 3 2 x _ 7 2 d p i . a f p h o t o . m e t a           x h         8eX P`^+iX       6              I c o n s _ 3 2 x _ 7 2 d p i . p s d      r         s{iX P2_s{iX                      I c o n s _ 3 2 x _ 7 2 d p i . p s d . m e t a          p \         ~iX PD]^kX      x              M e t h o d _ 1 6 x . a i         x f         fkX P\kX                       M e t h o d _ 1 6 x . a i . m e t a       x b         kX Pi[lX                    N a m e s p a c e _ 1 6 x . a i            l         lX PrZmX                       N a m e s p a c e _ 1 6 x . a i . m e t a                                  8BPS              	        T8BIM     Z %GZ %GZ %G   8BIM%     ,XJ+S{q8BIM$    9<?xpacket begin="" id="W5M0MpCehiHzreSzNTczkc9d"?>
<x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.6-c138 79.159824, 2016/09/14-01:09:01        ">
   <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
      <rdf:Description rdf:about=""
            xmlns:xmp="http://ns.adobe.com/xap/1.0/"
            xmlns:dc="http://purl.org/dc/elements/1.1/"
            xmlns:xmpMM="http://ns.adobe.com/xap/1.0/mm/"
            xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#"
            xmlns:photoshop="http://ns.adobe.com/photoshop/1.0/">
         <xmp:CreatorTool>Adobe Photoshop CS6 (Windows)</xmp:CreatorTool>
         <xmp:CreateDate>2017-01-18T19:54:28-05:00</xmp:CreateDate>
         <xmp:MetadataDate>2017-05-04T21:27:24-04:00</xmp:MetadataDate>
         <xmp:ModifyDate>2017-05-04T21:27:24-04:00</xmp:ModifyDate>
         <dc:format>application/vnd.adobe.photoshop</dc:format>
         <xmpMM:InstanceID>xmp.iid:b16b2fbd-485f-e540-9eb9-22ad507b6617</xmpMM:InstanceID>
         <xmpMM:DocumentID>xmp.did:2DE14FD4E1DDE611BB2A826F4C600E0D</xmpMM:DocumentID>
         <xmpMM:OriginalDocumentID>xmp.did:2DE14FD4E1DDE611BB2A826F4C600E0D</xmpMM:OriginalDocumentID>
         <xmpMM:History>
            <rdf:Seq>
               <rdf:li rdf:parseType="Resource">
                  <stEvt:action>created</stEvt:action>
                  <stEvt:instanceID>xmp.iid:2DE14FD4E1DDE611BB2A826F4C600E0D</stEvt:instanceID>
                  <stEvt:when>2017-01-18T19:54:28-05:00</stEvt:when>
                  <stEvt:softwareAgent>Adobe Photoshop CS6 (Windows)</stEvt:softwareAgent>
               </rdf:li>
               <rdf:li rdf:parseType="Resource">
                  <stEvt:action>saved</stEvt:action>
                  <stEvt:instanceID>xmp.iid:2EE14FD4E1DDE611BB2A826F4C600E0D</stEvt:instanceID>
                  <stEvt:when>2017-01-18T19:54:53-05:00</stEvt:when>
                  <stEvt:softwareAgent>Adobe Photoshop CS6 (Windows)</stEvt:softwareAgent>
                  <stEvt:changed>/</stEvt:changed>
               </rdf:li>
               <rdf:li rdf:parseType="Resource">
                  <stEvt:action>saved</stEvt:action>
                  <stEvt:instanceID>xmp.iid:b16b2fbd-485f-e540-9eb9-22ad507b6617</stEvt:instanceID>
                  <stEvt:when>2017-05-04T21:27:24-04:00</stEvt:when>
                  <stEvt:softwareAgent>Adobe Photoshop CC 2017 (Windows)</stEvt:softwareAgent>
                  <stEvt:changed>/</stEvt:changed>
               </rdf:li>
            </rdf:Seq>
         </xmpMM:History>
         <photoshop:ColorMode>3</photoshop:ColorMode>
         <photoshop:ICCProfile>sRGB IEC61966-2.1</photoshop:ICCProfile>
      </rdf:Description>
   </rdf:RDF>
</x:xmpmeta>
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                            
<?xpacket end="w"?>8BIM:                printOutput       PstSbool    Inteenum    Inte    Clrm   printSixteenBitbool    printerNameTEXT        printProofSetupObjc    P r o o f   S e t u p     
proofSetup       Bltnenum   builtinProof   	proofCMYK 8BIM;    -           printOutputOptions       Cptnbool     Clbrbool     RgsMbool     CrnCbool     CntCbool     Lblsbool     Ngtvbool     EmlDbool     Intrbool     BckgObjc         RGBC       Rd  doub@o         Grn doub@o         Bl  doub@o         BrdTUntF#Rlt            Bld UntF#Rlt            RsltUntF#Pxl@R         
vectorDatabool    PgPsenum    PgPs    PgPC    LeftUntF#Rlt            Top UntF#Rlt            Scl UntF#Prc@Y         cropWhenPrintingbool    cropRectBottomlong       cropRectLeftlong       cropRectRightlong       cropRectToplong     8BIM      H     H    8BIM&               ?  8BIM     Transparency 8BIM         T r a n s p a r e n c y  8BIM5                 d 8BIM         8BIM     
    8BIM        x8BIM        8BIM     	         8BIM'     
        8BIM     H /ff  lff       /ff         2    Z         5    -        8BIM     p                8BIM       8BIM                   8BIM0      8BIM-         8BIM          @  @    8BIM         8BIM    5                 	                                     	                                               null      boundsObjc         Rct1       Top long        Leftlong        Btomlong       Rghtlong   	   slicesVlLs   Objc        slice      sliceIDlong       groupIDlong       originenum   ESliceOrigin   autoGenerated    Typeenum   
ESliceType    Img    boundsObjc         Rct1       Top long        Leftlong        Btomlong       Rghtlong   	   urlTEXT         nullTEXT         MsgeTEXT        altTagTEXT        cellTextIsHTMLbool   cellTextTEXT        	horzAlignenum   ESliceHorzAlign   default   	vertAlignenum   ESliceVertAlign   default   bgColorTypeenum   ESliceBGColorType    None   	topOutsetlong       
leftOutsetlong       bottomOutsetlong       rightOutsetlong     8BIM(        ?      8BIM    H  HLino  mntrRGB XYZ   	  1  acspMSFT    IEC sRGB                  -HP                                                 cprt  P   3desc     lwtpt     bkpt     rXYZ     gXYZ  ,   bXYZ  @   dmnd  T   pdmdd     vued  L   view     $lumi     meas     $tech  0   rTRC  <  gTRC  <  bTRC  <  text    Copyright (c) 1998 Hewlett-Packard Company  desc       sRGB IEC61966-2.1           sRGB IEC61966-2.1                                                  XYZ       Q    XYZ                 XYZ       o  8  XYZ       b    XYZ       $    desc       IEC http://www.iec.ch           IEC http://www.iec.ch                                              desc       .IEC 61966-2.1 Default RGB colour space - sRGB           .IEC 61966-2.1 Default RGB colour space - sRGB                      desc       ,Reference Viewing Condition in IEC61966-2.1           ,Reference Viewing Condition in IEC61966-2.1                          view      _.    \   XYZ      L	V P   Wmeas                            sig     CRT curv           
     # ( - 2 7 ; @ E J O T Y ^ c h m r w |                         %+28>ELRY`gnu|&/8AKT]gqz !-8COZfr~ -;HUcq~+:IXgw'7HYj{+=Oat2FZn		%	:	O	d	y						

'
=
T
j





"9Qi*C\u&@Zt.Id	%A^z	&Ca~1Om&Ed#Cc'Ij4Vx&IlAe@e Ek*Qw;c*R{Gp@j>i  A l   !!H!u!!!"'"U"""#
#8#f###$$M$|$$%	%8%h%%%&'&W&&&''I'z''((?(q(())8)k))**5*h**++6+i++,,9,n,,--A-v--..L.../$/Z///050l0011J1112*2c2233F3334+4e4455M555676r667$7`7788P8899B999:6:t::;-;k;;<'<e<<="=a==> >`>>?!?a??@#@d@@A)AjAAB0BrBBC:C}CDDGDDEEUEEF"FgFFG5G{GHHKHHIIcIIJ7J}JKKSKKL*LrLMMJMMN%NnNO OIOOP'PqPQQPQQR1R|RSS_SSTBTTU(UuUVV\VVWDWWX/X}XYYiYZZVZZ[E[[\5\\]']x]^^l^__a_``W``aOaabIbbcCccd@dde=eef=ffg=ggh?hhiCiijHjjkOkklWlmm`mnnknooxop+ppq:qqrKrss]sttptu(uuv>vvwVwxxnxy*yyzFz{{c{|!||}A}~~b~#G
k0WGr;i3d0c1f6n?zM _4
uL$hBd@iG&vV8nR7u\D- u`K8%yhYJ;.!
zpg_XQKFA=:8655679<?DINU\dlv)6DScs2F[p(@Xr4Pm8Ww)Km8BIM        8BIM    2      	        P     Adobe_CM  Adobe d     			
   	"   ?          	
         	
 3 !1AQa"q2B#$Rb34rC%Scs5&DTdEt6UeuF'Vfv7GWgw 5 !1AQaq"2B#R3$brCScs4%&5DTdEU6teuFVfv'7GWgw   ? TI%?8BIM!     ]       A d o b e   P h o t o s h o p    A d o b e   P h o t o s h o p   C C   2 0 1 7    8BIM"    2MM *                  b       j(       1    "   r2       i           
  ' 
  'Adobe Photoshop CC 2017 (Windows) 2017:05:04 21:27:24                	                           "      *(             2               H      H   8BIM    maniIRFR   8BIMAnDs               null       AFStlong        FrInVlLs   Objc         null       FrIDlong5b    FStsVlLs   Objc         null       FsIDlong        AFrmlong        FsFrVlLs   long5b    LCntlong      8BIMRoll              !  8BIM     Dmfri                                                              %|  %P                  f     2    2    28BIMnorm 
   <       (                    Layer 18BIMluni       L a y e r   1  8BIMlnsr   layr8BIMlyid      8BIMclbl      8BIMinfx       8BIMknko       8BIMlspf       8BIMlclr           8BIMshmd   H   8BIMcust       4           metadata      	layerTimedoubAB?&W^ 8BIMfxrp                                                    8BIMnorm    0       (                    </Layer group> 8BIMluni        < / L a y e r   g r o u p >8BIMlnsr   lset8BIMlyid      8BIMlsct      8BIMlspf       8BIMlclr           8BIMshmd   H   8BIMcust       4           metadata      	layerTimedoubAB?&W 8BIMfxrp                             
         2    2    2   8BIMnorm                 
      (                    	Ellipse 1  8BIMvscg   tSoCo            null       Clr Objc         RGBC       Rd  doub@k@       Grn doub@k@       Bl  doub@k@   8BIMvsms                                                                                         9N            C  J                  C          9N              J      8BIMluni      	 E l l i p s e   1  8BIMlnsr   shap8BIMlyid      8BIMclbl      8BIMinfx       8BIMknko       8BIMlspf       8BIMlclr           8BIMshmd   H   8BIMcust       4           metadata      	layerTimedoubAB?&W 8BIMvstk  <           strokeStyle      strokeStyleVersionlong      strokeEnabledbool   fillEnabledbool    strokeStyleLineWidthUntF#Pxl?         strokeStyleLineDashOffsetUntF#Pnt           strokeStyleMiterLimitdoub@Y         strokeStyleLineCapTypeenum   strokeStyleLineCapType   strokeStyleButtCap   strokeStyleLineJoinTypeenum   strokeStyleLineJoinType   strokeStyleMiterJoin   strokeStyleLineAlignmentenum   strokeStyleLineAlignment   strokeStyleAlignInside   strokeStyleScaleLockbool    strokeStyleStrokeAdjustbool    strokeStyleLineDashSetVlLs       strokeStyleBlendModeenum    BlnM    Nrml   strokeStyleOpacityUntF#Prc@Y         strokeStyleContentObjc        solidColorLayer       Clr Objc         RGBC       Rd  doub@o         Grn doub@o         Bl  doub@o        strokeStyleResolutiondoub@R      8BIMfxrp           ?      8BIMlyvr                     B    B    B   8BIMnorm                   (                    	Polygon 1  8BIMvscg   tSoCo            null       Clr Objc         RGBC       Rd  doub@k@       Grn doub@k@       Bl  doub@k@   8BIMvsms                                                                                     wj wj wj     8BIMluni      	 P o l y g o n   1  8BIMlnsr   shap8BIMlyid      8BIMclbl      8BIMinfx       8BIMknko       8BIMlspf       8BIMlclr           8BIMshmd   H   8BIMcust       4           metadata      	layerTimedoubAB?&X5 8BIMvstk  <           strokeStyle      strokeStyleVersionlong      strokeEnabledbool   fillEnabledbool    strokeStyleLineWidthUntF#Pxl?         strokeStyleLineDashOffsetUntF#Pnt           strokeStyleMiterLimitdoub@Y         strokeStyleLineCapTypeenum   strokeStyleLineCapType   strokeStyleButtCap   strokeStyleLineJoinTypeenum   strokeStyleLineJoinType   strokeStyleMiterJoin   strokeStyleLineAlignmentenum   strokeStyleLineAlignment   strokeStyleAlignInside   strokeStyleScaleLockbool    strokeStyleStrokeAdjustbool    strokeStyleLineDashSetVlLs       strokeStyleBlendModeenum    BlnM    Nrml   strokeStyleOpacityUntF#Prc@Y         strokeStyleContentObjc        solidColorLayer       Clr Objc         RGBC       Rd  doub@o         Grn doub@o         Bl  doub@o        strokeStyleResolutiondoub@R      8BIMfxrp   @
z@-8BIMlyvr                
         2    2    2   8BIMnorm                 
      (                    Ellipse 1 copy 8BIMvscg   tSoCo            null       Clr Objc         RGBC       Rd  doub@o         Grn doub@o         Bl  doub@o     8BIMvsms                                                                                         9N            C  J                  C          9N              J      8BIMluni        E l l i p s e   1   c o p y8BIMlnsr   shap8BIMlyid      	8BIMclbl      8BIMinfx       8BIMknko       8BIMlspf       8BIMlclr           8BIMshmd   H   8BIMcust       4           metadata      	layerTimedoubAB?&X_ 8BIMvstk  <           strokeStyle      strokeStyleVersionlong      strokeEnabledbool   fillEnabledbool   strokeStyleLineWidthUntF#Pxl?         strokeStyleLineDashOffsetUntF#Pnt           strokeStyleMiterLimitdoub@Y         strokeStyleLineCapTypeenum   strokeStyleLineCapType   strokeStyleButtCap   strokeStyleLineJoinTypeenum   strokeStyleLineJoinType   strokeStyleMiterJoin   strokeStyleLineAlignmentenum   strokeStyleLineAlignment   strokeStyleAlignInside   strokeStyleScaleLockbool    strokeStyleStrokeAdjustbool    strokeStyleLineDashSetVlLs       strokeStyleBlendModeenum    BlnM    Nrml   strokeStyleOpacityUntF#Prc@Y         strokeStyleContentObjc        solidColorLayer       Clr Objc         RGBC       Rd  doub@o         Grn doub@o         Bl  doub@o        strokeStyleResolutiondoub@R      8BIMfxrp           ?      8BIMlyvr                     B    B    B   8BIMnorm                   (                    Polygon 1 copy 8BIMvscg   tSoCo            null       Clr Objc         RGBC       Rd  doub@o         Grn doub@o         Bl  doub@o     8BIMvsms                                                                                     wj wj wj     8BIMluni        P o l y g o n   1   c o p y8BIMlnsr   shap8BIMlyid      
8BIMclbl      8BIMinfx       8BIMknko       8BIMlspf       8BIMlclr           8BIMshmd   H   8BIMcust       4           metadata      	layerTimedoubAB?&X 8BIMvstk  <           strokeStyle      strokeStyleVersionlong      strokeEnabledbool   fillEnabledbool   strokeStyleLineWidthUntF#Pxl?         strokeStyleLineDashOffsetUntF#Pnt           strokeStyleMiterLimitdoub@Y         strokeStyleLineCapTypeenum   strokeStyleLineCapType   strokeStyleButtCap   strokeStyleLineJoinTypeenum   strokeStyleLineJoinType   strokeStyleMiterJoin   strokeStyleLineAlignmentenum   strokeStyleLineAlignment   strokeStyleAlignInside   strokeStyleScaleLockbool    strokeStyleStrokeAdjustbool    strokeStyleLineDashSetVlLs       strokeStyleBlendModeenum    BlnM    Nrml   strokeStyleOpacityUntF#Prc@Y         strokeStyleContentObjc        solidColorLayer       Clr Objc         RGBC       Rd  doub@o         Grn doub@o         Bl  doub@o        strokeStyleResolutiondoub@R      8BIMfxrp   @
z@-8BIMlyvr                                       8BIMnorm    (       (                    Group 18BIMluni       G r o u p   1  8BIMlnsr   lset8BIMlyid      8BIMlsct      8BIMpass    8BIMlspf       8BIMlclr           8BIMshmd   H   8BIMcust       4           metadata      	layerTimedoubAB?&X 8BIMfxrp                                                                              ))))))))))))             999999999999                        [w[     UjDjU   <   :                                  =   :   UiDiU     ]x]                                                                     [w[     UU   <:          =:   UU     ]x]                   	 
       
 	      "  	  `L    "    1	     `L    _M    0	     #  `M  	  #                                                           	 	 	 
   
 	 	 	      "  	  L  "  	   L  M  	   #  M  	  #                   [w[     UU   <:          =:   UU     ]x]                                                                     [w[     UU   <:          =:   UU     ]x]                   	 	 	 
   
 	 	 	      "  	  L  "  	   L  M  	   #  M  	  #                                                           	 	 	 
   
 	 	 	      "  	  L  "  	   L  M  	   #  M  	  #                 8BIMPatt    8BIMFMsk            2                                       
 
       
 
   [w[   UU <:        =: UU  ]x]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      KA
  nsrP#Inf      W                    Z       
   Prot   #Filx<m#UULp-'YXZ=3`wE Z!(
HDt1@	!GDDHChymx<3;4W{UW!~F%p%Q Ymk	ZZOdt);m,	"/FO/f:&!w\w5z+,+2[5  5D:ov1$bAQ	i
 7kBHuq2E!I$
lN,$b&HE)S+xnkg)hl'6u6.X*K\z{B'\$|Z{'dr $9e\Dvwh!WB&lcV=U6-N~ R-~(73!A{h,hr?X{@~r=<w(73}lPnv [WZ0@$KCkO@N]sg.&smZtSASBkrKD8OCGuOe\DMd3/[E
[
&MSwFc5;eL&L	g d28"cTK]g,Z\c2\;"l`H5fj)KJK#bN<f`<_T^GB-s?	w L#gr @98"~"n9"auR:pDCYL%1
C  =$?:+@^4rrMWR/U0XSb=hs5]aTA.uXRX UOXYz-lV,&l&x.YgsP9Y,dk|P))P2B?z)O!e<*i=l!L`g}bf"7+t?3aq4:\;Z!3$.D'X*MRQHfZ.)d6.#$B_ge4>V`1'l0(p&-5O'bL9\J%BL`f,3y1]%/\ 
rT3t.2` e{b|9X( s
nH+@
DR/{H}ci0=gkc{Fh'
AB[O+Y<$ha<OaCwHp8Kp c c [P/bN&`N%bB)#Y$yB?@B<Zj(QkCz^D~[rY0rGBPJfrUl6[#]/g}xyj5;B_E,	q[+!'b( ^C\A
__mX'f^~9b]$aX$z~~hbL#rC1*!ktXPK-LCQm`	!&No+Ku\mTSVem(t.
pm!{.t %A=I{M 5DTg {=kbH5vk#l1`tr1W=	Q=kuk0)"}h 
9}uQ%gS\E#\0}[G<Okyv 29"?/E2A3z? QAbr{%r9l V3R}u]YV~XJi*}Ffdl5gXD/"8IYh0Lw0$GC8eIJ0;3
.VX4NST^$t~r!a5IkP~u{!skf7@#pK,2jys55%xr]S.w]eHfS}F!]Q=gXSg_b}AbQ[f0c'EcV3)cp_g?~?^_+?/E,M@(sR[7/-Y?[i__?+?6_$wtP>G^7t1mw\mLF\nX8]'d(!cxcE.=>D[o#f%k15p
 9V U5QCWGLP.xv$dLg9%H?*I0:%<k''kD9(uPBy$^tMfe1b]XxAvNpW#oY0tgs0`dg7H9pas=(@na$S&-Ha6~2e(Ae/p~pz+8LOc[En#Lx0V_T]5~O,?mk,qCNW_B2&e?71y#g#UU@9ax$0L`B`b{5fB81s::	UZwT
3'PJpwXz	M<6N[h]@
chEF8vDjge*@MZ(So3&:'3-Ifm\WQQEO2S
 h:6D Y`W9#Ot AAH}F	|u%rN9 #TW]mMYP;.	RB-->H+v/T~0;EAio$|e1U>CfV" VjyrJ NzT,*X>m\}!!$v:/UoOEE9.<2a{bSESY%\YZk4<`l`GcG8bFbMet "D%nH A6qod9mK&nwiVM&Se~#:OA{(QveByMm[7/M_KFa~)7:ty!:?{{_V60S1F]4hDblzz\Kv]<{.Zv+J4p0P$I}2#inmO(WvKX0LwycRfIL^iN
b=\&!zW=42mm-\kh'5<{hp5Kecgc<(kNt4eU4Xscuk8hG4I>i.\i.tn.	)d4l,,OJIRV(C2-jQSn`!OHCfGK\VRQKZB"W-e.g
j4GJVggA byee)[$	
_-y9+ZZT#D~DCv|aUp
^SaSyN-t|v!g/oG3O (FuTGn6o}YES Wf\fYGVQm A:b3r~a9-dS#	qEX[-E!Vy'Y.,&D9u <Gp]|R5\<zdp8s>m=Tvm5N5cCa5vqxD+#F>f6OX 5<qI=IcW2u~JkL!'gd>WBN>W+=I]QQ3!WZr3D6@s "{Mf?766DQfk~GQU#FilxA !A|_8Tz?}Pem_T/vY[]VE.V @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @T#FilxA !A_9Tz?}Pem_T/vY[]VE.V @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @t#Filx1 !Al?x[o`07z[GvY[]VE.koU}QJ  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ #Filx@@8
.* h dNcw)-9_b[/tT/GcYBd?vj/GpyG  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ x0#Filx @g-kNTjRkzrv,jS'PO3" @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ KS#Filx1 @@?;pN^bMFIX$Odic! @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  07A#Filx @g+DAO/9=&'n&?U(zkEOt?/ @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ >d#Filx!0P	33``0wTtPO`Cfi @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @  @ XO#FT2        Z    W                    	              H       B            Fa    doc.dat    )             g      =D    d/1                 g      3c    d/2                 g      9    d/3    v                   6    d/4                 ]      #    d/5    c             P          d/6                 \      [JM    d/7	                 `      0\    d/8          d/Thmb   '           PNG

   IHDR           	pHYs    +  IDATx;n& V1:xiL4v8'6C-L                                                                                                             x<??_x<o?X9)I~y%qGy~b$%' ;}0"BA_BvVB``h/D`#Xi/D V9@ V88/$ _(!+'!F/D!t/D!L_!L_;!L_t/Di4xE r/D<x> BV#L!_Li/Da4:#0e 1m@'/Tl"@w:t& BF*S_ |D` 2Yb!4g_a0/Df:#0d p1l$n3/Pl"&p& B*C`_ |D  1?"]K(g}Pt p_t t t ?t _B/M/%|"MBG S fOt`lL_4 Esh& V"0"D D`	D S0M&`&1M5wA`p[.tw\ %, k"K#pI DE @P.0C!`&1C;5OA`pZ`"72S9%0S)G, j"p!?'8 +"p"+%8 ;Dw >!?8]0 ?+ 6? v?;l ?l 

#soI8a)Ko388B>`)-7K[J_yT)Jm=_Re%
_	Re!
#Tp;:t;GL)"f(tf*~M#V(Tr+U?p#*	Se
FWdz"nB7Q%<[)pd)e N)PW)t?2:
uoB-P)t[;
5oB~0PS)t'39
5oB4)t[g:
r80nD(tyW qHY
n@(uAy}8,JrX( $RmRO
@(Urh$ $R[Ps4QjyjrF8@Jm:@oBp HUQO@ )Azkj~8LJ{ $R?En?( C$<7E?, PGu7IHD hJtD&t;IHD UtD[t? HD DK3@HD 8PDS7HD (5' DCd $" 2' `)?$  L3DHD TLDwM7HD LD$2q M=HD &5'D`2I D `_WD f7D d!  |@`	/D dWD bWD `7D f7D dwD bwD `D neD na@K"PD 8/& D NaO  '(eO" '(aO$ '8L N& \@`*Bp!O	D eo  7 D  H Lo 4@o 4Bo 4Do 4Fo 4Ho 4Jo 4Lo 4N t@ tB tDh tFh tHh tJh tL tN @ B D8 F8 H(f  +U` ``@`  s c@SF@C@3F@#@gN@G@'qN@a@QA@A@1A@!@cI@C@#fI@F&~ 7x@ .dS"p1UDBpEdv?"'(!'(%'bN!'BN%K@!(`R"PD 2p(  $ ;h  ;h$ h  hl$ +l  +$ _0%XA >ak"!'"7?I! ! O @?LF)@&Mi`L)`Wt0;T0'40
SE` `i"0| ?: 8` :Cp0	P0000@0@0@0@@0@C@w0Q]F 0WMqoIx<@705oB]J 8P
{@p05
u ) 9
5f)=
5& ) A
5(tE
5(Trp$@3ph*=4oBME 80
r`(pX:U
5[(tAy=!QCv)tkn	-S\ C[?{)t[4 BiMS7}Y 
MK%p jj8.{aP_x AS7Z OS)p jnB@y <|
u9@Sn4 <PMCp* xjnBe7r8 6[P
Mf(tfvCp;:t;Sh_!
p)4/v xznBoju <T
W6 x2pcZ}c?O<L3x3#fim /_?0_-$Hyv///Z_ [D6 D"?"W`]^@"G!?9@E	Dw "D0_@H'?Xe/$S+0 L@T:Iq L|$D`
rR oON@"2!:HD`0a"0?  w@p' @. $")!\D:c;&]|@' DrS h4On@"2&:HD1`"?i  4O@'  $"p?!ES4D.f'&jnE?"p&?i4 o"pf?i8 DMx (fj~@DDtD2&t3IGHD`'f"KWtD62&t7IHD`%a"JtD`)#v?D]]y xsAD?$2H #`fL&Pdn3Yd $DsI"0' >fa?8 04g=HYE`O&@2L?$S2I #`FftOw:TLYd $DN"0' i>a4i?8 I0L=HgXE`O I30'x9i rS?)xuq;E3"`?  89N |x/#`0+
E0`0`0`0`0p`/"`0DC"`xxx<~>Txy	j\j                                                                                                           ZxkN2    IENDB`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  8BPS                      az8BIM     Z %G   8BIM%     +@){<*[8BIM$    :<?xpacket begin="" id="W5M0MpCehiHzreSzNTczkc9d"?>
<x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.3-c011 66.145661, 2012/02/06-14:56:27        ">
   <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
      <rdf:Description rdf:about=""
            xmlns:xmp="http://ns.adobe.com/xap/1.0/">
         <xmp:CreatorTool>Adobe Photoshop CS6 (Windows)</xmp:CreatorTool>
         <xmp:CreateDate>2017-01-18T19:54:28-05:00</xmp:CreateDate>
         <xmp:MetadataDate>2017-01-20T01:54:06-05:00</xmp:MetadataDate>
         <xmp:ModifyDate>2017-01-20T01:54:06-05:00</xmp:ModifyDate>
      </rdf:Description>
      <rdf:Description rdf:about=""
            xmlns:dc="http://purl.org/dc/elements/1.1/">
         <dc:format>application/vnd.adobe.photoshop</dc:format>
      </rdf:Description>
      <rdf:Description rdf:about=""
            xmlns:xmpMM="http://ns.adobe.com/xap/1.0/mm/"
            xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#">
         <xmpMM:InstanceID>xmp.iid:4C454798D6DEE611A375A2BC1A88F146</xmpMM:InstanceID>
         <xmpMM:DocumentID>xmp.did:2DE14FD4E1DDE611BB2A826F4C600E0D</xmpMM:DocumentID>
         <xmpMM:OriginalDocumentID>xmp.did:2DE14FD4E1DDE611BB2A826F4C600E0D</xmpMM:OriginalDocumentID>
         <xmpMM:History>
            <rdf:Seq>
               <rdf:li rdf:parseType="Resource">
                  <stEvt:action>created</stEvt:action>
                  <stEvt:instanceID>xmp.iid:2DE14FD4E1DDE611BB2A826F4C600E0D</stEvt:instanceID>
                  <stEvt:when>2017-01-18T19:54:28-05:00</stEvt:when>
                  <stEvt:softwareAgent>Adobe Photoshop CS6 (Windows)</stEvt:softwareAgent>
               </rdf:li>
               <rdf:li rdf:parseType="Resource">
                  <stEvt:action>saved</stEvt:action>
                  <stEvt:instanceID>xmp.iid:2EE14FD4E1DDE611BB2A826F4C600E0D</stEvt:instanceID>
                  <stEvt:when>2017-01-18T19:54:53-05:00</stEvt:when>
                  <stEvt:softwareAgent>Adobe Photoshop CS6 (Windows)</stEvt:softwareAgent>
                  <stEvt:changed>/</stEvt:changed>
               </rdf:li>
               <rdf:li rdf:parseType="Resource">
                  <stEvt:action>saved</stEvt:action>
                  <stEvt:instanceID>xmp.iid:4C454798D6DEE611A375A2BC1A88F146</stEvt:instanceID>
                  <stEvt:when>2017-01-20T01:54:06-05:00</stEvt:when>
                  <stEvt:softwareAgent>Adobe Photoshop CS6 (Windows)</stEvt:softwareAgent>
                  <stEvt:changed>/</stEvt:changed>
               </rdf:li>
            </rdf:Seq>
         </xmpMM:History>
      </rdf:Description>
      <rdf:Description rdf:about=""
            xmlns:photoshop="http://ns.adobe.com/photoshop/1.0/">
         <photoshop:ColorMode>3</photoshop:ColorMode>
         <photoshop:ICCProfile>sRGB IEC61966-2.1</photoshop:ICCProfile>
      </rdf:Description>
   </rdf:RDF>
</x:xmpmeta>
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                            
<?xpacket end="w"?>8BIM:                printOutput       PstSbool    Inteenum    Inte    Clrm   printSixteenBitbool    printerNameTEXT        printProofSetupObjc    P r o o f   S e t u p     
proofSetup       Bltnenum   builtinProof   	proofCMYK 8BIM;    -           printOutputOptions       Cptnbool     Clbrbool     RgsMbool     CrnCbool     CntCbool     Lblsbool     Ngtvbool     EmlDbool     Intrbool     BckgObjc         RGBC       Rd  doub@o         Grn doub@o         Bl  doub@o         BrdTUntF#Rlt            Bld UntF#Rlt            RsltUntF#Pxl@R         
vectorDatabool    PgPsenum    PgPs    PgPC    LeftUntF#Rlt            Top UntF#Rlt            Scl UntF#Prc@Y         cropWhenPrintingbool    cropRectBottomlong       cropRectLeftlong       cropRectRightlong       cropRectToplong     8BIM      H     H    8BIM&               ?  8BIM     Transparency 8BIM         T r a n s p a r e n c y  8BIM5                 d 8BIM         8BIM     
    8BIM        x8BIM        8BIM     	         8BIM'     
        8BIM     H /ff  lff       /ff         2    Z         5    -        8BIM     p                8BIM       8BIM                   8BIM0      8BIM-         8BIM          @  @    8BIM         8BIM    5                                                                                                     null      boundsObjc         Rct1       Top long        Leftlong        Btomlong       Rghtlong      slicesVlLs   Objc        slice      sliceIDlong       groupIDlong       originenum   ESliceOrigin   autoGenerated    Typeenum   
ESliceType    Img    boundsObjc         Rct1       Top long        Leftlong        Btomlong       Rghtlong      urlTEXT         nullTEXT         MsgeTEXT        altTagTEXT        cellTextIsHTMLbool   cellTextTEXT        	horzAlignenum   ESliceHorzAlign   default   	vertAlignenum   ESliceVertAlign   default   bgColorTypeenum   ESliceBGColorType    None   	topOutsetlong       
leftOutsetlong       bottomOutsetlong       rightOutsetlong     8BIM(        ?      8BIM    H  HLino  mntrRGB XYZ   	  1  acspMSFT    IEC sRGB                  -HP                                                 cprt  P   3desc     lwtpt     bkpt     rXYZ     gXYZ  ,   bXYZ  @   dmnd  T   pdmdd     vued  L   view     $lumi     meas     $tech  0   rTRC  <  gTRC  <  bTRC  <  text    Copyright (c) 1998 Hewlett-Packard Company  desc       sRGB IEC61966-2.1           sRGB IEC61966-2.1                                                  XYZ       Q    XYZ                 XYZ       o  8  XYZ       b    XYZ       $    desc       IEC http://www.iec.ch           IEC http://www.iec.ch                                              desc       .IEC 61966-2.1 Default RGB colour space - sRGB           .IEC 61966-2.1 Default RGB colour space - sRGB                      desc       ,Reference Viewing Condition in IEC61966-2.1           ,Reference Viewing Condition in IEC61966-2.1                          view      _.    \   XYZ      L	V P   Wmeas                            sig     CRT curv           
     # ( - 2 7 ; @ E J O T Y ^ c h m r w |                         %+28>ELRY`gnu|&/8AKT]gqz !-8COZfr~ -;HUcq~+:IXgw'7HYj{+=Oat2FZn		%	:	O	d	y						

'
=
T
j





"9Qi*C\u&@Zt.Id	%A^z	&Ca~1Om&Ed#Cc'Ij4Vx&IlAe@e Ek*Qw;c*R{Gp@j>i  A l   !!H!u!!!"'"U"""#
#8#f###$$M$|$$%	%8%h%%%&'&W&&&''I'z''((?(q(())8)k))**5*h**++6+i++,,9,n,,--A-v--..L.../$/Z///050l0011J1112*2c2233F3334+4e4455M555676r667$7`7788P8899B999:6:t::;-;k;;<'<e<<="=a==> >`>>?!?a??@#@d@@A)AjAAB0BrBBC:C}CDDGDDEEUEEF"FgFFG5G{GHHKHHIIcIIJ7J}JKKSKKL*LrLMMJMMN%NnNO OIOOP'PqPQQPQQR1R|RSS_SSTBTTU(UuUVV\VVWDWWX/X}XYYiYZZVZZ[E[[\5\\]']x]^^l^__a_``W``aOaabIbbcCccd@dde=eef=ffg=ggh?hhiCiijHjjkOkklWlmm`mnnknooxop+ppq:qqrKrss]sttptu(uuv>vvwVwxxnxy*yyzFz{{c{|!||}A}~~b~#G
k0WGr;i3d0c1f6n?zM _4
uL$hBd@iG&vV8nR7u\D- u`K8%yhYJ;.!
zpg_XQKFA=:8655679<?DINU\dlv)6DScs2F[p(@Xr4Pm8Ww)Km8BIM        8BIM                8  @    XICC_PROFILE   HLino  mntrRGB XYZ   	  1  acspMSFT    IEC sRGB                   -HP                                                 cprt  P   3desc     lwtpt     bkpt     rXYZ     gXYZ  ,   bXYZ  @   dmnd  T   pdmdd     vued  L   view     $lumi     meas     $tech  0   rTRC  <  gTRC  <  bTRC  <  text    Copyright (c) 1998 Hewlett-Packard Company  desc       sRGB IEC61966-2.1           sRGB IEC61966-2.1                                                  XYZ       Q    XYZ                 XYZ       o  8  XYZ       b    XYZ       $    desc       IEC http://www.iec.ch           IEC http://www.iec.ch                                              desc       .IEC 61966-2.1 Default RGB colour space - sRGB           .IEC 61966-2.1 Default RGB colour space - sRGB                      desc       ,Reference Viewing Condition in IEC61966-2.1           ,Reference Viewing Condition in IEC61966-2.1                          view      _.    \   XYZ      L	V P   Wmeas                            sig     CRT curv           
     # ( - 2 7 ; @ E J O T Y ^ c h m r w |                         %+28>ELRY`gnu|&/8AKT]gqz !-8COZfr~ -;HUcq~+:IXgw'7HYj{+=Oat2FZn		%	:	O	d	y						

'
=
T
j





"9Qi*C\u&@Zt.Id	%A^z	&Ca~1Om&Ed#Cc'Ij4Vx&IlAe@e Ek*Qw;c*R{Gp@j>i  A l   !!H!u!!!"'"U"""#
#8#f###$$M$|$$%	%8%h%%%&'&W&&&''I'z''((?(q(())8)k))**5*h**++6+i++,,9,n,,--A-v--..L.../$/Z///050l0011J1112*2c2233F3334+4e4455M555676r667$7`7788P8899B999:6:t::;-;k;;<'<e<<="=a==> >`>>?!?a??@#@d@@A)AjAAB0BrBBC:C}CDDGDDEEUEEF"FgFFG5G{GHHKHHIIcIIJ7J}JKKSKKL*LrLMMJMMN%NnNO OIOOP'PqPQQPQQR1R|RSS_SSTBTTU(UuUVV\VVWDWWX/X}XYYiYZZVZZ[E[[\5\\]']x]^^l^__a_``W``aOaabIbbcCccd@dde=eef=ffg=ggh?hhiCiijHjjkOkklWlmm`mnnknooxop+ppq:qqrKrss]sttptu(uuv>vvwVwxxnxy*yyzFz{{c{|!||}A}~~b~#G
k0WGr;i3d0c1f6n?zM _4
uL$hBd@iG&vV8nR7u\D- u`K8%yhYJ;.!
zpg_XQKFA=:8655679<?DINU\dlv)6DScs2F[p(@Xr4Pm8Ww)Km Adobe_CM  Adobe d     			
   "   ?          	
         	
 3 !1AQa"q2B#$Rb34rC%Scs5&DTdEt6UeuF'Vfv7GWgw 5 !1AQaq"2B#R3$brCScs4%&5DTdEU6teuFVfv'7GWgw   ? TI%)$IOT$$8BIM!     U       A d o b e   P h o t o s h o p    A d o b e   P h o t o s h o p   C S 6    8BIM"    .MM *                  b       j(       1       r2       i           
  ' 
  'Adobe Photoshop CS6 (Windows) 2017:01:20 01:54:06                                                 &(             .               H      H   8BIM     maniIRFR   8BIMAnDs               null       AFStlong        FrInVlLs   Objc         null       FrIDlong5b    FStsVlLs   Objc         null       FsIDlong        AFrmlong        FsFrVlLs   long5b    LCntlong      8BIMRoll           8BIM     mfri                      ,P  ,$                       b    b    b8BIMnorm 
   <       (                    Layer 18BIMluni       L a y e r   1  8BIMlnsr   layr8BIMlyid      8BIMclbl      8BIMinfx       8BIMknko       8BIMlspf       8BIMlclr           8BIMshmd   H   8BIMcust       4           metadata      	layerTimedoubA m 8BIMfxrp                                                    8BIMnorm    0       (                    </Layer group> 8BIMluni        < / L a y e r   g r o u p >8BIMlnsr   lset8BIMlyid      8BIMlsct      8BIMlspf       8BIMlclr           8BIMshmd   H   8BIMcust       4           metadata      	layerTimedoubA m 8BIMfxrp                               $     R    R    R   8BIMnorm                      (                    	Ellipse 1  8BIMvscg   tSoCo            null       Clr Objc         RGBC       Rd  doub@k@       Grn doub@k@       Bl  doub@k@   8BIMvsms                                                                                         9N            C  J                  C          9N              J      8BIMluni      	 E l l i p s e   1  8BIMlnsr   shap8BIMlyid      8BIMclbl      8BIMinfx       8BIMknko       8BIMlspf       8BIMlclr           8BIMshmd   H   8BIMcust       4           metadata      	layerTimedoubA m! 8BIMvstk  <           strokeStyle      strokeStyleVersionlong      strokeEnabledbool   fillEnabledbool    strokeStyleLineWidthUntF#Pxl?         strokeStyleLineDashOffsetUntF#Pnt           strokeStyleMiterLimitdoub@Y         strokeStyleLineCapTypeenum   strokeStyleLineCapType   strokeStyleButtCap   strokeStyleLineJoinTypeenum   strokeStyleLineJoinType   strokeStyleMiterJoin   strokeStyleLineAlignmentenum   strokeStyleLineAlignment   strokeStyleAlignInside   strokeStyleScaleLockbool    strokeStyleStrokeAdjustbool    strokeStyleLineDashSetVlLs       strokeStyleBlendModeenum    BlnM    Nrml   strokeStyleOpacityUntF#Prc@Y         strokeStyleContentObjc        solidColorLayer       Clr Objc         RGBC       Rd  doub@o         Grn doub@o         Bl  doub@o        strokeStyleResolutiondoub@R      8BIMfxrp           @      8BIMlyvr               r     r    r    r  8BIMnorm                   (                    	Polygon 1  8BIMvscg   tSoCo            null       Clr Objc         RGBC       Rd  doub@k@       Grn doub@k@       Bl  doub@k@   8BIMvsms                                                                                     w z w z w z     8BIMluni      	 P o l y g o n   1  8BIMlnsr   shap8BIMlyid      8BIMclbl      8BIMinfx       8BIMknko       8BIMlspf       8BIMlclr           8BIMshmd   H   8BIMcust       4           metadata      	layerTimedoubA mA 8BIMvstk  <           strokeStyle      strokeStyleVersionlong      strokeEnabledbool   fillEnabledbool    strokeStyleLineWidthUntF#Pxl?         strokeStyleLineDashOffsetUntF#Pnt           strokeStyleMiterLimitdoub@Y         strokeStyleLineCapTypeenum   strokeStyleLineCapType   strokeStyleButtCap   strokeStyleLineJoinTypeenum   strokeStyleLineJoinType   strokeStyleMiterJoin   strokeStyleLineAlignmentenum   strokeStyleLineAlignment   strokeStyleAlignInside   strokeStyleScaleLockbool    strokeStyleStrokeAdjustbool    strokeStyleLineDashSetVlLs       strokeStyleBlendModeenum    BlnM    Nrml   strokeStyleOpacityUntF#Prc@Y         strokeStyleContentObjc        solidColorLayer       Clr Objc         RGBC       Rd  doub@o         Grn doub@o         Bl  doub@o        strokeStyleResolutiondoub@R      8BIMfxrp   @[N@'-8BIMlyvr                        R    R    R   8BIMnorm                      (                    Ellipse 1 copy 8BIMvscg   tSoCo            null       Clr Objc         RGBC       Rd  doub@o         Grn doub@o         Bl  doub@o     8BIMvsms                                                                                         9N            C  J                  C          9N              J      8BIMluni        E l l i p s e   1   c o p y8BIMlnsr   shap8BIMlyid      	8BIMclbl      8BIMinfx       8BIMknko       8BIMlspf       8BIMlclr           8BIMshmd   H   8BIMcust       4           metadata      	layerTimedoubA m` 8BIMvstk  <           strokeStyle      strokeStyleVersionlong      strokeEnabledbool   fillEnabledbool   strokeStyleLineWidthUntF#Pxl?         strokeStyleLineDashOffsetUntF#Pnt           strokeStyleMiterLimitdoub@Y         strokeStyleLineCapTypeenum   strokeStyleLineCapType   strokeStyleButtCap   strokeStyleLineJoinTypeenum   strokeStyleLineJoinType   strokeStyleMiterJoin   strokeStyleLineAlignmentenum   strokeStyleLineAlignment   strokeStyleAlignInside   strokeStyleScaleLockbool    strokeStyleStrokeAdjustbool    strokeStyleLineDashSetVlLs       strokeStyleBlendModeenum    BlnM    Nrml   strokeStyleOpacityUntF#Prc@Y         strokeStyleContentObjc        solidColorLayer       Clr Objc         RGBC       Rd  doub@o         Grn doub@o         Bl  doub@o        strokeStyleResolutiondoub@R      8BIMfxrp           @      8BIMlyvr                    r    r    r  8BIMnorm                   (                    Polygon 1 copy 8BIMvscg   tSoCo            null       Clr Objc         RGBC       Rd  doub@o         Grn doub@o         Bl  doub@o     8BIMvsms                                                                                     w z w z w z     8BIMluni        P o l y g o n   1   c o p y8BIMlnsr   shap8BIMlyid      
8BIMclbl      8BIMinfx       8BIMknko       8BIMlspf       8BIMlclr           8BIMshmd   H   8BIMcust       4           metadata      	layerTimedoubA m 8BIMvstk  <           strokeStyle      strokeStyleVersionlong      strokeEnabledbool   fillEnabledbool   strokeStyleLineWidthUntF#Pxl?         strokeStyleLineDashOffsetUntF#Pnt           strokeStyleMiterLimitdoub@Y         strokeStyleLineCapTypeenum   strokeStyleLineCapType   strokeStyleButtCap   strokeStyleLineJoinTypeenum   strokeStyleLineJoinType   strokeStyleMiterJoin   strokeStyleLineAlignmentenum   strokeStyleLineAlignment   strokeStyleAlignInside   strokeStyleScaleLockbool    strokeStyleStrokeAdjustbool    strokeStyleLineDashSetVlLs       strokeStyleBlendModeenum    BlnM    Nrml   strokeStyleOpacityUntF#Prc@Y         strokeStyleContentObjc        solidColorLayer       Clr Objc         RGBC       Rd  doub@o         Grn doub@o         Bl  doub@o        strokeStyleResolutiondoub@R      8BIMfxrp   @[N@'-8BIMlyvr                                       8BIMnorm    (       (                    Group 18BIMluni       G r o u p   1  8BIMlnsr   lset8BIMlyid      8BIMlsct      8BIMpass    8BIMlspf       8BIMlclr           8BIMshmd   H   8BIMcust       4           metadata      	layerTimedoubA m 8BIMfxrp                                                                                                                                              ))))))))))))))))))))))))                         999999999999999999999999                  
 
 
 
          BC  ((  ?j i?  (   (      Db cD                    Gb aF     ( )   ?h h?  ((  	FF                                                                        
         
       BC  ((  ??  ((     DD              GF    ()   ??  ((  	FF        
                   
         U    |xU  x *  x  xU  x *  x wU  x *  x wU  x *   x wU  x xT  x *   x xT  x *  x xU  x *  x  xU  x *  |xU    U                                                                                                  	 	 	 	 	 	 	 	 	   	 	 	 	 	 	 	 	 	         U    U    U    U    U     U  T     T    U    U    U    U            
         
       BC  ((  ??  ((     DD              GF    ()   ??  ((  	FF                                                                        
         
       BC  ((  ??  ((     DD              GF    ()   ??  ((  	FF        	 	 	 	 	 	 	 	 	   	 	 	 	 	 	 	 	 	         U    U    U    U    U     U  T     T    U    U    U    U                                                                                                  	 	 	 	 	 	 	 	 	   	 	 	 	 	 	 	 	 	         U    U    U    U    U     U  T     T    U    U    U    U                   8BIMPatt    8BIMFMsk            2                                                                                                  @  @  @  @  @  @? ?  @  @  @  @                                    fileFormatVersion: 2
guid: 749d1db079e2d5e4ea440488ee312b04
TextureImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 11
  mipmaps:
    mipMapMode: 0
    enableMipMap: 1
    sRGBTexture: 1
    linearTexture: 0
    fadeOut: 0
    borderMipMap: 0
    mipMapsPreserveCoverage: 0
    alphaTestReferenceValue: 0.5
    mipMapFadeDistanceStart: 1
    mipMapFadeDistanceEnd: 3
  bumpmap:
    convertToNormalMap: 0
    externalNormalMap: 0
    heightScale: 0.25
    normalMapFilter: 0
  isReadable: 0
  streamingMipmaps: 0
  streamingMipmapsPriority: 0
  grayScaleToAlpha: 0
  generateCubemap: 6
  cubemapConvolution: 0
  seamlessCubemap: 0
  textureFormat: 1
  maxTextureSize: 2048
  textureSettings:
    serializedVersion: 2
    filterMode: -1
    aniso: -1
    mipBias: -100
    wrapU: -1
    wrapV: -1
    wrapW: -1
  nPOTScale: 1
  lightmap: 0
  compressionQuality: 50
  spriteMode: 0
  spriteExtrude: 1
  spriteMeshType: 1
  alignment: 0
  spritePivot: {x: 0.5, y: 0.5}
  spritePixelsToUnits: 100
  spriteBorder: {x: 0, y: 0, z: 0, w: 0}
  spriteGenerateFallbackPhysicsShape: 1
  alphaUsage: 1
  alphaIsTransparency: 0
  spriteTessellationDetail: -1
  textureType: 0
  textureShape: 1
  singleChannelComponent: 0
  maxTextureSizeSet: 0
  compressionQualitySet: 0
  textureFormatSet: 0
  applyGammaDecoding: 0
  platformSettings:
  - serializedVersion: 3
    buildTarget: DefaultTexturePlatform
    maxTextureSize: 2048
    resizeAlgorithm: 0
    textureFormat: -1
    textureCompression: 1
    compressionQuality: 50
    crunchedCompression: 0
    allowsAlphaSplitting: 0
    overridden: 0
    androidETC2FallbackOverride: 0
    forceMaximumCompressionQuality_BC6H_BC7: 0
  spriteSheet:
    serializedVersion: 2
    sprites: []
    outline: []
    physicsShape: []
    bones: []
    spriteID: 
    internalID: 0
    vertices: []
    indices: 
    edges: []
    weights: []
    secondaryTextures: []
  spritePackingTag: 
  pSDRemoveMatte: 0
  pSDShowRemoveMatteOption: 0
  userData: 
  assetBundleName: 
  assetBundleVariant: 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           fileFormatVersion: 2
guid: 35a21b8c004950548af9fc81919e1aa9
TextureImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 11
  mipmaps:
    mipMapMode: 0
    enableMipMap: 1
    sRGBTexture: 1
    linearTexture: 0
    fadeOut: 0
    borderMipMap: 0
    mipMapsPreserveCoverage: 0
    alphaTestReferenceValue: 0.5
    mipMapFadeDistanceStart: 1
    mipMapFadeDistanceEnd: 3
  bumpmap:
    convertToNormalMap: 0
    externalNormalMap: 0
    heightScale: 0.25
    normalMapFilter: 0
  isReadable: 0
  streamingMipmaps: 0
  streamingMipmapsPriority: 0
  grayScaleToAlpha: 0
  generateCubemap: 6
  cubemapConvolution: 0
  seamlessCubemap: 0
  textureFormat: 1
  maxTextureSize: 2048
  textureSettings:
    serializedVersion: 2
    filterMode: -1
    aniso: -1
    mipBias: -100
    wrapU: -1
    wrapV: -1
    wrapW: -1
  nPOTScale: 1
  lightmap: 0
  compressionQuality: 50
  spriteMode: 0
  spriteExtrude: 1
  spriteMeshType: 1
  alignment: 0
  spritePivot: {x: 0.5, y: 0.5}
  spritePixelsToUnits: 100
  spriteBorder: {x: 0, y: 0, z: 0, w: 0}
  spriteGenerateFallbackPhysicsShape: 1
  alphaUsage: 1
  alphaIsTransparency: 0
  spriteTessellationDetail: -1
  textureType: 0
  textureShape: 1
  singleChannelComponent: 0
  maxTextureSizeSet: 0
  compressionQualitySet: 0
  textureFormatSet: 0
  applyGammaDecoding: 0
  platformSettings:
  - serializedVersion: 3
    buildTarget: DefaultTexturePlatform
    maxTextureSize: 2048
    resizeAlgorithm: 0
    textureFormat: -1
    textureCompression: 1
    compressionQuality: 50
    crunchedCompression: 0
    allowsAlphaSplitting: 0
    overridden: 0
    androidETC2FallbackOverride: 0
    forceMaximumCompressionQuality_BC6H_BC7: 0
  spriteSheet:
    serializedVersion: 2
    sprites: []
    outline: []
    physicsShape: []
    bones: []
    spriteID: 
    internalID: 0
    vertices: []
    indices: 
    edges: []
    weights: []
    secondaryTextures: []
  spritePackingTag: 
  pSDRemoveMatte: 0
  pSDShowRemoveMatteOption: 0
  userData: 
  assetBundleName: 
  assetBundleVariant: 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            KA
   nsrP#Inf      g                    UczX          Prot   #FilxZkl#WnYGBy7]n6',18Wxlf&$VBE Q!R Q!
			D%*3&j<s3y	{`k9;S*	`l)Ez{:sTJNu
J%W<Sp(z|P~vt4N6*?Y3;==Y, 7_=W"Axzv;M6U`
T@pty)b8?}vj663>)LOO*df69"bJTWj*U,r8b'^L,!t!hp[9[N/We{q?OWj7dn&6	*|aB$:"kEEH01!&Na^ue|JQB~zzY?QRuW;.PDdQ|nR1$46$P"y3)en)/xJYU,Y.([%z*oX` j;e|GjjqgeF|vy%=5'fR3^BBR=oo@a?7bQ_|j~qX'&r)Z_K}tE=m(8u2AS~9 0ds	{~i%NMgIS*Vqj@SJ}^@Om*)$P]sQr1FE5fxf\W+5GZ%e;rpnSHJh7`hvQru@l*$ \
T,!6P ]RL_+(C!WQn/V-AObWfRx7x	*%9H>D%Iu2O*zPlinGaO$&/KFz@	OeilGDp Xu>FkWm2So~Ju!'B[
h%"
:Mcieddieh{XR_	5dAP5O[EMM&<B3+Vc<h%VA[dALVa1d15/RK^!^r'/[H)'1SG^wo]_%KXk\#8sm|W\uvIUT T!bM JKJ
`<\Enb&i.Rw
fs/E,U	eZ-^Z#?(3uYV{'Gf~IE	o=li1#fK~\!OqE]~{rw|</M_;Uuzv=y:l=ZB_ru~7lIu1}wxhSH^28tk<aX:]0|9b>Nzfe^2FEI,+%.n I^qiwMKM3S zTXp$UJ1>M3|Mzr>jy)^Ab-G'7	w/!vmcR}~'Br<7q
o@HDJ;CdaHl>dHSp"2x-YzP;m2qkVnKn!M:53m,s`Y|$V+*WkYL5r!rSL"yrF.[VextdOo0/3efi48k/Pp-(^lK$>f5b0'TeAAfTCPYI771hFc.+	t&>M) 2q6X7/<Kka#%x
<5(VkPUB
qdZeWSkkQ]UEvKqIQ{[b*+	T4>FBb.|dhKr1^SzE@O.qU'UTu<_[j@'{J<%z~nt:4Z7tg?q(uA)-Ty	oN^(N@"@hyD)%]&yMt!F9eFC] 
WAdCyd'CbSww  (D@`f1`R0`b8?zgavb0cm'2\`YA>7bwWpJwC9B18Uyx8zDX3BTd/+F4d1
0Ic_fe,#P2~	p		InBz}
s 1JMRqSQ*>P"qdd1. arO>0S\!BRD@CMg?P
;#0"qgwd-I@3Wuw0;^Tx=##}x
)zPSfpJ:@_R,H:q ];!9NVO`5<z[BV{=D`@NY 
X<*+E<A@$|$oR@Hx Y hbS BL N]V5OHUAf0x=d=#5^U-I,3 e"vh|n%IN0J0 t_N%7FBq[	H~GMK_8s_L92S GS!`jTS=5tjjUsDk6wNcdX| 9O2, P/	/xv~#C}e&!Ge~t~#blqA*,yitZR5 RMA/K_JbvcX~bj4~{cf}nlm4YVk{Kl},{oVefbe;1.XBW.	Z33g&?&.Mhnl;&&^zPfgg'&38q{o;]"u4l;	knU'z-I nX*:|nX8zW>CUkdT<t%P.eyS`O:>lLMn23o[CW#FT2        UczX    g                           /          H       /            SqJ    doc.datThmb              PNG

   IHDR            	pHYs    +  IDATx$IC	4[)% zMrmx<x<6  ?~ 0 O
 >M{R  T  / @U/)  z3K P_
 *NL{R  d87I ' @  Y<M{R  Dh3IP yomjl?~wI~ 7] N EI P@O
"$ ' @)    I O
 &M{R $%@By II O
 1=)   GO
d$ %' @ IH #'@ u 	 x<m_gJ %  e  A% LO{R eN{R  `
L{R $@ =)  @,U=) q @=)    AX   A8 `=)  `=) & \L{R L I H	  s:I0 3B
	$  Y `,  ` 	 0&   8 3iR  @G  }3 tbM
$  X R t LI 1 eC
 ;)  0R 4b6LcH n2'@ `F
, p) nr E ALaHp 1 E 8 H p?,) N 9 8 	 0!A 8 9 :R   x s <aOO
$ )  L5H vLH	 >1% 2$ >	 6B `1A
 g_ LX$< 2/O
`i K2A
`Y Veg  `9v $?OH,jL|G
`9 a)H ,AR  
?GH,@yNX@i.(@u(@Yn(M$?He*?-H ?I$PN  P q P J ( R eX R e8 H`R %H fg), dgg) eg2)$ R2@Z 2@Z 1@J 	J
  H
  i	N
 	L$!,Ld L$#@h@t2@XM $?EHe *?H  ?H$   q  B "  H `:?A`*?lV$0iL,N
`*	)LmD f1D 3R SH eoIg`4?J
`8 %)$ 0!R X I ;?"0@WD
; <) tc[  MHtc?'L@ M), f s hJ	?!VL@3 n3PR MH b) n peJ
	KLe 2|R 9 8H\"pB8YG
4 !4)S$ 1C
R Y 8I -?"pKHI
- !) <e ^ Jx3O
) 0C)R  %ILP aR ?Y ??' ?E
`6	`yX ?,H
2?,M
X(?IK Hs ,|",JX zL BLRb$EX a X8A
XP@
X>?p @a)8	(?P.?pP ?PP@
(PhM
(PH
(F( b& ($!$g&
 gF
p $f& 2HY 2I9 2HII , h d$$L@R@"<L@tR@"L@"R@@p !) @| ) @` 1) 8	 (?P .?  ?P(H
F
(L
F,@
N
X0X`>?)  D`aRd$ )`&<`uRD	L ?IH ~!L`0` ?SR` , ^r `8L
Dp0??9R L II n: cG
)	1?@sR@L mI8 2t#4&4bN
h/)!@aF$L IX 3%4 0pp`:)u . N2#\`8p?@XRIA, bNp `HC
8Hxp=?@.RL iIoH O^ <gM
x?@R)_j P#|0'|b6)fXa`XY )`[ 0,kl0,o`X)`eSr	)`gK ? O,I  X* xe`eR@`%R
3H ? OeJ;JFr	@c%S@@K%S@@'R@`R)`R)``2) }00XPa00R 00I6,u
 )u
Hy "m
H L 2d\ L D2: L .I  K2-  "KR  H' ? H ? H ? IOaBB"p	@1!S@@%!S@@QR@`P) `P) ``aR``1!R@JBEMOMM3 ? +  mb
 L 0c0 5<K  xih
 )``C	 I# ? 7$t= L pI-)`. ' ? 4%X L N 0@S@` i  Y
 L 0Tb08MR SN ,  V
t  )t0@(R q\J ? t:N  T
8  S)`	 JG ? q(< L 4 )`^o ? 4 L P) u|  (3/)` ~`)/m Xm>cW}    IENDB`                                                                                                                                                           INDX( 	 T           (   p        
   p           <    ` P         LX>>&]                        C l o n i n g     p Z         /tX PZ*/tX                       C l o n i n g . m e t a       Y    h X         XM]                        C o l l e c t i o n s     x b         tX PtX                       C o l l e c t i o n s . m e t a           h X   
     >X o o\]                        C o n n e c t i o n s      x b         tX P.<tX                       C o n n e c t i o n s . m e t a           h V         o/X[[$                       
 D e c o r a t o r s . !    p `         [uX P#uX                       D e c o r a t o r s . m e t a     p Z         (X=X=X]                        D e 
 e n d e n c i e s . m e "    x d         uX PAuX                       D e p e n d e n c i e s . m e t a         p \         Xk]                        E d i t o r B i n d i n g . m #    x f         p-vX Pi=|YvX                       E d i t o r B i n d i n g . m e t a   L    ` N         WXuud]                        E n s u r e . $    h X         qvX P
 vX                       E n s u r e . m e t a m    ` N         t*XAAd]                        E v e n t s . %    h X         vX P(&wX                       E v e n t s . m e t a     h V         Xd]                       
 E x c e p t i o n s . &    p `         itwX P.itwX                       E x c e p t i o n s . m e t a     ` N         X
 \]                        G r a p h s . '    h X         wX PfrwX                       G r a p h s . m e t a     ` N         ;'YAA$                        G r o u p s . (    h X         7xX Pr)oJxX                       G r o u p s . m e t a     ` L         y8Y$                        I n p u t . m )    h V         xX Pi
 xX                      
 I n p u t . m e t a       h T         vYrr]                       	 L i s t e n e r s . m *    p ^         xX P^xXX       S                L i s t e n e r s . m e t a   G    h R         XIYrr$                        M a c h i n e s e s .               p `         t|X P%Tt|X                       R e f l e c t i o n . m e t a 4    x f   
     |X P,m|X                       S e r i a l i z a t i o n . m e t a   5     t         ~7}X Pde~7}X                       S e r i a l i z e d P r o p e r t i e s . m e t a     6    p `         g}X P!a}XX       V                S t i c k y N o t e . m e t a 7    h V         }X P%A~X                      
 U n i t y . m e t a   8              
G~X PDo~X
        
              ! U n i t y . V i s u a l S c r i p t i n g . C o r e . a s m d e f     9              ~X P aCw~X                      & U n i t y . V i s u a l S c r i p t i n g . C o r e . a s m d e f . m e t a   :    p ^         X P,X                       U t i l i t i e s . m e t a   ;    p ^         ^X P^X                       V a r i a b l e s . m e t a        